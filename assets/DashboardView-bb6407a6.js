import{d as A,u as E,A as P,a as R,r as _,b as c,G as u,D as h,K as T,o as $,c as d,e as B,w as n,f as t,Q as N,g as O,h as r,i as Q,j as g,k as L,F as V,l,m as q,t as G,I as p,n as S,p as H}from"./index-bcd0c63a.js";import{_ as U}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-7d23b4d4.js";import{_ as j}from"./WelcomeOverlay.vue_vue_type_script_setup_true_lang-3e4a674c.js";import{_ as F}from"./DashboardParentCard.vue_vue_type_script_setup_true_lang-cd57f745.js";import{u as K}from"./useRoutables-8e2fcfd3.js";import{u as W}from"./ui-28282952.js";import"./useDefaults-58b649dc.js";import"./useDialogs-a5eb05fb.js";import"./SimpleDialog.vue_vue_type_script_setup_true_lang-682ca1b0.js";import"./QItem-b53cd3c9.js";import"./QList-88ad3383.js";import"./QMenu-eb68067c.js";import"./selection-e8e07d3b.js";const z=l("p",{class:"text-h6"},"What would you like to work on?",-1),M={class:"row justify-center q-my-md"},J={class:"col-12 text-center"},X={class:"col-12 text-grey text-center"},me=A({__name:"DashboardView",setup(Y){E({title:`${P} - Dashboard`});const s=W(),{log:m}=R(),{goToCreate:b}=K(),f=_(!1),i=_([]),D=c.filter(e=>e.group===u.PARENT).map(e=>({label:e.labelPlural,value:e.labelPlural})),v=h.liveSettings().subscribe({next:e=>{var o;f.value=!!((o=e.find(a=>a.key===T.SHOW_DESCRIPTIONS))!=null&&o.value)},error:e=>{m.error("Error fetching live Settings",e)}}),y=h.liveDashboard().subscribe({next:e=>{i.value=e},error:e=>{m.error("Error fetching live Dashboard",e)}});$(()=>{v.unsubscribe(),y.unsubscribe()});function C(){return i.value.filter(e=>e.labelPlural===s.dashboardSelection)}function k(){return H(i.value.filter(e=>e.labelPlural===s.dashboardSelection))}function x(){var o;return`Create ${(o=c.find(a=>a.labelPlural===s.dashboardSelection))==null?void 0:o.labelSingular}`}function I(){var e;return(e=c.find(o=>o.labelPlural===s.dashboardSelection))==null?void 0:e.type}return(e,o)=>(d(),B(U,{bannerIcon:r(p).DASHBOARD,bannerTitle:"Dashboard"},{default:n(()=>[t(j),t(Q,{class:"q-mb-md"},{default:n(()=>[t(N,null,{default:n(()=>[z,t(O,{color:"primary",options:r(D),"model-value":r(s).dashboardSelection,"onUpdate:modelValue":o[0]||(o[0]=a=>r(s).dashboardSelection=a)},null,8,["options","model-value"])]),_:1})]),_:1}),(d(!0),g(V,null,L(C(),(a,w)=>(d(),g("div",{key:w},[t(F,{class:"q-mb-md",showDescription:f.value,dashboardCard:a},{default:n(()=>[t(S,{label:"Attach Record",color:"primary",icon:r(p).ADD_NOTE,onClick:Z=>r(b)(a.type,r(u).CHILD,a.groupId)},null,8,["icon","onClick"])]),_:2},1032,["showDescription","dashboardCard"])]))),128)),l("div",M,[l("div",J,[t(q,{name:"menu_open",size:"80px",color:"grey"})]),l("p",X,G(k()),1),t(S,{color:"positive",icon:r(p).CREATE,label:`${x()}`,onClick:o[1]||(o[1]=a=>r(b)(I(),r(u).PARENT))},null,8,["icon","label"])])]),_:1},8,["bannerIcon"]))}});export{me as default};
