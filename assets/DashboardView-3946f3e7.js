import{u as s,r as L,i as ge,w as be,g as Se,o as Ae,c as q,a as we,b as pe,d as $e,e as xe,f as Ce,h as De,j as Ie,k as Ve,l as z,m as ke,Q as D,n as Oe,p as Fe,s as W,q as ue,t as fe,D as R,v as X,x as de,y as E,z as Z,A as b,B as u,C as me,E as y,F as V,G as ee,H as Ee,I as _,J as N,K as Le,L as ve,M as Te,N as qe,O as U,P as Re,R as B,S as oe,T as le,U as Ne,V as F,W as ie,X as K,Y,Z as G,_ as Me}from"./index-24dbccec.js";import{Q as J,a as H}from"./QItem-4a4784b7.js";import{Q as Pe}from"./QList-69493521.js";import{Q as He}from"./QMenu-315589be.js";import{Q as Qe}from"./QBadge-1143e6bc.js";import{_ as Ue}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-de00a452.js";import{u as Be}from"./useRoutables-4d249602.js";import{u as je}from"./ui-e8c912c8.js";import{u as ze}from"./useDialogs-81031fdf.js";import"./selection-f172746f.js";import"./action-b51c5118.js";import"./QSelect-1164f6a3.js";import"./QItemLabel-2ad87e79.js";function te(e){return Se()?(Ae(e),!0):!1}function ne(e){return typeof e=="function"?e():s(e)}const ae=typeof window<"u";function We(e,a=1e3,l={}){const{immediate:r=!0,immediateCallback:f=!1}=l;let h=null;const d=L(!1);function c(){h&&(clearInterval(h),h=null)}function v(){d.value=!1,c()}function S(){const w=ne(a);w<=0||(d.value=!0,f&&e(),c(),h=setInterval(e,w))}if(r&&ae&&S(),ge(a)||typeof a=="function"){const w=be(a,()=>{d.value&&ae&&S()});te(w)}return te(v),{isActive:d,pause:v,resume:S}}const Ke=ae?window:void 0;function Ye(e,a={}){const{immediate:l=!0,window:r=Ke}=a,f=L(!1);let h=0,d=null;function c(w){if(!f.value||!r)return;const x=w-(h||w);e({delta:x,timestamp:w}),h=w,d=r.requestAnimationFrame(c)}function v(){!f.value&&r&&(f.value=!0,d=r.requestAnimationFrame(c))}function S(){f.value=!1,d!=null&&r&&(r.cancelAnimationFrame(d),d=null)}return l&&v(),te(S),{isActive:we(f),pause:S,resume:v}}var Ge=Object.defineProperty,se=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,re=(e,a,l)=>a in e?Ge(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,Ze=(e,a)=>{for(var l in a||(a={}))Je.call(a,l)&&re(e,l,a[l]);if(se)for(var l of se(a))Xe.call(a,l)&&re(e,l,a[l]);return e};function et(e={}){const{controls:a=!1,interval:l="requestAnimationFrame"}=e,r=L(new Date),f=()=>r.value=new Date,h=l==="requestAnimationFrame"?Ye(f,{immediate:!0}):We(f,l,{immediate:!0});return a?Ze({now:r},h):r}var tt=Object.defineProperty,j=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ce=(e,a,l)=>a in e?tt(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,nt=(e,a)=>{for(var l in a||(a={}))he.call(a,l)&&ce(e,l,a[l]);if(j)for(var l of j(a))ye.call(a,l)&&ce(e,l,a[l]);return e},at=(e,a)=>{var l={};for(var r in e)he.call(e,r)&&a.indexOf(r)<0&&(l[r]=e[r]);if(e!=null&&j)for(var r of j(e))a.indexOf(r)<0&&ye.call(e,r)&&(l[r]=e[r]);return l};const ot=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],lt={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,a)=>e===1?a?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,a)=>e===1?a?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,a)=>e===1?a?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,a)=>e===1?a?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function it(e){return e.toISOString().slice(0,10)}function st(e,a={}){const{controls:l=!1,updateInterval:r=3e4}=a,f=et({interval:r,controls:!0}),{now:h}=f,d=at(f,["now"]),c=q(()=>rt(new Date(ne(e)),a,ne(h)));return l?nt({timeAgo:c},d):c}function rt(e,a={},l=Date.now()){var r;const{max:f,messages:h=lt,fullDateFormatter:d=it,units:c=ot,showSecond:v=!1,rounding:S="round"}=a,w=typeof S=="number"?g=>+g.toFixed(S):Math[S],x=+l-+e,k=Math.abs(x);function M(g,A){return w(Math.abs(g)/A.value)}function P(g,A){const I=M(g,A),n=g>0,t=T(A.name,I,n);return T(n?"past":"future",t,n)}function T(g,A,I){const n=h[g];return typeof n=="function"?n(A,I):n.replace("{0}",A.toString())}if(k<6e4&&!v)return h.justNow;if(typeof f=="number"&&k>f)return d(new Date(e));if(typeof f=="string"){const g=(r=c.find(A=>A.name===f))==null?void 0:r.max;if(g&&k>g)return d(new Date(e))}for(const[g,A]of c.entries()){if(M(x,A)<=0&&c[g-1])return P(x,c[g-1]);if(k<A.max)return P(x,A)}return h.invalid}const ct=pe({name:"QRating",props:{...$e,...xe,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:a,emit:l}){const{proxy:{$q:r}}=Ce(),f=De(e),h=Ie(e),d=Oe(h),c=L(0);let v={};const S=q(()=>e.readonly!==!0&&e.disable!==!0),w=q(()=>`q-rating row inline items-center q-rating--${S.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),x=q(()=>{const n=Array.isArray(e.icon)===!0?e.icon.length:0,t=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,m=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,o=Array.isArray(e.color)===!0?e.color.length:0,p=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,i=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:n,icon:n>0?e.icon[n-1]:e.icon,selIconLen:t,selIcon:t>0?e.iconSelected[t-1]:e.iconSelected,halfIconLen:m,halfIcon:m>0?e.iconHalf[t-1]:e.iconHalf,colorLen:o,color:o>0?e.color[o-1]:e.color,selColorLen:p,selColor:p>0?e.colorSelected[p-1]:e.colorSelected,halfColorLen:i,halfColor:i>0?e.colorHalf[i-1]:e.colorHalf}}),k=q(()=>{if(typeof e.iconAriaLabel=="string"){const n=e.iconAriaLabel.length!==0?`${e.iconAriaLabel} `:"";return t=>`${n}${t}`}if(Array.isArray(e.iconAriaLabel)===!0){const n=e.iconAriaLabel.length;if(n>0)return t=>e.iconAriaLabel[Math.min(t,n)-1]}return(n,t)=>`${t} ${n}`}),M=q(()=>{const n=[],t=x.value,m=Math.ceil(e.modelValue),o=S.value===!0?0:null,p=e.iconHalf===void 0||m===e.modelValue?-1:m;for(let i=1;i<=e.max;i++){const C=c.value===0&&e.modelValue>=i||c.value>0&&c.value>=i,O=p===i&&c.value<i,$=c.value>0&&(O===!0?m:e.modelValue)>=i&&c.value<i,Q=O===!0?i<=t.halfColorLen?e.colorHalf[i-1]:t.halfColor:t.selColor!==void 0&&C===!0?i<=t.selColorLen?e.colorSelected[i-1]:t.selColor:i<=t.colorLen?e.color[i-1]:t.color,_e=(O===!0?i<=t.halfIconLen?e.iconHalf[i-1]:t.halfIcon:t.selIcon!==void 0&&(C===!0||$===!0)?i<=t.selIconLen?e.iconSelected[i-1]:t.selIcon:i<=t.iconLen?e.icon[i-1]:t.icon)||r.iconSet.rating.icon;n.push({name:(O===!0?i<=t.halfIconLen?e.iconHalf[i-1]:t.halfIcon:t.selIcon!==void 0&&(C===!0||$===!0)?i<=t.selIconLen?e.iconSelected[i-1]:t.selIcon:i<=t.iconLen?e.icon[i-1]:t.icon)||r.iconSet.rating.icon,attrs:{tabindex:o,role:"radio","aria-checked":e.modelValue===i?"true":"false","aria-label":k.value(i,_e)},iconClass:"q-rating__icon"+(C===!0||O===!0?" q-rating__icon--active":"")+($===!0?" q-rating__icon--exselected":"")+(c.value===i?" q-rating__icon--hovered":"")+(Q!==void 0?` text-${Q}`:"")})}return n}),P=q(()=>{const n={role:"radiogroup"};return e.disable===!0&&(n["aria-disabled"]="true"),e.readonly===!0&&(n["aria-readonly"]="true"),n});function T(n){if(S.value===!0){const t=Fe(parseInt(n,10),1,parseInt(e.max,10)),m=e.noReset!==!0&&e.modelValue===t?0:t;m!==e.modelValue&&l("update:modelValue",m),c.value=0}}function g(n){S.value===!0&&(c.value=n)}function A(n,t){switch(n.keyCode){case 13:case 32:return T(t),W(n);case 37:case 40:return v[`rt${t-1}`]&&v[`rt${t-1}`].focus(),W(n);case 39:case 38:return v[`rt${t+1}`]&&v[`rt${t+1}`].focus(),W(n)}}function I(){c.value=0}return Ve(()=>{v={}}),()=>{const n=[];return M.value.forEach(({iconClass:t,name:m,attrs:o},p)=>{const i=p+1;n.push(z("div",{key:i,ref:C=>{v[`rt${i}`]=C},class:"q-rating__icon-container flex flex-center",...o,onClick(){T(i)},onMouseover(){g(i)},onMouseout:I,onFocus(){g(i)},onBlur:I,onKeyup(C){A(C,i)}},ke(a[`tip-${i}`],[z(D,{class:t,name:m})])))}),e.name!==void 0&&e.disable!==!0&&d(n,"push"),z("div",{class:w.value,style:f.value,...P.value},n)}}}),ut={class:"text-h6"},ft=y("p",null,' Continue reading to learn more, or scroll to the bottom and click the "Start Using App" button to jump right in. ',-1),dt={class:"q-mb-md"},mt=y("p",null," You are currently on the Dashboard page. This page gives you quick access to the primary data you work with in the app. You can favorite items on the Dashboard by clicking the star icon in the top right corner of the item. This prioritizes the item to the top of the list. An example of the favorite icon button is below. ",-1),vt={class:"q-mb-md"},ht=y("p",null," You can navigate through the app using the menu in the top left corner of the page. An example of the menu button is below. The menu gives you access to the primary data tables, Frequently Asked Questions (FAQ), Settings, and more. More advanced operations for the app are available on the Settings page. ",-1),yt={class:"q-mb-md"},_t=y("p",null,"Click the button below when you are ready to get started.",-1),gt=ue({__name:"WelcomeOverlay",setup(e){const{log:a}=fe(),l=L(0),r=L(!1),f=R.liveSettings().subscribe({next:d=>{var c;r.value=(c=d.find(v=>v.key===X.Values["welcome-overlay"]))==null?void 0:c.value},error:d=>{a.error("Error fetching live Settings",d)}});de(()=>{f.unsubscribe()});async function h(){await R.setSetting(X.Values["welcome-overlay"],!1)}return(d,c)=>(E(),Z(Te,{modelValue:r.value,"onUpdate:modelValue":c[2]||(c[2]=v=>r.value=v),persistent:""},{default:b(()=>[u(ve,null,{default:b(()=>[u(me,null,{default:b(()=>[y("p",ut,"Welcome to "+V(s(ee)),1),y("p",null,V(s(Ee)),1),ft,y("div",dt,[mt,u(ct,{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=v=>l.value=v),max:1,icon:s(_).FAVORITE_OFF,"icon-selected":s(_).FAVORITE_ON,color:"warning",size:"md"},null,8,["modelValue","icon","icon-selected"])]),y("div",vt,[ht,u(N,{disable:"",color:"primary",class:"q-px-sm",icon:s(_).MENU_STANDARD},null,8,["icon"])]),y("div",yt,[y("p",null," Hope you find "+V(s(ee))+" useful. Please consider donating to help me continue to create and maintain apps like this. Thank you! ",1),u(N,{color:"warning",label:"Donate",to:{name:s(Le).Values.Donate},icon:s(_).DONATE},null,8,["to","icon"])]),y("div",null,[_t,u(N,{"no-caps":"",label:"Start Using App",class:"full-width",size:"lg",color:"positive",icon:s(_).RECOMMEND,onClick:c[1]||(c[1]=v=>h())},null,8,["icon"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),bt={class:"q-mb-md"},St=y("p",{class:"text-h6 q-mb-sm text-center"},"What would you like to work on?",-1),At={class:"text-center"},wt={class:"row justify-center"},pt={class:"text-h6"},$t={key:0},xt={class:"absolute-top-right q-ma-xs"},Ct={class:"q-mb-md"},Dt={class:"text-caption q-ml-xs"},It={key:0},Vt={class:"text-caption q-ml-xs"},kt={class:"row justify-center"},Ot={class:"col-12 text-grey text-center"},jt=ue({__name:"DashboardView",setup(e){qe({title:`${ee} - Dashboard`});const a=je(),{log:l}=fe(),{goToCreate:r,goToEdit:f}=Be(),{confirmDialog:h,dismissDialog:d,inspectDialog:c,chartsDialog:v}=ze(),S=L(!1),w=U.getDashboardOptions(),x=L(Re.options.reduce((n,t)=>(n[t]=[],n),{})),k=R.liveSettings().subscribe({next:n=>{var t;S.value=(t=n.find(m=>m.key===X.Values["dashboard-descriptions"]))==null?void 0:t.value},error:n=>{l.error("Error fetching live Settings",n)}}),M=R.liveDashboard().subscribe({next:n=>{x.value=n},error:n=>{l.error("Error fetching live Dashboard",n)}});de(()=>{k.unsubscribe(),M.unsubscribe()});async function P(n){d("Last Note",n,_.NOTE)}async function T(n,t){h("Favorite",`Do you want to favorite ${t}?`,_.FAVORITE_ON,"info",async()=>{try{await R.CoreRecords.update(n,{favorited:!0}),l.info(`${t} favorited`,{id:n,name:t})}catch(m){l.error("Favorite update failed",m)}})}async function g(n,t){h("Unfavorite",`Do you want to unfavorite ${t}?`,_.FAVORITE_OFF,"info",async()=>{try{await R.CoreRecords.update(n,{favorited:!1}),l.info(`${t} unfavorited`,{id:n,name:t})}catch(m){l.error("Unfavorite update failed",m)}})}async function A(n,t){const m=U.getLabel(F.Values.core,n,"singular"),o=await R.getRecord(F.Values.core,t),p=U.getFields(F.Values.core,n);c(m,o,p)}async function I(n,t){const m=U.getLabel(F.Values.core,a.dashboardSelection,"singular");v(m,n,t)}return(n,t)=>(E(),Z(Ue,{bannerIcon:s(_).DASHBOARD,bannerTitle:"Dashboard"},{default:b(()=>{var m;return[u(gt),y("section",bt,[St,y("p",At,V((m=s(w).find(o=>o.value===s(a).dashboardSelection))==null?void 0:m.label),1),y("div",wt,[(E(!0),B(le,null,oe(s(w),(o,p)=>(E(),Z(N,{key:p,round:"",size:"lg",class:"q-mb-xs q-mx-xs",icon:o.icon,color:s(a).dashboardSelection===o.value?"primary":"grey",onClick:i=>s(a).dashboardSelection=o.value},null,8,["icon","color","onClick"]))),128))])]),(E(!0),B(le,null,oe(x.value[s(a).dashboardSelection],(o,p)=>(E(),B("div",{key:p},[u(ve,{class:"q-mb-md"},{default:b(()=>[u(me,null,{default:b(()=>{var i,C,O;return[y("p",pt,V(o.name),1),S.value?(E(),B("p",$t,V(o.desc),1)):ie("",!0),y("div",xt,[K(u(D,{name:s(_).NOTE,color:"primary",size:"md",class:"cursor-pointer q-mr-xs",onClick:$=>{var Q;return P(((Q=o==null?void 0:o.lastSub)==null?void 0:Q.note)||"")}},null,8,["name","onClick"]),[[Y,(i=o==null?void 0:o.lastSub)==null?void 0:i.note]]),K(u(D,{name:s(_).FAVORITE_ON,color:"warning",size:"md",class:"cursor-pointer",onClick:$=>g(o.id,o.name)},null,8,["name","onClick"]),[[Y,o.favorited]]),K(u(D,{name:s(_).FAVORITE_OFF,color:"grey",size:"md",class:"cursor-pointer",onClick:$=>T(o.id,o.name)},null,8,["name","onClick"]),[[Y,!o.favorited]]),u(N,{round:"",flat:"",icon:s(_).MENU_VERTICAL},{default:b(()=>[u(He,{"auto-close":"",anchor:"top right","transition-show":"flip-right","transition-hide":"flip-left"},{default:b(()=>[u(Pe,null,{default:b(()=>[u(J,{clickable:"",onClick:$=>I(o.type,o.id)},{default:b(()=>[u(H,{avatar:""},{default:b(()=>[u(D,{color:"accent",name:s(_).CHARTS},null,8,["name"])]),_:1}),u(H,null,{default:b(()=>[G("Charts")]),_:1})]),_:2},1032,["onClick"]),u(J,{clickable:"",onClick:$=>A(o.type,o.id)},{default:b(()=>[u(H,{avatar:""},{default:b(()=>[u(D,{color:"primary",name:s(_).INSPECT},null,8,["name"])]),_:1}),u(H,null,{default:b(()=>[G("Inspect")]),_:1})]),_:2},1032,["onClick"]),u(J,{clickable:"",onClick:$=>s(f)(s(F).Values.core,o==null?void 0:o.type,o==null?void 0:o.id)},{default:b(()=>[u(H,{avatar:""},{default:b(()=>[u(D,{color:"warning",name:s(_).EDIT},null,8,["name"])]),_:1}),u(H,null,{default:b(()=>[G("Edit")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["icon"])]),y("div",Ct,[u(Qe,{rounded:"",color:"secondary",class:"q-py-none"},{default:b(()=>{var $;return[u(D,{name:s(_).PREVIOUS},null,8,["name"]),y("span",Dt,V(s(st)((($=o==null?void 0:o.lastSub)==null?void 0:$.timestamp)||"").value||"No previous records"),1)]}),_:2},1024),(C=o==null?void 0:o.lastSub)!=null&&C.timestamp?(E(),B("div",It,[u(D,{name:s(_).CALENDAR_CHECK},null,8,["name"]),y("span",Vt,V(s(Me)((O=o==null?void 0:o.lastSub)==null?void 0:O.timestamp)),1)])):ie("",!0)]),u(N,{label:"Add Sub Record",color:"primary",icon:s(_).ADD_NOTE,onClick:$=>s(r)(s(F).Values.sub,o==null?void 0:o.type,o==null?void 0:o.id)},null,8,["icon","onClick"])]}),_:2},1024)]),_:2},1024)]))),128)),y("div",kt,[u(D,{class:"col-12 text-center",name:"menu_open",size:"80px",color:"grey"}),y("p",Ot,V(s(Ne)(x.value[s(a).dashboardSelection])),1),u(N,{color:"positive",icon:s(_).CREATE,label:`Create ${s(U).getLabel(s(F).Values.core,s(a).dashboardSelection,"singular")}`,onClick:t[0]||(t[0]=o=>s(r)(s(F).Values.core,s(a).dashboardSelection))},null,8,["icon","label"])])]}),_:1},8,["bannerIcon"]))}});export{jt as default};
