import{d as x,u as w,A as I,a as O,r as _,T as $,D as c,b as f,K as A,o as B,c as u,e as E,w as n,f as r,Q,g as R,h as o,i as N,j as h,k as L,F as V,l as i,m as j,t as q,I as d,n as g,p as U}from"./index-2ed2ead9.js";import{_ as F}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-ff93d7d0.js";import{_ as H}from"./WelcomeOverlay.vue_vue_type_script_setup_true_lang-52e63e88.js";import{_ as K}from"./DashboardParentCard.vue_vue_type_script_setup_true_lang-ab3236df.js";import{u as P}from"./useRoutables-96f6398a.js";import{u as W}from"./ui-982734d1.js";import"./useDefaults-9a93f437.js";import"./useDialogs-bedc27ae.js";import"./SimpleDialog.vue_vue_type_script_setup_true_lang-36b175be.js";import"./QItem-bf3f0c3d.js";import"./QList-89957462.js";import"./QMenu-d2947be1.js";import"./selection-feb8c58b.js";import"./QBadge-ef537e40.js";const z=i("p",{class:"text-h6"},"What would you like to work on?",-1),G={class:"row justify-center q-my-md"},M={class:"col-12 text-center"},J={class:"col-12 text-grey text-center"},me=x({__name:"DashboardView",setup(X){w({title:`${I} - Dashboard`});const s=W(),{log:p}=O(),{goToCreate:m}=P(),b=_(!1),l=_(Object.values($).reduce((e,t)=>(e[t]=[],e),{})),y=c.getParentTypeOptions(),D=f.liveSettings().subscribe({next:e=>{var t;b.value=!!((t=e.find(a=>a.key===A.SHOW_DESCRIPTIONS))!=null&&t.value)},error:e=>{p.error("Error fetching live Settings",e)}}),v=f.liveDashboard().subscribe({next:e=>{l.value=e},error:e=>{p.error("Error fetching live Dashboard",e)}});B(()=>{D.unsubscribe(),v.unsubscribe()});function C(){return l.value[s.dashboardType]}function S(){return U(l.value[s.dashboardType])}function T(){return`Create ${c.getLabelSingular(s.dashboardType)}`}return(e,t)=>(u(),E(F,{bannerIcon:o(d).DASHBOARD,bannerTitle:"Dashboard"},{default:n(()=>[r(H),r(N,{class:"q-mb-md"},{default:n(()=>[r(Q,null,{default:n(()=>[z,r(R,{color:"primary",options:o(y),"model-value":o(s).dashboardType,"onUpdate:modelValue":t[0]||(t[0]=a=>o(s).dashboardType=a)},null,8,["options","model-value"])]),_:1})]),_:1}),(u(!0),h(V,null,L(C(),(a,k)=>(u(),h("div",{key:k},[r(K,{class:"q-mb-md",showDescription:b.value,dashboardCard:a},{default:n(()=>[r(g,{label:"Attach Record",color:"primary",icon:o(d).ADD_NOTE,onClick:Y=>o(m)(o(c).getChildType(a.type),a.id)},null,8,["icon","onClick"])]),_:2},1032,["showDescription","dashboardCard"])]))),128)),i("div",G,[i("div",M,[r(j,{name:"menu_open",size:"80px",color:"grey"})]),i("p",J,q(S()),1),r(g,{color:"positive",icon:o(d).CREATE,label:`${T()}`,onClick:t[1]||(t[1]=a=>o(m)(o(s).dashboardType))},null,8,["icon","label"])])]),_:1},8,["bannerIcon"]))}});export{me as default};
