import{d as T,a as g,r as u,G as D,a7 as N,D as w,bV as E,c as a,f as p,h as m,w as f,j as h,Q as k,p as b,K as A,x as V,t as x,l as s,I as S,i as C,m as Q}from"./index-85cdcb14.js";import{Q as B}from"./QSelect-67a98a6d.js";import{u as q}from"./action-c39eed1c.js";import{u as K}from"./useRoutables-c00f81b4.js";import"./QItemSection-376d8637.js";import"./QItemLabel-210f03e5.js";import"./QMenu-91b59cc6.js";import"./selection-fec6dfc1.js";const L={class:"text-h6 q-mb-md"},M=b("div",{class:"q-mb-md"}," The parent record that this child record is linked with. Select one from the list. Part of the parent record id is shown to the right of each selection. ",-1),J=T({__name:"ActionInputParentId",props:{locked:{type:Boolean},label:null},setup(d){const{routeDatabaseType:R,routeParentId:c}=K(),{log:_}=g(),t=q(),v=u(null),r=u([]);D(async()=>{var e,n,l;try{const i=N(R);if(!i)throw new Error("Missing parent type");const I=await w.getEnabledParentRecords(i);if(r.value=I.map(o=>({value:o.id,label:`${o.name} (${E(o.id,4,"*")})`})),c){const o=(n=(e=r.value)==null?void 0:e.find(P=>P.value===c))==null?void 0:n.value;o?t.record[a.PARENT_ID]=o:t.record[a.PARENT_ID]=null}else((l=r.value)==null?void 0:l.length)>0?t.record[a.PARENT_ID]=r.value[0].value:t.record[a.PARENT_ID]=null}catch(i){_.error("Error with parent id input",i)}});function y(){return e=>e!=null&&e!==""||"* Required"}return(e,n)=>(p(),m(Q,null,{default:f(()=>[h(k,null,{default:f(()=>[b("div",L,[A(V(d.label)+" ",1),d.locked?(p(),m(x,{key:0,name:s(S).LOCK,color:"warning",class:"q-pb-xs"},null,8,["name"])):C("",!0)]),M,h(B,{modelValue:s(t).record[s(a).PARENT_ID],"onUpdate:modelValue":n[0]||(n[0]=l=>s(t).record[s(a).PARENT_ID]=l),ref_key:"inputRef",ref:v,disable:d.locked,options:r.value,rules:[y()],"emit-value":"","map-options":"","options-dense":"",dense:"",outlined:"",color:"primary"},null,8,["modelValue","disable","options","rules"])]),_:1})]),_:1}))}});export{J as default};
