import{u as s,r as F,i as ye,w as _e,g as ge,o as be,c as L,a as Se,b as Ae,d as pe,e as we,f as $e,h as xe,j as Ce,k as De,l as j,m as Ie,Q as D,n as Ve,p as Oe,s as z,q as se,t as re,D as T,v as J,x as ue,y as P,z as ce,A as y,B as c,C as fe,E as d,F as V,G as X,H as ke,I as _,J as H,K as Fe,L as me,M as Ee,N as Le,O as Q,P as Te,R as qe,S as U,T as Re,U as Ne,V as Me,W as k,X as ae,Y as W,Z as G,_ as K,$ as Pe}from"./index-408197b4.js";import{Q as Y,a as M}from"./QItem-404b2f94.js";import{Q as He}from"./QList-089c069d.js";import{Q as Qe}from"./QMenu-c4003d51.js";import{Q as Ue}from"./QBadge-ed401494.js";import{_ as Be}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-729e840e.js";import{u as je}from"./useRoutables-132fa327.js";import{u as ze}from"./ui-65b145aa.js";import{u as We}from"./useDialogs-fad27234.js";import"./selection-cd46e154.js";import"./action-4701911f.js";import"./QSelect-436eab52.js";import"./QItemLabel-3e7d15e3.js";function Z(e){return ge()?(be(e),!0):!1}function ee(e){return typeof e=="function"?e():s(e)}const te=typeof window<"u";function Ge(e,o=1e3,l={}){const{immediate:r=!0,immediateCallback:f=!1}=l;let h=null;const m=F(!1);function u(){h&&(clearInterval(h),h=null)}function v(){m.value=!1,u()}function b(){const A=ee(o);A<=0||(m.value=!0,f&&e(),u(),h=setInterval(e,A))}if(r&&te&&b(),ye(o)||typeof o=="function"){const A=_e(o,()=>{m.value&&te&&b()});Z(A)}return Z(v),{isActive:m,pause:v,resume:b}}const Ke=te?window:void 0;function Ye(e,o={}){const{immediate:l=!0,window:r=Ke}=o,f=F(!1);let h=0,m=null;function u(A){if(!f.value||!r)return;const w=A-(h||A);e({delta:w,timestamp:A}),h=A,m=r.requestAnimationFrame(u)}function v(){!f.value&&r&&(f.value=!0,m=r.requestAnimationFrame(u))}function b(){f.value=!1,m!=null&&r&&(r.cancelAnimationFrame(m),m=null)}return l&&v(),Z(b),{isActive:Se(f),pause:b,resume:v}}var Je=Object.defineProperty,oe=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,le=(e,o,l)=>o in e?Je(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l,et=(e,o)=>{for(var l in o||(o={}))Xe.call(o,l)&&le(e,l,o[l]);if(oe)for(var l of oe(o))Ze.call(o,l)&&le(e,l,o[l]);return e};function tt(e={}){const{controls:o=!1,interval:l="requestAnimationFrame"}=e,r=F(new Date),f=()=>r.value=new Date,h=l==="requestAnimationFrame"?Ye(f,{immediate:!0}):Ge(f,l,{immediate:!0});return o?et({now:r},h):r}var nt=Object.defineProperty,B=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,ie=(e,o,l)=>o in e?nt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l,at=(e,o)=>{for(var l in o||(o={}))de.call(o,l)&&ie(e,l,o[l]);if(B)for(var l of B(o))ve.call(o,l)&&ie(e,l,o[l]);return e},ot=(e,o)=>{var l={};for(var r in e)de.call(e,r)&&o.indexOf(r)<0&&(l[r]=e[r]);if(e!=null&&B)for(var r of B(e))o.indexOf(r)<0&&ve.call(e,r)&&(l[r]=e[r]);return l};const lt=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],it={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,o)=>e===1?o?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,o)=>e===1?o?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,o)=>e===1?o?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,o)=>e===1?o?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function st(e){return e.toISOString().slice(0,10)}function rt(e,o={}){const{controls:l=!1,updateInterval:r=3e4}=o,f=tt({interval:r,controls:!0}),{now:h}=f,m=ot(f,["now"]),u=L(()=>ut(new Date(ee(e)),o,ee(h)));return l?at({timeAgo:u},m):u}function ut(e,o={},l=Date.now()){var r;const{max:f,messages:h=it,fullDateFormatter:m=st,units:u=lt,showSecond:v=!1,rounding:b="round"}=o,A=typeof b=="number"?g=>+g.toFixed(b):Math[b],w=+l-+e,O=Math.abs(w);function q(g,S){return A(Math.abs(g)/S.value)}function R(g,S){const I=q(g,S),a=g>0,t=E(S.name,I,a);return E(a?"past":"future",t,a)}function E(g,S,I){const a=h[g];return typeof a=="function"?a(S,I):a.replace("{0}",S.toString())}if(O<6e4&&!v)return h.justNow;if(typeof f=="number"&&O>f)return m(new Date(e));if(typeof f=="string"){const g=(r=u.find(S=>S.name===f))==null?void 0:r.max;if(g&&O>g)return m(new Date(e))}for(const[g,S]of u.entries()){if(q(w,S)<=0&&u[g-1])return R(w,u[g-1]);if(O<S.max)return R(w,S)}return h.invalid}const ct=Ae({name:"QRating",props:{...pe,...we,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:o,emit:l}){const{proxy:{$q:r}}=$e(),f=xe(e),h=Ce(e),m=Ve(h),u=F(0);let v={};const b=L(()=>e.readonly!==!0&&e.disable!==!0),A=L(()=>`q-rating row inline items-center q-rating--${b.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),w=L(()=>{const a=Array.isArray(e.icon)===!0?e.icon.length:0,t=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,n=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,x=Array.isArray(e.color)===!0?e.color.length:0,$=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,i=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:a,icon:a>0?e.icon[a-1]:e.icon,selIconLen:t,selIcon:t>0?e.iconSelected[t-1]:e.iconSelected,halfIconLen:n,halfIcon:n>0?e.iconHalf[t-1]:e.iconHalf,colorLen:x,color:x>0?e.color[x-1]:e.color,selColorLen:$,selColor:$>0?e.colorSelected[$-1]:e.colorSelected,halfColorLen:i,halfColor:i>0?e.colorHalf[i-1]:e.colorHalf}}),O=L(()=>{if(typeof e.iconAriaLabel=="string"){const a=e.iconAriaLabel.length!==0?`${e.iconAriaLabel} `:"";return t=>`${a}${t}`}if(Array.isArray(e.iconAriaLabel)===!0){const a=e.iconAriaLabel.length;if(a>0)return t=>e.iconAriaLabel[Math.min(t,a)-1]}return(a,t)=>`${t} ${a}`}),q=L(()=>{const a=[],t=w.value,n=Math.ceil(e.modelValue),x=b.value===!0?0:null,$=e.iconHalf===void 0||n===e.modelValue?-1:n;for(let i=1;i<=e.max;i++){const C=u.value===0&&e.modelValue>=i||u.value>0&&u.value>=i,p=$===i&&u.value<i,N=u.value>0&&(p===!0?n:e.modelValue)>=i&&u.value<i,ne=p===!0?i<=t.halfColorLen?e.colorHalf[i-1]:t.halfColor:t.selColor!==void 0&&C===!0?i<=t.selColorLen?e.colorSelected[i-1]:t.selColor:i<=t.colorLen?e.color[i-1]:t.color,he=(p===!0?i<=t.halfIconLen?e.iconHalf[i-1]:t.halfIcon:t.selIcon!==void 0&&(C===!0||N===!0)?i<=t.selIconLen?e.iconSelected[i-1]:t.selIcon:i<=t.iconLen?e.icon[i-1]:t.icon)||r.iconSet.rating.icon;a.push({name:(p===!0?i<=t.halfIconLen?e.iconHalf[i-1]:t.halfIcon:t.selIcon!==void 0&&(C===!0||N===!0)?i<=t.selIconLen?e.iconSelected[i-1]:t.selIcon:i<=t.iconLen?e.icon[i-1]:t.icon)||r.iconSet.rating.icon,attrs:{tabindex:x,role:"radio","aria-checked":e.modelValue===i?"true":"false","aria-label":O.value(i,he)},iconClass:"q-rating__icon"+(C===!0||p===!0?" q-rating__icon--active":"")+(N===!0?" q-rating__icon--exselected":"")+(u.value===i?" q-rating__icon--hovered":"")+(ne!==void 0?` text-${ne}`:"")})}return a}),R=L(()=>{const a={role:"radiogroup"};return e.disable===!0&&(a["aria-disabled"]="true"),e.readonly===!0&&(a["aria-readonly"]="true"),a});function E(a){if(b.value===!0){const t=Oe(parseInt(a,10),1,parseInt(e.max,10)),n=e.noReset!==!0&&e.modelValue===t?0:t;n!==e.modelValue&&l("update:modelValue",n),u.value=0}}function g(a){b.value===!0&&(u.value=a)}function S(a,t){switch(a.keyCode){case 13:case 32:return E(t),z(a);case 37:case 40:return v[`rt${t-1}`]&&v[`rt${t-1}`].focus(),z(a);case 39:case 38:return v[`rt${t+1}`]&&v[`rt${t+1}`].focus(),z(a)}}function I(){u.value=0}return De(()=>{v={}}),()=>{const a=[];return q.value.forEach(({iconClass:t,name:n,attrs:x},$)=>{const i=$+1;a.push(j("div",{key:i,ref:C=>{v[`rt${i}`]=C},class:"q-rating__icon-container flex flex-center",...x,onClick(){E(i)},onMouseover(){g(i)},onMouseout:I,onFocus(){g(i)},onBlur:I,onKeyup(C){S(C,i)}},Ie(o[`tip-${i}`],[j(D,{class:t,name:n})])))}),e.name!==void 0&&e.disable!==!0&&m(a,"push"),j("div",{class:A.value,style:f.value,...R.value},a)}}}),ft={class:"text-h6"},mt=d("p",null,' Continue reading to learn more, or scroll to the bottom and click the "Start Using App" button to jump right in. ',-1),dt={class:"q-mb-md"},vt=d("p",null," You are currently on the Dashboard page. This page gives you quick access to the primary data you work with in the app. You can favorite items on the Dashboard by clicking the star icon in the top right corner of the item. This prioritizes the item to the top of the list. An example of the favorite icon button is below. ",-1),ht={class:"q-mb-md"},yt=d("p",null," You can navigate through the app using the menu in the top left corner of the page. An example of the menu button is below. The menu gives you access to the primary data tables, Frequently Asked Questions (FAQ), Settings, and more. More advanced operations for the app are available on the Settings page. ",-1),_t={class:"q-mb-md"},gt=d("p",null,"Click the button below when you are ready to get started.",-1),bt=se({__name:"WelcomeOverlay",setup(e){const{log:o}=re(),l=F(0),r=F(!1),f=T.liveSettings().subscribe({next:m=>{var u;r.value=(u=m.find(v=>v.key===J.Values["welcome-overlay"]))==null?void 0:u.value},error:m=>{o.error("Error fetching live Settings",m)}});ue(()=>{f.unsubscribe()});async function h(){await T.setSetting(J.Values["welcome-overlay"],!1)}return(m,u)=>(P(),ce(Ee,{modelValue:r.value,"onUpdate:modelValue":u[2]||(u[2]=v=>r.value=v),persistent:""},{default:y(()=>[c(me,null,{default:y(()=>[c(fe,null,{default:y(()=>[d("p",ft,"Welcome to "+V(s(X)),1),d("p",null,V(s(ke)),1),mt,d("div",dt,[vt,c(ct,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=v=>l.value=v),max:1,icon:s(_).FAVORITE_OFF,"icon-selected":s(_).FAVORITE_ON,color:"warning",size:"md"},null,8,["modelValue","icon","icon-selected"])]),d("div",ht,[yt,c(H,{disable:"",color:"primary",class:"q-px-sm",icon:s(_).MENU_STANDARD},null,8,["icon"])]),d("div",_t,[d("p",null," Hope you find "+V(s(X))+" useful. Please consider donating to help me continue to create and maintain apps like this. Thank you! ",1),c(H,{color:"warning",label:"Donate",to:{name:s(Fe).Values.Donate},icon:s(_).DONATE},null,8,["to","icon"])]),d("div",null,[gt,c(H,{"no-caps":"",label:"Start Using App",class:"full-width",size:"lg",color:"positive",icon:s(_).RECOMMEND,onClick:u[1]||(u[1]=v=>h())},null,8,["icon"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),St={class:"q-mb-lg"},At=d("p",{class:"text-h6 q-mb-sm text-center"},"What would you like to work on?",-1),pt={class:"row justify-center"},wt={class:"row items-center"},$t={class:"text-h6"},xt={key:0},Ct={class:"absolute-top-right q-ma-xs"},Dt={class:"q-mb-md"},It={class:"text-caption q-ml-xs"},Vt={key:0},Ot={class:"text-caption q-ml-xs"},kt={class:"row justify-center q-my-md"},Ft={class:"col-12 text-center"},Et={class:"col-12 text-grey text-center"},Wt=se({__name:"DashboardView",setup(e){Le({title:`${X} - Dashboard`});const o=ze(),{log:l}=re(),{goToCreate:r,goToEdit:f}=je(),{confirmDialog:h,dismissDialog:m,inspectDialog:u,chartsDialog:v}=We(),b=F(!1),A=Q.getDashboardOptions(),w=F(Te.options.reduce((a,t)=>(a[t]=[],a),{})),O=T.liveSettings().subscribe({next:a=>{var t;b.value=(t=a.find(n=>n.key===J.Values["dashboard-descriptions"]))==null?void 0:t.value},error:a=>{l.error("Error fetching live Settings",a)}}),q=T.liveDashboard().subscribe({next:a=>{w.value=a},error:a=>{l.error("Error fetching live Dashboard",a)}});ue(()=>{O.unsubscribe(),q.unsubscribe()});async function R(a){m("Last Note",a,_.NOTE)}async function E(a,t){h("Favorite",`Do you want to favorite ${t}?`,_.FAVORITE_ON,"info",async()=>{try{await T.CoreRecords.update(a,{favorited:!0}),l.info(`${t} favorited`,{id:a,name:t})}catch(n){l.error("Favorite update failed",n)}})}async function g(a,t){h("Unfavorite",`Do you want to unfavorite ${t}?`,_.FAVORITE_OFF,"info",async()=>{try{await T.CoreRecords.update(a,{favorited:!1}),l.info(`${t} unfavorited`,{id:a,name:t})}catch(n){l.error("Unfavorite update failed",n)}})}async function S(a,t){const n=Q.getLabel(k.Values.core,a,"singular"),x=await T.getRecord(k.Values.core,t),$=Q.getFields(k.Values.core,a);u(n,x,$)}async function I(a,t){const n=Q.getLabel(k.Values.core,o.dashboardSelection,"singular");v(n,a,t)}return(a,t)=>(P(),ce(Be,{bannerIcon:s(_).DASHBOARD,bannerTitle:"Dashboard"},{default:y(()=>[c(bt),d("section",St,[At,d("div",pt,[c(qe,{color:"primary",options:s(A),"model-value":s(o).dashboardSelection,"onUpdate:modelValue":t[0]||(t[0]=n=>s(o).dashboardSelection=n)},{label:y(n=>[d("div",wt,[c(D,{name:n.icon,size:"xs",class:"q-mr-sm"},null,8,["name"]),d("span",null,V(n.label),1)])]),_:1},8,["options","model-value"])])]),(P(!0),U(Ne,null,Re(w.value[s(o).dashboardSelection],(n,x)=>(P(),U("div",{key:x},[c(me,{class:"q-mb-md"},{default:y(()=>[c(fe,null,{default:y(()=>{var $,i,C;return[d("p",$t,V(n.name),1),b.value?(P(),U("p",xt,V(n.desc),1)):ae("",!0),d("div",Ct,[W(c(D,{name:s(_).NOTE,color:"primary",size:"md",class:"cursor-pointer q-mr-xs",onClick:p=>{var N;return R(((N=n==null?void 0:n.lastSub)==null?void 0:N.note)||"")}},null,8,["name","onClick"]),[[G,($=n==null?void 0:n.lastSub)==null?void 0:$.note]]),W(c(D,{name:s(_).FAVORITE_ON,color:"warning",size:"md",class:"cursor-pointer",onClick:p=>g(n.id,n.name)},null,8,["name","onClick"]),[[G,n.favorited]]),W(c(D,{name:s(_).FAVORITE_OFF,color:"grey",size:"md",class:"cursor-pointer",onClick:p=>E(n.id,n.name)},null,8,["name","onClick"]),[[G,!n.favorited]]),c(H,{round:"",flat:"",icon:s(_).MENU_VERTICAL},{default:y(()=>[c(Qe,{"auto-close":"",anchor:"top right","transition-show":"flip-right","transition-hide":"flip-left"},{default:y(()=>[c(He,null,{default:y(()=>[c(Y,{clickable:"",onClick:p=>I(n.type,n.id)},{default:y(()=>[c(M,{avatar:""},{default:y(()=>[c(D,{color:"accent",name:s(_).CHARTS},null,8,["name"])]),_:1}),c(M,null,{default:y(()=>[K("Charts")]),_:1})]),_:2},1032,["onClick"]),c(Y,{clickable:"",onClick:p=>S(n.type,n.id)},{default:y(()=>[c(M,{avatar:""},{default:y(()=>[c(D,{color:"primary",name:s(_).INSPECT},null,8,["name"])]),_:1}),c(M,null,{default:y(()=>[K("Inspect")]),_:1})]),_:2},1032,["onClick"]),c(Y,{clickable:"",onClick:p=>s(f)(s(k).Values.core,n==null?void 0:n.type,n==null?void 0:n.id)},{default:y(()=>[c(M,{avatar:""},{default:y(()=>[c(D,{color:"warning",name:s(_).EDIT},null,8,["name"])]),_:1}),c(M,null,{default:y(()=>[K("Edit")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["icon"])]),d("div",Dt,[c(Ue,{rounded:"",color:"secondary",class:"q-py-none"},{default:y(()=>{var p;return[c(D,{name:s(_).PREVIOUS},null,8,["name"]),d("span",It,V(s(rt)(((p=n==null?void 0:n.lastSub)==null?void 0:p.timestamp)||"").value||"No previous records"),1)]}),_:2},1024),(i=n==null?void 0:n.lastSub)!=null&&i.timestamp?(P(),U("div",Vt,[c(D,{name:s(_).CALENDAR_CHECK},null,8,["name"]),d("span",Ot,V(s(Pe)((C=n==null?void 0:n.lastSub)==null?void 0:C.timestamp)),1)])):ae("",!0)]),c(H,{label:"Attach Record",color:"primary",icon:s(_).ADD_NOTE,onClick:p=>s(r)(s(k).Values.sub,n==null?void 0:n.type,n==null?void 0:n.id)},null,8,["icon","onClick"])]}),_:2},1024)]),_:2},1024)]))),128)),d("div",kt,[d("div",Ft,[c(D,{name:"menu_open",size:"80px",color:"grey"})]),d("p",Et,V(s(Me)(w.value[s(o).dashboardSelection])),1),c(H,{color:"positive",icon:s(_).CREATE,label:`Create ${s(Q).getLabel(s(k).Values.core,s(o).dashboardSelection,"singular")}`,onClick:t[1]||(t[1]=n=>s(r)(s(k).Values.core,s(o).dashboardSelection))},null,8,["icon","label"])])]),_:1},8,["bannerIcon"]))}});export{Wt as default};
