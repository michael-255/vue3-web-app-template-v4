import{c as _e,u as Ae,a as Se,g as we,b as Te,d as $e,r as R,e as M,o as De,h as W,f as Ce,Q as F,i as Ee,j as Le,s as Y,k as j,l as te,D as $,S as G,m as ue,n as T,p as H,w as p,q as u,t as de,v as _,x as O,y as a,A as J,z as Ie,I as h,B as E,R as xe,C as fe,E as Fe,F as Oe,G as x,H as Z,J as ee,K,L as me,M as ve,N as ke,O as B,P as Ve,T as ae,U as Re,V,W as qe,X as Ne,Y as Me}from"./index-368ec556.js";import{_ as Pe}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-5ed3183f.js";import{u as he}from"./ui-e777bf25.js";import{Q as ne}from"./QBadge-11011a55.js";import{t as re,u as He,a as Qe,i as Be}from"./index-3d93eeec.js";import{Q as X,a as P}from"./QItem-e0734a3f.js";import{Q as Ue}from"./QList-bcb021fa.js";import{Q as je}from"./QMenu-9d46b190.js";import{u as ze}from"./useDialogs-2f18ff00.js";import{u as ge}from"./useRouting-6b2e99f4.js";import{u as We}from"./useDefaults-78cd687c.js";import"./selection-aeada966.js";import"./action-7395795f.js";import"./QSelect-123bc01e.js";import"./QItemLabel-5a342a16.js";import"./ErrorStates.vue_vue_type_script_setup_true_lang-e055e55a.js";const Ye=_e({name:"QRating",props:{...Ae,...Se,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:{$q:l}}=we(),g=Te(e),d=$e(e),f=Ee(d),o=R(0);let v={};const S=M(()=>e.readonly!==!0&&e.disable!==!0),w=M(()=>`q-rating row inline items-center q-rating--${S.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),A=M(()=>{const i=Array.isArray(e.icon)===!0?e.icon.length:0,r=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,C=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,q=Array.isArray(e.color)===!0?e.color.length:0,N=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,s=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:i,icon:i>0?e.icon[i-1]:e.icon,selIconLen:r,selIcon:r>0?e.iconSelected[r-1]:e.iconSelected,halfIconLen:C,halfIcon:C>0?e.iconHalf[r-1]:e.iconHalf,colorLen:q,color:q>0?e.color[q-1]:e.color,selColorLen:N,selColor:N>0?e.colorSelected[N-1]:e.colorSelected,halfColorLen:s,halfColor:s>0?e.colorHalf[s-1]:e.colorHalf}}),L=M(()=>{if(typeof e.iconAriaLabel=="string"){const i=e.iconAriaLabel.length!==0?`${e.iconAriaLabel} `:"";return r=>`${i}${r}`}if(Array.isArray(e.iconAriaLabel)===!0){const i=e.iconAriaLabel.length;if(i>0)return r=>e.iconAriaLabel[Math.min(r,i)-1]}return(i,r)=>`${r} ${i}`}),I=M(()=>{const i=[],r=A.value,C=Math.ceil(e.modelValue),q=S.value===!0?0:null,N=e.iconHalf===void 0||C===e.modelValue?-1:C;for(let s=1;s<=e.max;s++){const k=o.value===0&&e.modelValue>=s||o.value>0&&o.value>=s,Q=N===s&&o.value<s,z=o.value>0&&(Q===!0?C:e.modelValue)>=s&&o.value<s,oe=Q===!0?s<=r.halfColorLen?e.colorHalf[s-1]:r.halfColor:r.selColor!==void 0&&k===!0?s<=r.selColorLen?e.colorSelected[s-1]:r.selColor:s<=r.colorLen?e.color[s-1]:r.color,pe=(Q===!0?s<=r.halfIconLen?e.iconHalf[s-1]:r.halfIcon:r.selIcon!==void 0&&(k===!0||z===!0)?s<=r.selIconLen?e.iconSelected[s-1]:r.selIcon:s<=r.iconLen?e.icon[s-1]:r.icon)||l.iconSet.rating.icon;i.push({name:(Q===!0?s<=r.halfIconLen?e.iconHalf[s-1]:r.halfIcon:r.selIcon!==void 0&&(k===!0||z===!0)?s<=r.selIconLen?e.iconSelected[s-1]:r.selIcon:s<=r.iconLen?e.icon[s-1]:r.icon)||l.iconSet.rating.icon,attrs:{tabindex:q,role:"radio","aria-checked":e.modelValue===s?"true":"false","aria-label":L.value(s,pe)},iconClass:"q-rating__icon"+(k===!0||Q===!0?" q-rating__icon--active":"")+(z===!0?" q-rating__icon--exselected":"")+(o.value===s?" q-rating__icon--hovered":"")+(oe!==void 0?` text-${oe}`:"")})}return i}),c=M(()=>{const i={role:"radiogroup"};return e.disable===!0&&(i["aria-disabled"]="true"),e.readonly===!0&&(i["aria-readonly"]="true"),i});function m(i){if(S.value===!0){const r=Le(parseInt(i,10),1,parseInt(e.max,10)),C=e.noReset!==!0&&e.modelValue===r?0:r;C!==e.modelValue&&n("update:modelValue",C),o.value=0}}function b(i){S.value===!0&&(o.value=i)}function y(i,r){switch(i.keyCode){case 13:case 32:return m(r),Y(i);case 37:case 40:return v[`rt${r-1}`]&&v[`rt${r-1}`].focus(),Y(i);case 39:case 38:return v[`rt${r+1}`]&&v[`rt${r+1}`].focus(),Y(i)}}function D(){o.value=0}return De(()=>{v={}}),()=>{const i=[];return I.value.forEach(({iconClass:r,name:C,attrs:q},N)=>{const s=N+1;i.push(W("div",{key:s,ref:k=>{v[`rt${s}`]=k},class:"q-rating__icon-container flex flex-center",...q,onClick(){m(s)},onMouseover(){b(s)},onMouseout:D,onFocus(){b(s)},onBlur:D,onKeyup(k){y(k,s)}},Ce(t[`tip-${s}`],[W(F,{class:r,name:C})])))}),e.name!==void 0&&e.disable!==!0&&f(i,"push"),W("div",{class:w.value,style:g.value,...c.value},i)}}}),Ke={class:"text-h6"},Xe=_("p",null,' Continue reading to learn more, or scroll to the bottom and click the "Start Using App" button to jump right in. ',-1),Ge={class:"q-mb-md"},Je=_("p",null," You are currently on the Dashboard page. This page gives you quick access to the primary data you work with in the app. You can favorite items on the Dashboard by clicking the star icon in the top right corner of the item. This prioritizes the item to the top of the list. An example of the favorite icon button is below. ",-1),Ze={class:"q-mb-md"},et=_("p",null," You can navigate through the app using the menu in the top left corner of the page. An example of the menu button is below. The menu gives you access to the primary data tables, Frequently Asked Questions (FAQ), Settings, and more. More advanced operations for the app are available on the Settings page. ",-1),tt={class:"q-mb-md"},ot=_("p",null,"Click the button below when you are ready to get started.",-1),at=j({__name:"WelcomeOverlay",setup(e){const{log:t}=te(),n=R(0),l=R(!1),g=$.liveSettings().subscribe({next:f=>{var o;l.value=(o=f.find(v=>v.key===G.WELCOME_OVERLAY))==null?void 0:o.value},error:f=>{t.error("Error fetching live Settings",f)}});ue(()=>{g.unsubscribe()});async function d(){await $.setSetting(G.WELCOME_OVERLAY,!1)}return(f,o)=>(T(),H(Fe,{modelValue:l.value,"onUpdate:modelValue":o[2]||(o[2]=v=>l.value=v),persistent:""},{default:p(()=>[u(fe,{flat:"",square:""},{default:p(()=>[u(de,null,{default:p(()=>[_("p",Ke,"Welcome to "+O(a(J)),1),_("p",null,O(a(Ie)),1),Xe,_("div",Ge,[Je,u(Ye,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=v=>n.value=v),max:1,icon:a(h).FAVORITE_OFF,"icon-selected":a(h).FAVORITE_ON,color:"warning",size:"md"},null,8,["modelValue","icon","icon-selected"])]),_("div",Ze,[et,u(E,{disable:"",color:"primary",class:"q-px-sm",icon:a(h).MENU},null,8,["icon"])]),_("div",tt,[_("p",null," Hope you find "+O(a(J))+" useful. Please consider donating to help me continue to create and maintain apps like this. Thank you! ",1),u(E,{color:"warning",label:"Donate",to:{name:a(xe).DONATE},icon:a(h).DONATE},null,8,["to","icon"])]),_("div",null,[ot,u(E,{"no-caps":"",label:"Start Using App",class:"full-width",size:"lg",color:"positive",icon:a(h).READY,onClick:o[1]||(o[1]=v=>d())},null,8,["icon"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),nt=Be?window:void 0;function rt(e,t={}){const{immediate:n=!0,window:l=nt}=t,g=R(!1);let d=0,f=null;function o(w){if(!g.value||!l)return;const A=w-(d||w);e({delta:A,timestamp:w}),d=w,f=l.requestAnimationFrame(o)}function v(){!g.value&&l&&(g.value=!0,f=l.requestAnimationFrame(o))}function S(){g.value=!1,f!=null&&l&&(l.cancelAnimationFrame(f),f=null)}return n&&v(),Qe(S),{isActive:Oe(g),pause:S,resume:v}}var lt=Object.defineProperty,le=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,ie=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ct=(e,t)=>{for(var n in t||(t={}))it.call(t,n)&&ie(e,n,t[n]);if(le)for(var n of le(t))st.call(t,n)&&ie(e,n,t[n]);return e};function ut(e={}){const{controls:t=!1,interval:n="requestAnimationFrame"}=e,l=R(new Date),g=()=>l.value=new Date,d=n==="requestAnimationFrame"?rt(g,{immediate:!0}):He(g,n,{immediate:!0});return t?ct({now:l},d):l}var dt=Object.defineProperty,U=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,se=(e,t,n)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ft=(e,t)=>{for(var n in t||(t={}))be.call(t,n)&&se(e,n,t[n]);if(U)for(var n of U(t))ye.call(t,n)&&se(e,n,t[n]);return e},mt=(e,t)=>{var n={};for(var l in e)be.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(e!=null&&U)for(var l of U(e))t.indexOf(l)<0&&ye.call(e,l)&&(n[l]=e[l]);return n};const vt=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],ht={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function gt(e){return e.toISOString().slice(0,10)}function bt(e,t={}){const{controls:n=!1,updateInterval:l=3e4}=t,g=ut({interval:l,controls:!0}),{now:d}=g,f=mt(g,["now"]),o=M(()=>yt(new Date(re(e)),t,re(d)));return n?ft({timeAgo:o},f):o}function yt(e,t={},n=Date.now()){var l;const{max:g,messages:d=ht,fullDateFormatter:f=gt,units:o=vt,showSecond:v=!1,rounding:S="round"}=t,w=typeof S=="number"?b=>+b.toFixed(S):Math[S],A=+n-+e,L=Math.abs(A);function I(b,y){return w(Math.abs(b)/y.value)}function c(b,y){const D=I(b,y),i=b>0,r=m(y.name,D,i);return m(i?"past":"future",r,i)}function m(b,y,D){const i=d[b];return typeof i=="function"?i(y,D):i.replace("{0}",y.toString())}if(L<6e4&&!v)return d.justNow;if(typeof g=="number"&&L>g)return f(new Date(e));if(typeof g=="string"){const b=(l=o.find(y=>y.name===g))==null?void 0:l.max;if(b&&L>b)return f(new Date(e))}for(const[b,y]of o.entries()){if(I(A,y)<=0&&o[b-1])return c(A,o[b-1]);if(L<y.max)return c(A,y)}return d.invalid}const pt={class:"absolute-top-right q-ma-xs"},_t={key:1},At=j({__name:"DashboardRecordCardMenu",props:{parentTable:{},record:{}},setup(e){const t=e,n=he(),{log:l}=te(),{goToEdit:g}=ge(),{confirmDialog:d,dismissDialog:f,inspectDialog:o,chartsDialog:v}=ze();async function S(c){f("Previous Note",c,h.NOTE)}async function w(c,m,b){const y=b?"Unfavorite":"Favorite",D=`Do you want to ${y.toLocaleLowerCase()} ${m}?`,i=b?h.FAVORITE_OFF:h.FAVORITE_ON;d(y,D,i,"info",async()=>{try{await $.toggleFavorite(t.parentTable,c),l.info(`${m} unfavorited`,{id:c,name:m})}catch(r){l.error("Unfavorite update failed",r)}})}async function A(c){const m=await $.getRecord(t.parentTable,c);m?o(m,t.parentTable):l.error("Failed to find record",{id:c})}async function L(c,m){v(m,c)}function I(c,m){d("Deactivate Record","Would you like to deactivate this record?",h.CANCEL,"warning",async()=>{try{await $.toggleActive(c,m),l.info("Deactivated record",{table:c,id:m})}catch(b){l.error("Deactivation failed",b)}})}return(c,m)=>{var b;return T(),x("div",pt,[Z(u(F,{name:a(h).NOTE,color:"primary",size:"md",class:"cursor-pointer q-mr-xs",onClick:m[0]||(m[0]=y=>{var D,i;return S(((i=(D=c.record)==null?void 0:D.previous)==null?void 0:i.note)||"")})},null,8,["name"]),[[ee,(b=c.record.previous)==null?void 0:b.note]]),c.record.activated?(T(),H(E,{key:0,round:"",flat:"",color:"warning",icon:a(h).CANCEL,onClick:m[1]||(m[1]=y=>I(c.parentTable,c.record.id))},null,8,["icon"])):(T(),x("span",_t,[u(F,{name:c.record.favorited?a(h).FAVORITE_ON:a(h).FAVORITE_OFF,color:c.record.favorited?"warning":"grey",size:"md",class:"cursor-pointer",onClick:m[2]||(m[2]=y=>w(c.record.id,c.record.name,c.record.favorited))},null,8,["name","color"])])),u(E,{round:"",flat:"",icon:a(h).MENU_VERTICAL},{default:p(()=>[u(je,{"auto-close":"",anchor:"top right","transition-show":"flip-right","transition-hide":"flip-left"},{default:p(()=>[u(Ue,null,{default:p(()=>[u(X,{clickable:"",onClick:m[3]||(m[3]=y=>L(c.parentTable,c.record.id))},{default:p(()=>[u(P,{avatar:""},{default:p(()=>[u(F,{color:"accent",name:a(h).CHARTS},null,8,["name"])]),_:1}),u(P,null,{default:p(()=>[K("Charts")]),_:1})]),_:1}),u(X,{clickable:"",onClick:m[4]||(m[4]=y=>A(c.record.id))},{default:p(()=>[u(P,{avatar:""},{default:p(()=>[u(F,{color:"primary",name:a(h).INSPECT},null,8,["name"])]),_:1}),u(P,null,{default:p(()=>[K("Inspect")]),_:1})]),_:1}),u(X,{disable:c.record.activated,clickable:"",onClick:m[5]||(m[5]=y=>a(g)(a(n).dashboardSelection,c.record.id))},{default:p(()=>[u(P,{avatar:""},{default:p(()=>[u(F,{color:"warning",name:a(h).EDIT},null,8,["name"])]),_:1}),u(P,null,{default:p(()=>[K("Edit")]),_:1})]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["icon"])])}}}),St={class:"row justify-center q-gutter-md"},wt=_("span",{class:"text-caption q-ml-xs"},"Active",-1),Tt={class:"text-h6"},$t={key:1},Dt={class:"text-caption q-ml-xs"},Ct={key:2},Et={class:"text-caption q-ml-xs"},Lt={class:"col-12 text-grey text-center text-body1"},It={key:0,class:"col-12 text-center"},xt={class:"col-12 text-center"},ce=j({__name:"DashboardRecordCardList",props:{parentTable:{},records:{},showDescriptions:{type:Boolean},defaultsFunc:{type:Function}},setup(e){const t=e,{goToCreate:n,goToActive:l}=ge();async function g(d,f){await $.toggleActive(d,f),l()}return(d,f)=>(T(),x("div",St,[(T(!0),x(me,null,ve(d.records,o=>(T(),x("div",{key:o.id,class:"col-xs-12 col-sm-12 col-md-12 col-lg-5"},[u(fe,{class:"column full-height"},{default:p(()=>[u(de,{class:"col"},{default:p(()=>{var v,S;return[u(At,{parentTable:d.parentTable,record:o},null,8,["parentTable","record"]),o.activated?(T(),H(ne,{key:0,rounded:"",color:"warning",class:"absolute-top-left q-py-none",style:{left:"-4px",top:"-6px"}},{default:p(()=>[u(F,{name:a(h).LOCK},null,8,["name"]),wt]),_:1})):B("",!0),_("p",Tt,O(o.name),1),d.showDescriptions?(T(),x("p",$t,O(o.desc),1)):B("",!0),u(ne,{rounded:"",color:"secondary",class:"q-py-none"},{default:p(()=>{var w;return[u(F,{name:a(h).PREVIOUS},null,8,["name"]),_("span",Dt,O(a(bt)(((w=o.previous)==null?void 0:w.createdTimestamp)||"").value||"No previous records"),1)]}),_:2},1024),(v=o.previous)!=null&&v.createdTimestamp?(T(),x("div",Ct,[u(F,{name:a(h).CALENDAR_CHECK},null,8,["name"]),_("span",Et,O(a(Ve)((S=o.previous)==null?void 0:S.createdTimestamp)),1)])):B("",!0)]}),_:2},1024),o.activated?(T(),H(ae,{key:0,class:"col-auto"},{default:p(()=>[u(E,{label:"Go To Active",color:"positive",class:"full-width",icon:a(h).UP,onClick:f[0]||(f[0]=v=>a(l)())},null,8,["icon"])]),_:1})):(T(),H(ae,{key:1,class:"col-auto"},{default:p(()=>[u(E,{label:`Attach ${a($).getLabel(a($).getChildTable(d.parentTable),"singular")}`,color:"primary",class:"full-width q-mb-sm",icon:a(h).ATTACH,onClick:v=>a(n)(a($).getChildTable(d.parentTable),o.id)},null,8,["label","icon","onClick"]),u(E,{label:"Activate",color:"primary",class:"full-width",icon:a(h).READY,onClick:v=>g(d.parentTable,o.id)},null,8,["icon","onClick"])]),_:2},1024))]),_:2},1024)]))),128)),_("div",Lt,O(a(ke)(d.records)),1),d.records.length===0&&d.defaultsFunc?(T(),x("div",It,[u(E,{class:"col-12 text-center",color:"primary",icon:a(h).DEFAULTS,label:`Add ${a($).getLabel(t.parentTable,"singular")} Defaults`,onClick:f[1]||(f[1]=o=>d.defaultsFunc())},null,8,["icon","label"])])):B("",!0),_("div",xt,[u(E,{class:"col-12 text-center",color:"positive",icon:a(h).CREATE,label:`Create ${a($).getLabel(d.parentTable,"singular")}`,onClick:f[2]||(f[2]=o=>a(n)(d.parentTable))},null,8,["icon","label"])])]))}}),Ft={class:"q-mb-md"},Ot={class:"text-center text-body1"},kt={class:"row justify-center"},Gt=j({__name:"DashboardView",setup(e){Re({title:`${J} - Dashboard`});const t=he(),{log:n}=te(),{onDefaultExamples:l,onDefaultTests:g}=We(),d=[{value:V.EXAMPLES,label:qe.getLabel("plural"),icon:h.EXAMPLES},{value:V.TESTS,label:Ne.getLabel("plural"),icon:h.TESTS}],f=R(!1),o=R([]),v=R([]),S=$.liveDashboardData(V.EXAMPLES).subscribe({next:A=>o.value=A,error:A=>n.error("Error fetching live Examples",A)}),w=$.liveDashboardData(V.TESTS).subscribe({next:A=>v.value=A,error:A=>n.error("Error fetching live Tests",A)});return Me(async()=>{f.value=!!await $.getSettingValue(G.DASHBOARD_DESCRIPTIONS)}),ue(()=>{S.unsubscribe(),w.unsubscribe()}),(A,L)=>(T(),H(Pe,{bannerIcon:a(h).DASHBOARD,bannerTitle:"Dashboard"},{default:p(()=>{var I;return[u(at),_("section",Ft,[_("p",Ot,O((I=d.find(c=>c.value===a(t).dashboardSelection))==null?void 0:I.label),1),_("div",kt,[(T(),x(me,null,ve(d,(c,m)=>u(E,{key:m,round:"",size:"lg",class:"q-mb-xs q-mx-xs",icon:c.icon,color:a(t).dashboardSelection===c.value?"info":"grey",onClick:b=>a(t).dashboardSelection=c.value},null,8,["icon","color","onClick"])),64))])]),_("section",null,[Z(u(ce,{parentTable:a(V).EXAMPLES,records:o.value,showDescriptions:f.value,defaultsFunc:a(l)},null,8,["parentTable","records","showDescriptions","defaultsFunc"]),[[ee,a(t).dashboardSelection===a(V).EXAMPLES]]),Z(u(ce,{parentTable:a(V).TESTS,records:v.value,showDescriptions:f.value,defaultsFunc:a(g)},null,8,["parentTable","records","showDescriptions","defaultsFunc"]),[[ee,a(t).dashboardSelection===a(V).TESTS]])])]}),_:1},8,["bannerIcon"]))}});export{Gt as default};
