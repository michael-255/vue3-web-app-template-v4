import{P as ie,r as I,c as n,ar as et,am as pe,as as tt,R as D,O as Fe,at,au as Ee,av as lt,aw as nt,ax as ot,ay as st,ae as rt,az as it,aA as xe,aB as ut,aC as ct,X as dt,a8 as mt,aa as be,a2 as vt,W as ft,aD as ee,aE as bt,aF as pt,aG as gt,aH as ht,w as yt,d as St,b as kt,A as oe,e as Ct,aI as wt,D as xt,f as C,S as Q,aJ as se,h as _t,j as _e,k as De,l as z,m as p,z as ae,n as d,x as J,aK as le,u as T,y as ne,aL as Dt,Q as Tt,I as X,aM as Lt,B as $t}from"./index-5d245f77.js";import{b as Ft,Q as Te}from"./QSelect-65e68149.js";import{T as Et}from"./TouchPan-36b0868a.js";import{u as Ot}from"./useDialogs-7677fd0b.js";import{u as Mt}from"./useDefaults-86dabf4c.js";import{u as Nt}from"./useRoutables-128af855.js";import{_ as Rt}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-723488f3.js";import"./QItem-6c91178d.js";import"./QItemLabel-35dc4d65.js";import"./QMenu-36ba3952.js";import"./selection-280b5155.js";import"./SimpleDialog.vue_vue_type_script_setup_true_lang-9013e5dc.js";function Z(a,r,N,u){const e=[];return a.forEach(h=>{u(h)===!0?e.push(h):r.push({failedPropValidation:N,file:h})}),e}function re(a){a&&a.dataTransfer&&(a.dataTransfer.dropEffect="copy"),pe(a)}const It={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},qt=["rejected"];function At({editable:a,dnd:r,getFileInput:N,addFilesToQueue:u}){const{props:e,emit:h,proxy:$}=ie(),y=I(null),j=n(()=>e.accept!==void 0?e.accept.split(",").map(s=>(s=s.trim(),s==="*"?"*/":(s.endsWith("/*")&&(s=s.slice(0,s.length-1)),s.toUpperCase()))):null),x=n(()=>parseInt(e.maxFiles,10)),F=n(()=>parseInt(e.maxTotalSize,10));function q(s){if(a.value)if(s!==Object(s)&&(s={target:null}),s.target!==null&&s.target.matches('input[type="file"]')===!0)s.clientX===0&&s.clientY===0&&et(s);else{const v=N();v&&v!==s.target&&v.click(s)}}function S(s){a.value&&s&&u(null,s)}function U(s,v,R,B){let f=Array.from(v||s.target.files);const O=[],W=()=>{O.length!==0&&h("rejected",O)};if(e.accept!==void 0&&j.value.indexOf("*/")===-1&&(f=Z(f,O,"accept",b=>j.value.some(_=>b.type.toUpperCase().startsWith(_)||b.name.toUpperCase().endsWith(_))),f.length===0))return W();if(e.maxFileSize!==void 0){const b=parseInt(e.maxFileSize,10);if(f=Z(f,O,"max-file-size",_=>_.size<=b),f.length===0)return W()}if(e.multiple!==!0&&f.length!==0&&(f=[f[0]]),f.forEach(b=>{b.__key=b.webkitRelativePath+b.lastModified+b.name+b.size}),B===!0){const b=R.map(_=>_.__key);f=Z(f,O,"duplicate",_=>b.includes(_.__key)===!1)}if(f.length===0)return W();if(e.maxTotalSize!==void 0){let b=B===!0?R.reduce((_,G)=>_+G.size,0):0;if(f=Z(f,O,"max-total-size",_=>(b+=_.size,b<=F.value)),f.length===0)return W()}if(typeof e.filter=="function"){const b=e.filter(f);f=Z(f,O,"filter",_=>b.includes(_))}if(e.maxFiles!==void 0){let b=B===!0?R.length:0;if(f=Z(f,O,"max-files",()=>(b++,b<=x.value)),f.length===0)return W()}if(W(),f.length!==0)return f}function L(s){re(s),r.value!==!0&&(r.value=!0)}function g(s){pe(s),(s.relatedTarget!==null||tt.is.safari!==!0?s.relatedTarget!==y.value:document.elementsFromPoint(s.clientX,s.clientY).includes(y.value)===!1)===!0&&(r.value=!1)}function E(s){re(s);const v=s.dataTransfer.files;v.length!==0&&u(null,v),r.value=!1}function P(s){if(r.value===!0)return D("div",{ref:y,class:`q-${s}__dnd absolute-full`,onDragenter:re,onDragover:re,onDragleave:g,onDrop:E})}return Object.assign($,{pickFiles:q,addFiles:S}),{pickFiles:q,addFiles:S,onDragover:L,onDragleave:g,processFiles:U,getDndNode:P,maxFilesNumber:x,maxTotalSizeNumber:F}}const Bt=Fe({name:"QFile",inheritAttrs:!1,props:{...at,...Ee,...It,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...lt,...qt],setup(a,{slots:r,emit:N,attrs:u}){const{proxy:e}=ie(),h=nt(),$=I(null),y=I(!1),j=ot(a),{pickFiles:x,onDragover:F,onDragleave:q,processFiles:S,getDndNode:U}=At({editable:h.editable,dnd:y,getFileInput:K,addFilesToQueue:i}),L=st(a),g=n(()=>Object(a.modelValue)===a.modelValue?"length"in a.modelValue?Array.from(a.modelValue):[a.modelValue]:[]),E=n(()=>xe(g.value)),P=n(()=>g.value.map(c=>c.name).join(", ")),s=n(()=>ut(g.value.reduce((c,M)=>c+M.size,0))),v=n(()=>({totalSize:s.value,filesNumber:g.value.length,maxFiles:a.maxFiles})),R=n(()=>({tabindex:-1,type:"file",title:"",accept:a.accept,capture:a.capture,name:j.value,...u,id:h.targetUid.value,disabled:h.editable.value!==!0})),B=n(()=>"q-file q-field--auto-height"+(y.value===!0?" q-file--dnd":"")),f=n(()=>a.multiple===!0&&a.append===!0);function O(c){const M=g.value.slice();M.splice(c,1),b(M)}function W(c){const M=g.value.indexOf(c);M>-1&&O(M)}function b(c){N("update:modelValue",a.multiple===!0?c:c[0])}function _(c){c.keyCode===13&&ct(c)}function G(c){(c.keyCode===13||c.keyCode===32)&&x(c)}function K(){return $.value}function i(c,M){const H=S(c,M,g.value,f.value),te=K();te!=null&&(te.value=""),H!==void 0&&((a.multiple===!0?a.modelValue&&H.every(ue=>g.value.includes(ue)):a.modelValue===H[0])||b(f.value===!0?g.value.concat(H):H))}function l(){return[D("input",{class:[a.inputClass,"q-file__filler"],style:a.inputStyle})]}function o(){if(r.file!==void 0)return g.value.length===0?l():g.value.map((M,H)=>r.file({index:H,file:M,ref:this}));if(r.selected!==void 0)return g.value.length===0?l():r.selected({files:g.value,ref:this});if(a.useChips===!0)return g.value.length===0?l():g.value.map((M,H)=>D(Ft,{key:"file-"+H,removable:h.editable.value,dense:!0,textColor:a.color,tabindex:a.tabindex,onRemove:()=>{O(H)}},()=>D("span",{class:"ellipsis",textContent:M.name})));const c=a.displayValue!==void 0?a.displayValue:P.value;return c.length!==0?[D("div",{class:a.inputClass,style:a.inputStyle,textContent:c})]:l()}function V(){const c={ref:$,...R.value,...L.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:i};return a.multiple===!0&&(c.multiple=!0),D("input",c)}return Object.assign(h,{fieldClass:B,emitValue:b,hasValue:E,inputRef:$,innerValue:g,floatingLabel:n(()=>E.value===!0||xe(a.displayValue)),computedCounter:n(()=>{if(a.counterLabel!==void 0)return a.counterLabel(v.value);const c=a.maxFiles;return`${g.value.length}${c!==void 0?" / "+c:""} (${s.value})`}),getControlChild:()=>U("file"),getControl:()=>{const c={ref:h.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:a.tabindex};return h.editable.value===!0&&Object.assign(c,{onDragover:F,onDragleave:q,onKeydown:_,onKeyup:G}),D("div",c,[V()].concat(o()))}}),Object.assign(e,{removeAtIndex:O,removeFile:W,getNativeElement:()=>$.value}),rt(e,"nativeEl",()=>$.value),it(h)}}),Le="q-slider__marker-labels",Vt=a=>({value:a}),zt=({marker:a})=>D("div",{key:a.value,style:a.style,class:a.classes},a.label),Oe=[34,37,40,33,39,38],Pt={...ft,...Ee,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:a=>a>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},jt=["pan","update:modelValue","change"];function Ut({updateValue:a,updatePosition:r,getDragging:N,formAttrs:u}){const{props:e,emit:h,slots:$,proxy:{$q:y}}=ie(),j=dt(e,y),x=gt(u),F=I(!1),q=I(!1),S=I(!1),U=I(!1),L=n(()=>e.vertical===!0?"--v":"--h"),g=n(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),E=n(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(y.lang.rtl===!0)),P=n(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),s=n(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),v=n(()=>e.disable!==!0&&e.readonly!==!0&&P.value<s.value),R=n(()=>(String(e.step).trim().split(".")[1]||"").length),B=n(()=>e.step===0?1:e.step),f=n(()=>v.value===!0?e.tabindex||0:-1),O=n(()=>e.max-e.min),W=n(()=>s.value-P.value),b=n(()=>ce(P.value)),_=n(()=>ce(s.value)),G=n(()=>e.vertical===!0?E.value===!0?"bottom":"top":E.value===!0?"right":"left"),K=n(()=>e.vertical===!0?"height":"width"),i=n(()=>e.vertical===!0?"width":"height"),l=n(()=>e.vertical===!0?"vertical":"horizontal"),o=n(()=>{const t={role:"slider","aria-valuemin":P.value,"aria-valuemax":s.value,"aria-orientation":l.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),V=n(()=>`q-slider q-slider${L.value} q-slider--${F.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(v.value===!0?" q-slider--editable":""))+(S.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(j.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+L.value:""));function c(t){const m="q-slider__"+t;return`${m} ${m}${L.value} ${m}${L.value}${g.value}`}function M(t){const m="q-slider__"+t;return`${m} ${m}${L.value}`}const H=n(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),te=n(()=>M("markers")+" absolute overflow-hidden"),ue=n(()=>M("track-container")),Me=n(()=>c("pin")),Ne=n(()=>c("label")),Re=n(()=>c("text-container")),Ie=n(()=>c("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),qe=n(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Ae=n(()=>{const t={[i.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),Be=n(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),ge=n(()=>{const t={[G.value]:`${100*b.value}%`,[K.value]:`${100*(_.value-b.value)}%`};return e.innerTrackImg!==void 0&&(t.backgroundImage=`url(${e.innerTrackImg}) !important`),t});function Ve(t){const{min:m,max:k,step:w}=e;let A=m+t*(k-m);if(w>0){const Y=(A-m)%w;A+=(Math.abs(Y)>=w/2?(Y<0?-1:1)*w:0)-Y}return R.value>0&&(A=parseFloat(A.toFixed(R.value))),ee(A,P.value,s.value)}function ce(t){return O.value===0?0:(t-e.min)/O.value}function ze(t,m){const k=bt(t),w=e.vertical===!0?ee((k.top-m.top)/m.height,0,1):ee((k.left-m.left)/m.width,0,1);return ee(E.value===!0?1-w:w,b.value,_.value)}const he=n(()=>mt(e.markers)===!0?e.markers:B.value),ye=n(()=>{const t=[],m=he.value,k=e.max;let w=e.min;do t.push(w),w+=m;while(w<k);return t.push(k),t}),Se=n(()=>{const t=` ${Le}${L.value}-`;return Le+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${E.value===!0?"rtl":"ltr"}`}),de=n(()=>e.markerLabels===!1?null:je(e.markerLabels).map((t,m)=>({index:m,value:t.value,label:t.label||t.value,classes:Se.value+(t.classes!==void 0?" "+t.classes:""),style:{...Ce(t.value),...t.style||{}}}))),ke=n(()=>({markerList:de.value,markerMap:Ue.value,classes:Se.value,getStyle:Ce})),Pe=n(()=>{if(W.value!==0){const t=100*he.value/W.value;return{...ge.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}}return null});function je(t){if(t===!1)return null;if(t===!0)return ye.value.map(Vt);if(typeof t=="function")return ye.value.map(k=>{const w=t(k);return be(w)===!0?{...w,value:k}:{value:k,label:w}});const m=({value:k})=>k>=e.min&&k<=e.max;return Array.isArray(t)===!0?t.map(k=>be(k)===!0?k:{value:k}).filter(m):Object.keys(t).map(k=>{const w=t[k],A=Number(k);return be(w)===!0?{...w,value:A}:{value:A,label:w}}).filter(m)}function Ce(t){return{[G.value]:`${100*(t-e.min)/O.value}%`}}const Ue=n(()=>{if(e.markerLabels===!1)return null;const t={};return de.value.forEach(m=>{t[m.value]=m}),t});function We(){if($["marker-label-group"]!==void 0)return $["marker-label-group"](ke.value);const t=$["marker-label"]||zt;return de.value.map(m=>t({marker:m,...ke.value}))}const Qe=n(()=>[[Et,He,void 0,{[l.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function He(t){t.isFinal===!0?(U.value!==void 0&&(r(t.evt),t.touch===!0&&a(!0),U.value=void 0,h("pan","end")),F.value=!1,S.value=!1):t.isFirst===!0?(U.value=N(t.evt),r(t.evt),a(),F.value=!0,h("pan","start")):(r(t.evt),a())}function we(){S.value=!1}function Ke(t){r(t,N(t)),a(),q.value=!0,F.value=!0,document.addEventListener("mouseup",me,!0)}function me(){q.value=!1,F.value=!1,a(!0),we(),document.removeEventListener("mouseup",me,!0)}function Ge(t){r(t,N(t)),a(!0)}function Je(t){Oe.includes(t.keyCode)&&a(!0)}function Xe(t){if(e.vertical===!0)return null;const m=y.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*m-1} * ${e.thumbSize} / 2 + ${50-100*m}%))`}}function Ye(t){const m=n(()=>q.value===!1&&(S.value===t.focusValue||S.value==="both")?" q-slider--focus":""),k=n(()=>`q-slider__thumb q-slider__thumb${L.value} q-slider__thumb${L.value}-${E.value===!0?"rtl":"ltr"} absolute non-selectable`+m.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),w=n(()=>({width:e.thumbSize,height:e.thumbSize,[G.value]:`${100*t.ratio.value}%`,zIndex:S.value===t.focusValue?2:void 0})),A=n(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),Y=n(()=>Xe(t.ratio.value)),ve=n(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const fe=[D("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[D("path",{d:e.thumbPath})]),D("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(fe.push(D("div",{class:Me.value+" absolute fit no-pointer-events"+A.value},[D("div",{class:Ne.value,style:{minWidth:e.thumbSize}},[D("div",{class:Re.value,style:Y.value},[D("span",{class:ve.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&x(fe,"push")),D("div",{class:k.value,style:w.value,...t.getNodeData()},fe)}}function Ze(t,m,k,w){const A=[];e.innerTrackColor!=="transparent"&&A.push(D("div",{key:"inner",class:Be.value,style:ge.value})),e.selectionColor!=="transparent"&&A.push(D("div",{key:"selection",class:H.value,style:t.value})),e.markers!==!1&&A.push(D("div",{key:"marker",class:te.value,style:Pe.value})),w(A);const Y=[pt("div",{key:"trackC",class:ue.value,tabindex:m.value,...k.value},[D("div",{class:qe.value,style:Ae.value},A)],"slide",v.value,()=>Qe.value)];if(e.markerLabels!==!1){const ve=e.switchMarkerLabelsSide===!0?"unshift":"push";Y[ve](D("div",{key:"markerL",class:Ie.value},We()))}return Y}return vt(()=>{document.removeEventListener("mouseup",me,!0)}),{state:{active:F,focus:S,preventFocus:q,dragging:U,editable:v,classes:V,tabindex:f,attributes:o,step:B,decimals:R,trackLen:O,innerMin:P,innerMinRatio:b,innerMax:s,innerMaxRatio:_,positionProp:G,sizeProp:K,isReversed:E},methods:{onActivate:Ke,onMobileClick:Ge,onBlur:we,onKeyup:Je,getContent:Ze,getThumbRenderFn:Ye,convertRatioToModel:Ve,convertModelToRatio:ce,getDraggingRatio:ze}}}const Wt=()=>({}),Qt=Fe({name:"QSlider",props:{...Pt,modelValue:{required:!0,default:null,validator:a=>typeof a=="number"||a===null},labelValue:[String,Number]},emits:jt,setup(a,{emit:r}){const{proxy:{$q:N}}=ie(),{state:u,methods:e}=Ut({updateValue:L,updatePosition:E,getDragging:g,formAttrs:ht(a)}),h=I(null),$=I(0),y=I(0);function j(){y.value=a.modelValue===null?u.innerMin.value:ee(a.modelValue,u.innerMin.value,u.innerMax.value)}yt(()=>`${a.modelValue}|${u.innerMin.value}|${u.innerMax.value}`,j),j();const x=n(()=>e.convertModelToRatio(y.value)),F=n(()=>u.active.value===!0?$.value:x.value),q=n(()=>{const v={[u.positionProp.value]:`${100*u.innerMinRatio.value}%`,[u.sizeProp.value]:`${100*(F.value-u.innerMinRatio.value)}%`};return a.selectionImg!==void 0&&(v.backgroundImage=`url(${a.selectionImg}) !important`),v}),S=e.getThumbRenderFn({focusValue:!0,getNodeData:Wt,ratio:F,label:n(()=>a.labelValue!==void 0?a.labelValue:y.value),thumbColor:n(()=>a.thumbColor||a.color),labelColor:n(()=>a.labelColor),labelTextColor:n(()=>a.labelTextColor)}),U=n(()=>u.editable.value!==!0?{}:N.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:P,onBlur:e.onBlur,onKeydown:s,onKeyup:e.onKeyup});function L(v){y.value!==a.modelValue&&r("update:modelValue",y.value),v===!0&&r("change",y.value)}function g(){return h.value.getBoundingClientRect()}function E(v,R=u.dragging.value){const B=e.getDraggingRatio(v,R);y.value=e.convertRatioToModel(B),$.value=a.snap!==!0||a.step===0?B:e.convertModelToRatio(y.value)}function P(){u.focus.value=!0}function s(v){if(!Oe.includes(v.keyCode))return;pe(v);const R=([34,33].includes(v.keyCode)?10:1)*u.step.value,B=([34,37,40].includes(v.keyCode)?-1:1)*(u.isReversed.value===!0?-1:1)*(a.vertical===!0?-1:1)*R;y.value=ee(parseFloat((y.value+B).toFixed(u.decimals.value)),u.innerMin.value,u.innerMax.value),L()}return()=>{const v=e.getContent(q,u.tabindex,U,R=>{R.push(S())});return D("div",{ref:h,class:u.classes.value+(a.modelValue===null?" q-slider--no-value":""),...u.attributes.value,"aria-valuenow":a.modelValue},v)}}});function $e(a){setTimeout(()=>{window.URL.revokeObjectURL(a.href)},1e4),a.remove()}function Ht(a,r,N={}){const{mimeType:u,byteOrderMark:e,encoding:h}=typeof N=="string"?{mimeType:N}:N,$=h!==void 0?new TextEncoder(h).encode([r]):r,y=e!==void 0?[e,$]:[$],j=new Blob(y,{type:u||"application/octet-stream"}),x=document.createElement("a");x.href=window.URL.createObjectURL(j),x.setAttribute("download",a),typeof x.download>"u"&&x.setAttribute("target","_blank"),x.classList.add("hidden"),x.style.position="fixed",document.body.appendChild(x);try{return x.click(),$e(x),!0}catch(F){return $e(x),F}}const Kt=d("p",{class:"text-h6"},"Options",-1),Gt={class:"q-mb-md"},Jt=d("p",null,"Reset your app Settings to the defaults without impacting any of your data.",-1),Xt={class:"q-mb-md"},Yt=d("p",null," Welcome overlay provides helpful instructions on basic app usage on the Dashboard page. ",-1),Zt={class:"q-mb-md"},ea=d("p",null,"Show descriptions for records displayed on the Dashboard page.",-1),ta=d("p",null,"Dark mode allows you to switch between a light or dark theme for the app.",-1),aa=d("p",{class:"text-h6"},"Defaults",-1),la=d("p",null,"Load default demostration records into the database. This action can be repeated.",-1),na=d("p",{class:"text-h6"},"Data Management",-1),oa={class:"q-mb-md"},sa=d("p",null," Import data into the database from a JSON file. The app expects the data in the file to be structured the same as the exported version. ",-1),ra={class:"q-mb-md"},ia=d("p",null," Export your data as a JSON file. Do this on a regularly basis so you have a backup of your data. ",-1),ua={class:"q-mb-md"},ca=d("p",null,"Access any app data types to view the records or troubleshoot issues.",-1),da=d("p",{class:"text-h6"},"Logging",-1),ma={class:"q-mb-md"},va=d("p",null,"Show Console Logs will display all log messages in the browser console.",-1),fa={class:"q-mb-md"},ba=d("p",null,"Show Info Messages will display info level notifications.",-1),pa={class:"q-mb-md"},ga=d("p",null," Validate that your logging settings above are working as expected by using the test action below. ",-1),ha={class:"q-mb-md"},ya=d("p",null," Change log retention time below. Logs older than the selected time will be deleted. This functions retroactivley, so if you change the time to 3 months, all logs older than 3 months will be deleted. Expired log processing occurs every time the app is loaded. ",-1),Sa={class:"q-mx-lg"},ka=d("p",{class:"text-h6 text-negative"},"DANGER ZONE",-1),Ca=d("p",null," The following operations cannot be undone. Consider exporting your data before proceeding. ",-1),wa={class:"q-mb-md"},xa=d("p",null,"Select a data type and permanently delete all of its records.",-1),_a={class:"q-mb-md"},Da=d("p",null,"Permanently delete all data records from the database.",-1),Ta={class:"q-mb-md"},La=d("p",null,"Delete the underlining database and all of its data (requires website reload).",-1),za=St({__name:"SettingsView",setup(a){kt({title:`${oe} - Settings`});const{log:r}=Ct(),{notify:N}=wt(),{confirmDialog:u}=Ot(),{onDefaults:e}=Mt(),{goToLogsData:h,goToSettingsData:$,goToParentData:y,goToChildData:j}=Nt(),x=xt.getAllTypeOptions(),F=I([]),q=I(0),S=I(null),U=I([...x]),L=I(U.value[0]),g=I([...x]),E=I(g.value[0]),P=C.liveSettings().subscribe({next:i=>{var o;F.value=i;const l=(o=i.find(V=>V.key===Q.LOG_RETENTION_TIME))==null?void 0:o.value;q.value=Object.values(se).findIndex(V=>V===l)},error:i=>{r.error("Error fetching live Settings",i)}});_t(()=>{P.unsubscribe()});function s(){r.debug("This is a Debug Log",{name:"Debug"}),r.info("This is an Info Log",{name:"Info"}),r.warn("This is a Warning Log",{name:"Warning"}),r.error("This is an Error Log",{name:"Error"})}function v(i){var o,V;const l=((V=(o=i[0])==null?void 0:o.importFile)==null?void 0:V.name)||void 0;r.warn(`Cannot import"${l}`,i)}function R(){var i;u("Import",`Import backup data from ${(i=S==null?void 0:S.value)==null?void 0:i.name} and attempt to load records into the database from it? Please note that Logs are NOT imported.`,X.INFO,"info",async()=>{try{const l=JSON.parse(await S.value.text());if(r.silentDebug("backupData:",l),l.appName!==oe)throw new Error(`Cannot import data from the app ${l.appName}`);l.settings.length>0&&await Promise.all(l.settings.filter(o=>Object.values(Q).includes(o.key)).map(async o=>await C.setSetting(o.key,o.value))),await Promise.all([C.importParents(l.parents),C.importChildren(l.children)]),await C.updateAllParentLastChild(),S.value=null,r.info("Successfully imported available data")}catch(l){r.error("Error during import",l)}})}function B(){const i=oe.toLowerCase().split(" ").join("-"),l=new Date().toISOString().split("T")[0],o=`export-${i}-${l}.json`;u("Export",`Export all data into the file "${o}" as a backup?`,X.INFO,"info",async()=>{try{const V={appName:oe,backupTimestamp:Date.now(),logs:await C.getLogs(),settings:await C.getSettings(),parents:(await C.getParents()).map(M=>(delete M.lastChild,M)),children:await C.getChildren()};if(r.silentDebug("backupData:",V),Ht(o,JSON.stringify(V),{encoding:"UTF-8",mimeType:"application/json"})===!0)r.info("File downloaded successfully",{filename:o});else throw new Error("Browser denied file download")}catch(V){r.error("Export failed",V)}})}async function f(i){try{const l=Object.values(se)[i];await C.setSetting(Q.LOG_RETENTION_TIME,l),r.info("Updated log retention time",{time:l,index:i})}catch(l){r.error("Log retention update failed",l)}}async function O(){u("Reset Settings","Would you like to reset your app Settings to the defaults? This does not impact your data.",X.REFRESH,"primary",async()=>{try{await C.resetSettings(),r.info("Successfully reset settings")}catch(i){r.error("Error reseting settings",i)}})}async function W(i,l){u(`Delete ${i}`,`Permanetly delete all ${i} from the database?`,X.CLEAR,"negative",async()=>{try{switch(l[0]){case"internal":if(l[1]==="logs")await C.clearLogs();else if(l[1]==="settings")await C.resetSettings();else throw new Error(`Unknown internal type ${l[1]}`);break;case"parent":await C.clearParentsByType(l[1]);break;case"child":await C.clearChildrenByType(l[1]);break;default:throw new Error(`Unknown type ${l[0]}`)}r.info("Successfully deleted selected data")}catch(o){r.error(`Error deleting ${i}`,o)}})}async function b(){u("Delete All","Permanetly delete all data from the database?",X.CLEAR,"negative",async()=>{try{await C.clearLogs(),await C.resetSettings(),await C.clearParents(),await C.clearChildren(),r.info("All data successfully deleted")}catch(i){r.error("Error deleting all data",i)}})}async function _(){u("Delete Database","Delete the underlining database? All data will be lost. You must reload the website after this action to reinitialize the database.",X.CLEAR,"negative",async()=>{try{await C.deleteDatabase(),N("Reload the website now",X.WARN,"warning")}catch(i){r.error("Database deletion failed",i)}})}function G(i){try{switch(i[0]){case"internal":if(i[1]==="logs")h();else if(i[1]==="settings")$();else throw new Error(`Unknown internal type ${i[1]}`);break;case"parent":y(i[1]);break;case"child":j(i[1]);break;default:throw new Error(`Unknown type ${i[0]}`)}}catch(l){r.error("Error accessing data table",l)}}function K(i){var l;return(l=F.value.find(o=>o.key===i))==null?void 0:l.value}return(i,l)=>(_e(),De(Rt,{bannerIcon:T(X).SETTINGS,bannerTitle:"Settings"},{default:z(()=>[p(ne,{class:"q-mb-md"},{default:z(()=>[p(ae,null,{default:z(()=>[Kt,d("div",Gt,[Jt,p(J,{label:"Reset Settings",color:"primary",onClick:l[0]||(l[0]=o=>O())})]),d("div",Xt,[Yt,p(le,{label:"Show Welcome Overlay","model-value":K(T(Q).SHOW_WELCOME),"onUpdate:modelValue":l[1]||(l[1]=o=>T(C).setSetting(T(Q).SHOW_WELCOME,o))},null,8,["model-value"])]),d("div",Zt,[ea,p(le,{label:"Show Dashboard Descriptions","model-value":K(T(Q).SHOW_DESCRIPTIONS),"onUpdate:modelValue":l[2]||(l[2]=o=>T(C).setSetting(T(Q).SHOW_DESCRIPTIONS,o))},null,8,["model-value"])]),d("div",null,[ta,p(le,{label:"Dark Mode","model-value":K(T(Q).DARK_MODE),"onUpdate:modelValue":l[3]||(l[3]=o=>T(C).setSetting(T(Q).DARK_MODE,o))},null,8,["model-value"])])]),_:1})]),_:1}),p(ne,{class:"q-mb-md"},{default:z(()=>[p(ae,null,{default:z(()=>[aa,d("div",null,[la,p(J,{label:"Load Examples",color:"primary",onClick:l[4]||(l[4]=o=>T(e)())})])]),_:1})]),_:1}),p(ne,{class:"q-mb-md"},{default:z(()=>[p(ae,null,{default:z(()=>[na,d("div",oa,[sa,p(Bt,{modelValue:S.value,"onUpdate:modelValue":l[7]||(l[7]=o=>S.value=o),dense:"",outlined:"",counter:"","bottom-slots":"",label:"File Select","max-file-size":T(Dt).MAX_FILE_SIZE,accept:"application/json",onRejected:v},{before:z(()=>[p(J,{disable:!S.value,label:"Import",color:"primary",onClick:l[5]||(l[5]=o=>R())},null,8,["disable"])]),append:z(()=>[S.value?(_e(),De(Tt,{key:0,name:T(X).CLOSE,class:"cursor-pointer",onClick:l[6]||(l[6]=Lt(o=>S.value=null,["stop"]))},null,8,["name"])):$t("",!0)]),_:1},8,["modelValue","max-file-size"])]),d("div",ra,[ia,p(J,{label:"Export",color:"primary",onClick:l[8]||(l[8]=o=>B())})]),d("div",ua,[ca,p(Te,{modelValue:L.value,"onUpdate:modelValue":l[10]||(l[10]=o=>L.value=o),outlined:"",dense:"",label:"Record Type",options:U.value},{before:z(()=>[p(J,{disable:!L.value,label:"Access Data",color:"primary",onClick:l[9]||(l[9]=o=>G(L.value.value))},null,8,["disable"])]),_:1},8,["modelValue","options"])])]),_:1})]),_:1}),p(ne,{class:"q-mb-md"},{default:z(()=>[p(ae,null,{default:z(()=>[da,d("div",ma,[va,p(le,{label:"Show Console Logs","model-value":K(T(Q).SHOW_CONSOLE_LOGS),"onUpdate:modelValue":l[11]||(l[11]=o=>T(C).setSetting(T(Q).SHOW_CONSOLE_LOGS,o))},null,8,["model-value"])]),d("div",fa,[ba,p(le,{label:"Show Info Messages","model-value":K(T(Q).SHOW_INFO_MESSAGES),"onUpdate:modelValue":l[12]||(l[12]=o=>T(C).setSetting(T(Q).SHOW_INFO_MESSAGES,o))},null,8,["model-value"])]),d("div",pa,[ga,p(J,{label:"Test Logger",color:"primary",onClick:l[13]||(l[13]=o=>s())})]),d("div",ha,[ya,d("div",Sa,[p(Qt,{modelValue:q.value,"onUpdate:modelValue":l[14]||(l[14]=o=>q.value=o),"label-value":Object.values(T(se))[q.value],color:"primary",markers:"","label-always":"","switch-label-side":"",min:0,max:Object.values(T(se)).length-1,onChange:l[15]||(l[15]=o=>f(o))},null,8,["modelValue","label-value","max"])])])]),_:1})]),_:1}),p(ne,{class:"q-mb-md"},{default:z(()=>[p(ae,null,{default:z(()=>[ka,Ca,d("div",wa,[xa,p(Te,{modelValue:E.value,"onUpdate:modelValue":l[17]||(l[17]=o=>E.value=o),outlined:"",dense:"",label:"Record Type",options:g.value},{before:z(()=>[p(J,{disable:!E.value,label:"Delete Data",color:"negative",onClick:l[16]||(l[16]=o=>W(E.value.label,E.value.value))},null,8,["disable"])]),_:1},8,["modelValue","options"])]),d("div",_a,[Da,p(J,{label:"Delete All Data",color:"negative",onClick:l[18]||(l[18]=o=>b())})]),d("div",Ta,[La,p(J,{label:"Delete Database",color:"negative",onClick:l[19]||(l[19]=o=>_())})])]),_:1})]),_:1})]),_:1},8,["bannerIcon"]))}});export{za as default};
