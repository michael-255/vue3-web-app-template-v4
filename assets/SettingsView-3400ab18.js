import{g as ne,r as z,e as n,as as tt,s as be,at,h as D,c as Ee,au as lt,a as $e,av as nt,aw as ot,ax as st,ay as rt,aj as it,az as ut,aA as _e,aB as ct,aC as dt,a3 as mt,ad as vt,af as ve,aa as ft,a2 as pt,j as J,aD as bt,aE as gt,i as ht,d as yt,a4 as St,l as Fe,I as U,al as X,W as kt,aF as xt,aG as A,D as O,V as te,X as Ct,aH as _t,k as Dt,U as wt,A as fe,aI as Tt,S as P,m as Lt,n as De,p as we,w as pe,v as c,q as I,B as W,y as T,aJ as ee,Q as Et,aK as $t,O as Ft,aL as Mt}from"./index-d68b0eaf.js";import{b as Rt}from"./QSelect-eea99a9e.js";import{T as Ot}from"./TouchPan-d6c424cd.js";import{u as Me}from"./useDialogs-930d4a32.js";import{_ as Nt}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-f78d365d.js";import{u as It}from"./useRouting-2e4d5d3d.js";import"./QItem-6b6e34f3.js";import"./QItemLabel-e1600f7f.js";import"./QMenu-7efd4149.js";import"./selection-319d849e.js";import"./action-bacae855.js";import"./ErrorStates.vue_vue_type_script_setup_true_lang-f09fb14b.js";import"./ui-903b8f03.js";function Y(t,i,L,d){const e=[];return t.forEach(h=>{d(h)===!0?e.push(h):i.push({failedPropValidation:L,file:h})}),e}function le(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),be(t)}const At={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},qt=["rejected"];function Vt({editable:t,dnd:i,getFileInput:L,addFilesToQueue:d}){const{props:e,emit:h,proxy:_}=ne(),g=z(null),M=n(()=>e.accept!==void 0?e.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),u=n(()=>parseInt(e.maxFiles,10)),y=n(()=>parseInt(e.maxTotalSize,10));function E(r){if(t.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&tt(r);else{const p=L();p&&p!==r.target&&p.click(r)}}function $(r){t.value&&r&&d(null,r)}function R(r,p,N,F){let s=Array.from(p||r.target.files);const l=[],o=()=>{l.length!==0&&h("rejected",l)};if(e.accept!==void 0&&M.value.indexOf("*/")===-1&&(s=Y(s,l,"accept",m=>M.value.some(w=>m.type.toUpperCase().startsWith(w)||m.name.toUpperCase().endsWith(w))),s.length===0))return o();if(e.maxFileSize!==void 0){const m=parseInt(e.maxFileSize,10);if(s=Y(s,l,"max-file-size",w=>w.size<=m),s.length===0)return o()}if(e.multiple!==!0&&s.length!==0&&(s=[s[0]]),s.forEach(m=>{m.__key=m.webkitRelativePath+m.lastModified+m.name+m.size}),F===!0){const m=N.map(w=>w.__key);s=Y(s,l,"duplicate",w=>m.includes(w.__key)===!1)}if(s.length===0)return o();if(e.maxTotalSize!==void 0){let m=F===!0?N.reduce((w,K)=>w+K.size,0):0;if(s=Y(s,l,"max-total-size",w=>(m+=w.size,m<=y.value)),s.length===0)return o()}if(typeof e.filter=="function"){const m=e.filter(s);s=Y(s,l,"filter",w=>m.includes(w))}if(e.maxFiles!==void 0){let m=F===!0?N.length:0;if(s=Y(s,l,"max-files",()=>(m++,m<=u.value)),s.length===0)return o()}if(o(),s.length!==0)return s}function x(r){le(r),i.value!==!0&&(i.value=!0)}function b(r){be(r),(r.relatedTarget!==null||at.is.safari!==!0?r.relatedTarget!==g.value:document.elementsFromPoint(r.clientX,r.clientY).includes(g.value)===!1)===!0&&(i.value=!1)}function S(r){le(r);const p=r.dataTransfer.files;p.length!==0&&d(null,p),i.value=!1}function B(r){if(i.value===!0)return D("div",{ref:g,class:`q-${r}__dnd absolute-full`,onDragenter:le,onDragover:le,onDragleave:b,onDrop:S})}return Object.assign(_,{pickFiles:E,addFiles:$}),{pickFiles:E,addFiles:$,onDragover:x,onDragleave:b,processFiles:R,getDndNode:B,maxFilesNumber:u,maxTotalSizeNumber:y}}const Bt=Ee({name:"QFile",inheritAttrs:!1,props:{...lt,...$e,...At,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...nt,...qt],setup(t,{slots:i,emit:L,attrs:d}){const{proxy:e}=ne(),h=ot(),_=z(null),g=z(!1),M=st(t),{pickFiles:u,onDragover:y,onDragleave:E,processFiles:$,getDndNode:R}=Vt({editable:h.editable,dnd:g,getFileInput:H,addFilesToQueue:ae}),x=rt(t),b=n(()=>Object(t.modelValue)===t.modelValue?"length"in t.modelValue?Array.from(t.modelValue):[t.modelValue]:[]),S=n(()=>_e(b.value)),B=n(()=>b.value.map(v=>v.name).join(", ")),r=n(()=>ct(b.value.reduce((v,q)=>v+q.size,0))),p=n(()=>({totalSize:r.value,filesNumber:b.value.length,maxFiles:t.maxFiles})),N=n(()=>({tabindex:-1,type:"file",title:"",accept:t.accept,capture:t.capture,name:M.value,...d,id:h.targetUid.value,disabled:h.editable.value!==!0})),F=n(()=>"q-file q-field--auto-height"+(g.value===!0?" q-file--dnd":"")),s=n(()=>t.multiple===!0&&t.append===!0);function l(v){const q=b.value.slice();q.splice(v,1),m(q)}function o(v){const q=b.value.indexOf(v);q>-1&&l(q)}function m(v){L("update:modelValue",t.multiple===!0?v:v[0])}function w(v){v.keyCode===13&&dt(v)}function K(v){(v.keyCode===13||v.keyCode===32)&&u(v)}function H(){return _.value}function ae(v,q){const j=$(v,q,b.value,s.value),Z=H();Z!=null&&(Z.value=""),j!==void 0&&((t.multiple===!0?t.modelValue&&j.every(re=>b.value.includes(re)):t.modelValue===j[0])||m(s.value===!0?b.value.concat(j):j))}function Q(){return[D("input",{class:[t.inputClass,"q-file__filler"],style:t.inputStyle})]}function oe(){if(i.file!==void 0)return b.value.length===0?Q():b.value.map((q,j)=>i.file({index:j,file:q,ref:this}));if(i.selected!==void 0)return b.value.length===0?Q():i.selected({files:b.value,ref:this});if(t.useChips===!0)return b.value.length===0?Q():b.value.map((q,j)=>D(Rt,{key:"file-"+j,removable:h.editable.value,dense:!0,textColor:t.color,tabindex:t.tabindex,onRemove:()=>{l(j)}},()=>D("span",{class:"ellipsis",textContent:q.name})));const v=t.displayValue!==void 0?t.displayValue:B.value;return v.length!==0?[D("div",{class:t.inputClass,style:t.inputStyle,textContent:v})]:Q()}function se(){const v={ref:_,...N.value,...x.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:ae};return t.multiple===!0&&(v.multiple=!0),D("input",v)}return Object.assign(h,{fieldClass:F,emitValue:m,hasValue:S,inputRef:_,innerValue:b,floatingLabel:n(()=>S.value===!0||_e(t.displayValue)),computedCounter:n(()=>{if(t.counterLabel!==void 0)return t.counterLabel(p.value);const v=t.maxFiles;return`${b.value.length}${v!==void 0?" / "+v:""} (${r.value})`}),getControlChild:()=>R("file"),getControl:()=>{const v={ref:h.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:t.tabindex};return h.editable.value===!0&&Object.assign(v,{onDragover:y,onDragleave:E,onKeydown:w,onKeyup:K}),D("div",v,[se()].concat(oe()))}}),Object.assign(e,{removeAtIndex:l,removeFile:o,getNativeElement:()=>_.value}),it(e,"nativeEl",()=>_.value),ut(h)}}),Te="q-slider__marker-labels",Pt=t=>({value:t}),zt=({marker:t})=>D("div",{key:t.value,style:t.style,class:t.classes},t.label),Re=[34,37,40,33,39,38],jt={...pt,...$e,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ut=["pan","update:modelValue","change"];function Wt({updateValue:t,updatePosition:i,getDragging:L,formAttrs:d}){const{props:e,emit:h,slots:_,proxy:{$q:g}}=ne(),M=mt(e,g),u=ht(d),y=z(!1),E=z(!1),$=z(!1),R=z(!1),x=n(()=>e.vertical===!0?"--v":"--h"),b=n(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),S=n(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(g.lang.rtl===!0)),B=n(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),r=n(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),p=n(()=>e.disable!==!0&&e.readonly!==!0&&B.value<r.value),N=n(()=>(String(e.step).trim().split(".")[1]||"").length),F=n(()=>e.step===0?1:e.step),s=n(()=>p.value===!0?e.tabindex||0:-1),l=n(()=>e.max-e.min),o=n(()=>r.value-B.value),m=n(()=>ie(B.value)),w=n(()=>ie(r.value)),K=n(()=>e.vertical===!0?S.value===!0?"bottom":"top":S.value===!0?"right":"left"),H=n(()=>e.vertical===!0?"height":"width"),ae=n(()=>e.vertical===!0?"width":"height"),Q=n(()=>e.vertical===!0?"vertical":"horizontal"),oe=n(()=>{const a={role:"slider","aria-valuemin":B.value,"aria-valuemax":r.value,"aria-orientation":Q.value,"data-step":e.step};return e.disable===!0?a["aria-disabled"]="true":e.readonly===!0&&(a["aria-readonly"]="true"),a}),se=n(()=>`q-slider q-slider${x.value} q-slider--${y.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(p.value===!0?" q-slider--editable":""))+($.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(M.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+x.value:""));function v(a){const f="q-slider__"+a;return`${f} ${f}${x.value} ${f}${x.value}${b.value}`}function q(a){const f="q-slider__"+a;return`${f} ${f}${x.value}`}const j=n(()=>{const a=e.selectionColor||e.color;return"q-slider__selection absolute"+(a!==void 0?` text-${a}`:"")}),Z=n(()=>q("markers")+" absolute overflow-hidden"),re=n(()=>q("track-container")),Oe=n(()=>v("pin")),Ne=n(()=>v("label")),Ie=n(()=>v("text-container")),Ae=n(()=>v("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),qe=n(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Ve=n(()=>{const a={[ae.value]:e.trackSize};return e.trackImg!==void 0&&(a.backgroundImage=`url(${e.trackImg}) !important`),a}),Be=n(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),ge=n(()=>{const a={[K.value]:`${100*m.value}%`,[H.value]:`${100*(w.value-m.value)}%`};return e.innerTrackImg!==void 0&&(a.backgroundImage=`url(${e.innerTrackImg}) !important`),a});function Pe(a){const{min:f,max:k,step:C}=e;let V=f+a*(k-f);if(C>0){const G=(V-f)%C;V+=(Math.abs(G)>=C/2?(G<0?-1:1)*C:0)-G}return N.value>0&&(V=parseFloat(V.toFixed(N.value))),J(V,B.value,r.value)}function ie(a){return l.value===0?0:(a-e.min)/l.value}function ze(a,f){const k=bt(a),C=e.vertical===!0?J((k.top-f.top)/f.height,0,1):J((k.left-f.left)/f.width,0,1);return J(S.value===!0?1-C:C,m.value,w.value)}const he=n(()=>vt(e.markers)===!0?e.markers:F.value),ye=n(()=>{const a=[],f=he.value,k=e.max;let C=e.min;do a.push(C),C+=f;while(C<k);return a.push(k),a}),Se=n(()=>{const a=` ${Te}${x.value}-`;return Te+`${a}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${a}${S.value===!0?"rtl":"ltr"}`}),ue=n(()=>e.markerLabels===!1?null:Ue(e.markerLabels).map((a,f)=>({index:f,value:a.value,label:a.label||a.value,classes:Se.value+(a.classes!==void 0?" "+a.classes:""),style:{...xe(a.value),...a.style||{}}}))),ke=n(()=>({markerList:ue.value,markerMap:We.value,classes:Se.value,getStyle:xe})),je=n(()=>{if(o.value!==0){const a=100*he.value/o.value;return{...ge.value,backgroundSize:e.vertical===!0?`2px ${a}%`:`${a}% 2px`}}return null});function Ue(a){if(a===!1)return null;if(a===!0)return ye.value.map(Pt);if(typeof a=="function")return ye.value.map(k=>{const C=a(k);return ve(C)===!0?{...C,value:k}:{value:k,label:C}});const f=({value:k})=>k>=e.min&&k<=e.max;return Array.isArray(a)===!0?a.map(k=>ve(k)===!0?k:{value:k}).filter(f):Object.keys(a).map(k=>{const C=a[k],V=Number(k);return ve(C)===!0?{...C,value:V}:{value:V,label:C}}).filter(f)}function xe(a){return{[K.value]:`${100*(a-e.min)/l.value}%`}}const We=n(()=>{if(e.markerLabels===!1)return null;const a={};return ue.value.forEach(f=>{a[f.value]=f}),a});function Ke(){if(_["marker-label-group"]!==void 0)return _["marker-label-group"](ke.value);const a=_["marker-label"]||zt;return ue.value.map(f=>a({marker:f,...ke.value}))}const Ge=n(()=>[[Ot,Qe,void 0,{[Q.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Qe(a){a.isFinal===!0?(R.value!==void 0&&(i(a.evt),a.touch===!0&&t(!0),R.value=void 0,h("pan","end")),y.value=!1,$.value=!1):a.isFirst===!0?(R.value=L(a.evt),i(a.evt),t(),y.value=!0,h("pan","start")):(i(a.evt),t())}function Ce(){$.value=!1}function Xe(a){i(a,L(a)),t(),E.value=!0,y.value=!0,document.addEventListener("mouseup",ce,!0)}function ce(){E.value=!1,y.value=!1,t(!0),Ce(),document.removeEventListener("mouseup",ce,!0)}function Ye(a){i(a,L(a)),t(!0)}function Je(a){Re.includes(a.keyCode)&&t(!0)}function He(a){if(e.vertical===!0)return null;const f=g.lang.rtl!==e.reverse?1-a:a;return{transform:`translateX(calc(${2*f-1} * ${e.thumbSize} / 2 + ${50-100*f}%))`}}function Ze(a){const f=n(()=>E.value===!1&&($.value===a.focusValue||$.value==="both")?" q-slider--focus":""),k=n(()=>`q-slider__thumb q-slider__thumb${x.value} q-slider__thumb${x.value}-${S.value===!0?"rtl":"ltr"} absolute non-selectable`+f.value+(a.thumbColor.value!==void 0?` text-${a.thumbColor.value}`:"")),C=n(()=>({width:e.thumbSize,height:e.thumbSize,[K.value]:`${100*a.ratio.value}%`,zIndex:$.value===a.focusValue?2:void 0})),V=n(()=>a.labelColor.value!==void 0?` text-${a.labelColor.value}`:""),G=n(()=>He(a.ratio.value)),de=n(()=>"q-slider__text"+(a.labelTextColor.value!==void 0?` text-${a.labelTextColor.value}`:""));return()=>{const me=[D("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[D("path",{d:e.thumbPath})]),D("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(me.push(D("div",{class:Oe.value+" absolute fit no-pointer-events"+V.value},[D("div",{class:Ne.value,style:{minWidth:e.thumbSize}},[D("div",{class:Ie.value,style:G.value},[D("span",{class:de.value},a.label.value)])])])),e.name!==void 0&&e.disable!==!0&&u(me,"push")),D("div",{class:k.value,style:C.value,...a.getNodeData()},me)}}function et(a,f,k,C){const V=[];e.innerTrackColor!=="transparent"&&V.push(D("div",{key:"inner",class:Be.value,style:ge.value})),e.selectionColor!=="transparent"&&V.push(D("div",{key:"selection",class:j.value,style:a.value})),e.markers!==!1&&V.push(D("div",{key:"marker",class:Z.value,style:je.value})),C(V);const G=[gt("div",{key:"trackC",class:re.value,tabindex:f.value,...k.value},[D("div",{class:qe.value,style:Ve.value},V)],"slide",p.value,()=>Ge.value)];if(e.markerLabels!==!1){const de=e.switchMarkerLabelsSide===!0?"unshift":"push";G[de](D("div",{key:"markerL",class:Ae.value},Ke()))}return G}return ft(()=>{document.removeEventListener("mouseup",ce,!0)}),{state:{active:y,focus:$,preventFocus:E,dragging:R,editable:p,classes:se,tabindex:s,attributes:oe,step:F,decimals:N,trackLen:l,innerMin:B,innerMinRatio:m,innerMax:r,innerMaxRatio:w,positionProp:K,sizeProp:H,isReversed:S},methods:{onActivate:Xe,onMobileClick:Ye,onBlur:Ce,onKeyup:Je,getContent:et,getThumbRenderFn:Ze,convertRatioToModel:Pe,convertModelToRatio:ie,getDraggingRatio:ze}}}const Kt=()=>({}),Gt=Ee({name:"QSlider",props:{...jt,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:Ut,setup(t,{emit:i}){const{proxy:{$q:L}}=ne(),{state:d,methods:e}=Wt({updateValue:x,updatePosition:S,getDragging:b,formAttrs:yt(t)}),h=z(null),_=z(0),g=z(0);function M(){g.value=t.modelValue===null?d.innerMin.value:J(t.modelValue,d.innerMin.value,d.innerMax.value)}St(()=>`${t.modelValue}|${d.innerMin.value}|${d.innerMax.value}`,M),M();const u=n(()=>e.convertModelToRatio(g.value)),y=n(()=>d.active.value===!0?_.value:u.value),E=n(()=>{const p={[d.positionProp.value]:`${100*d.innerMinRatio.value}%`,[d.sizeProp.value]:`${100*(y.value-d.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(p.backgroundImage=`url(${t.selectionImg}) !important`),p}),$=e.getThumbRenderFn({focusValue:!0,getNodeData:Kt,ratio:y,label:n(()=>t.labelValue!==void 0?t.labelValue:g.value),thumbColor:n(()=>t.thumbColor||t.color),labelColor:n(()=>t.labelColor),labelTextColor:n(()=>t.labelTextColor)}),R=n(()=>d.editable.value!==!0?{}:L.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:B,onBlur:e.onBlur,onKeydown:r,onKeyup:e.onKeyup});function x(p){g.value!==t.modelValue&&i("update:modelValue",g.value),p===!0&&i("change",g.value)}function b(){return h.value.getBoundingClientRect()}function S(p,N=d.dragging.value){const F=e.getDraggingRatio(p,N);g.value=e.convertRatioToModel(F),_.value=t.snap!==!0||t.step===0?F:e.convertModelToRatio(g.value)}function B(){d.focus.value=!0}function r(p){if(!Re.includes(p.keyCode))return;be(p);const N=([34,33].includes(p.keyCode)?10:1)*d.step.value,F=([34,37,40].includes(p.keyCode)?-1:1)*(d.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*N;g.value=J(parseFloat((g.value+F).toFixed(d.decimals.value)),d.innerMin.value,d.innerMax.value),x()}return()=>{const p=e.getContent(E,d.tabindex,R,N=>{N.push($())});return D("div",{ref:h,class:d.classes.value+(t.modelValue===null?" q-slider--no-value":""),...d.attributes.value,"aria-valuenow":t.modelValue},p)}}});function Le(t){setTimeout(()=>{window.URL.revokeObjectURL(t.href)},1e4),t.remove()}function Qt(t,i,L={}){const{mimeType:d,byteOrderMark:e,encoding:h}=typeof L=="string"?{mimeType:L}:L,_=h!==void 0?new TextEncoder(h).encode([i]):i,g=e!==void 0?[e,_]:[_],M=new Blob(g,{type:d||"application/octet-stream"}),u=document.createElement("a");u.href=window.URL.createObjectURL(M),u.setAttribute("download",t),typeof u.download>"u"&&u.setAttribute("target","_blank"),u.classList.add("hidden"),u.style.position="fixed",document.body.appendChild(u);try{return u.click(),Le(u),!0}catch(y){return Le(u),y}}function Xt(){const{log:t}=Fe(),{confirmDialog:i}=Me();function L(){const u=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega"];return u[Math.floor(Math.random()*u.length)]}function d(){const u="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return u[Math.floor(Math.random()*u.length)]}function e(){return Math.random()>=.5}function h(){return Math.floor(Math.random()*100)}function _(){return Date.now()-A["One Year"]}async function g(){i("Load Default Examples","Would you like the load default Examples into the database?",U.INFO,"info",async()=>{try{const u=[],y=[],E=$=>{const R=X(),x=`Example - ${L()} ${d()}`,b=new kt({id:R,createdTimestamp:Date.now(),name:x,desc:`${x} description.`,enabled:!0,favorited:e(),activated:!1,previous:void 0,testIds:[X(),X(),X()]});for(let S=0;S<$;S++)y.push(new xt({id:X(),createdTimestamp:_()+A["One Day"]*S,activated:!1,parentId:R,note:`Example sub-record note ${S}`,percent:h()}));u.push(b)};E(360),E(2),E(0),await Promise.all([O.importRecords(te.EXAMPLES,u),O.importRecords(te.EXAMPLE_RESULTS,y)]),t.info("Default examples loaded")}catch(u){t.error("Failed to load defaults",u)}})}async function M(){i("Load Default Tests","Would you like the load default Tests into the database?",U.INFO,"info",async()=>{try{const u=[],y=[],E=$=>{const R=X(),x=`Test - ${L()} ${d()}`,b=new Ct({id:R,createdTimestamp:Date.now(),name:x,desc:`${x} description.`,enabled:!0,favorited:e(),activated:!1,previous:void 0});for(let S=0;S<$;S++)y.push(new _t({id:X(),activated:!1,parentId:R,createdTimestamp:_()+A["One Day"]*S,note:`Test sub-record note ${S}`}));u.push(b)};E(1),E(0),await Promise.all([O.importRecords(te.TESTS,u),O.importRecords(te.TEST_RESULTS,y)]),t.info("Default tests loaded")}catch(u){t.error("Failed to load defaults",u)}})}return{onDefaultExamples:g,onDefaultTests:M}}const Yt={class:"q-mb-xl"},Jt=c("p",{class:"text-h6"},"Options",-1),Ht={class:"q-mb-md"},Zt=c("p",null,"Reset your app Settings to the defaults without impacting any of your data.",-1),ea={class:"q-mb-md"},ta=c("p",null," Welcome overlay provides helpful instructions on basic app usage on the Dashboard page. ",-1),aa={class:"q-mb-md"},la=c("p",null,"Show descriptions for records displayed on the Dashboard page.",-1),na=c("p",null,"Dark mode allows you to switch between a light or dark theme for the app.",-1),oa={class:"q-mb-xl"},sa=c("p",{class:"text-h6"},"Defaults",-1),ra=c("p",null,"Load default demostration records into the database. This action can be repeated.",-1),ia={class:"q-mb-md"},ua={class:"q-mb-xl"},ca=c("p",{class:"text-h6"},"Data Management",-1),da={class:"q-mb-md"},ma=c("p",null," Import data into the database from a JSON file. The app expects the data in the file to be structured the same as the exported version. ",-1),va={class:"q-mb-md"},fa=c("p",null," Export your data as a JSON file. Do this on a regularly basis so you have a backup of your data. ",-1),pa={class:"q-mb-xl"},ba=c("p",{class:"text-h6"},"Logging",-1),ga={class:"q-mb-md"},ha=c("p",null,"View the app logs to troubleshoot issues.",-1),ya={class:"q-mb-md"},Sa=c("p",null," Validate that the logging settings below are working as expected by generating some test logs. ",-1),ka={class:"q-mb-md"},xa=c("p",null,"Show Console Logs will display all log messages in the browser console.",-1),Ca={class:"q-mb-md"},_a=c("p",null,"Show Info Messages will display info level notifications.",-1),Da={class:"q-mb-md"},wa=c("p",null," Change log retention duration below. Logs older than the selected time will be deleted. This functions retroactivley. Expired log processing occurs every time the app is loaded. ",-1),Ta={class:"q-mx-lg"},La={class:"q-mb-xl"},Ea=c("p",{class:"text-h6 text-negative"},"DANGER ZONE",-1),$a=c("p",null," The following operations cannot be undone. Consider exporting your data before proceeding. ",-1),Fa={class:"q-mb-md"},Ma=c("p",null,"Delete the app logs from the database.",-1),Ra={class:"q-mb-md"},Oa=c("p",null,"Permanently delete all data from the database.",-1),Na={class:"q-mb-md"},Ia=c("p",null,"Delete the underlining database and all of its data (requires website reload).",-1),Ya=Dt({__name:"SettingsView",setup(t){wt({title:`${fe} - Settings`});const{log:i}=Fe(),{notify:L}=Tt(),{confirmDialog:d}=Me(),{onDefaultExamples:e,onDefaultTests:h}=Xt(),{goToLogsData:_}=It(),g=z([]),M=z(0),u=z(null),y=[A[A["One Week"]],A[A["One Month"]],A[A["Three Months"]],A[A["Six Months"]],A[A["One Year"]],A[A.Forever]],E=O.liveSettings().subscribe({next:s=>{var o;g.value=s;const l=(o=s.find(m=>m.key===P.LOG_RETENTION_DURATION))==null?void 0:o.value;M.value=y.findIndex(m=>m===A[l])},error:s=>{i.error("Error fetching live Settings",s)}});Lt(()=>{E.unsubscribe()});function $(){i.debug("This is a Debug Log",{name:"Debug"}),i.info("This is an Info Log",{name:"Info"}),i.warn("This is a Warning Log",{name:"Warning"}),i.error("This is an Error Log",{name:"Error"})}function R(s){var o,m;const l=((m=(o=s[0])==null?void 0:o.importFile)==null?void 0:m.name)||void 0;i.warn(`Cannot import"${l}`,s)}function x(){var s;d("Import",`Import backup data from ${(s=u==null?void 0:u.value)==null?void 0:s.name} and attempt to load records into the database from it? Please note that Logs are NOT imported.`,U.INFO,"info",async()=>{try{const l=JSON.parse(await u.value.text());if(i.silentDebug("backupData:",l),l.appName!==fe)throw new Error(`Cannot import data from the app ${l.appName}`);l.Settings.length>0&&await Promise.all(l.Settings.filter(o=>Object.values(P).includes(o.key)).map(async o=>await O.setSetting(o.key,o.value))),await Promise.all([Object.values(te).map(async o=>await O.importRecords(o,l[o]))]),u.value=null,i.info("Successfully imported available data")}catch(l){i.error("Error during import",l)}})}function b(){const s=fe.toLowerCase().split(" ").join("-"),l=new Date().toISOString().split("T")[0],o=`export-${s}-${l}.json`;d("Export",`Export all data into the file "${o}" as a backup?`,U.INFO,"info",async()=>{try{const m=await O.getBackupData();if(i.silentDebug("backupData:",m),Qt(o,JSON.stringify(m),{encoding:"UTF-8",mimeType:"application/json"})===!0)i.info("File downloaded successfully",{filename:o});else throw new Error("Browser denied file download")}catch(m){i.error("Export failed",m)}})}async function S(s){try{const l=y[s],o=A[l];await O.setSetting(P.LOG_RETENTION_DURATION,o),i.info("Updated log retention duration",{logDurationKey:l,logDuration:o,index:s})}catch(l){i.error("Log retention duration update failed",l)}}async function B(){d("Reset Settings","Would you like to reset your app Settings to the defaults? This does not impact your data.",U.REFRESH,"primary",async()=>{try{await O.clearSettings(),i.info("Successfully reset settings")}catch(s){i.error("Error reseting settings",s)}})}async function r(){d("Delete Logs","Permanetly delete all Logs from the database?",U.CLEAR,"negative",async()=>{try{await O.clearLogs(),i.info("Successfully deleted logs data")}catch(s){i.error("Error deleting Logs",s)}})}async function p(){d("Delete All","Permanetly delete all data from the database?",U.CLEAR,"negative",async()=>{try{await O.clearAll(),i.info("All data successfully deleted")}catch(s){i.error("Error deleting all data",s)}})}async function N(){d("Delete Database","Delete the underlining database? All data will be lost. You must reload the website after this action to reinitialize the database.",U.CLEAR,"negative",async()=>{try{await O.deleteDatabase(),L("Reload the website now",U.WARN,"warning")}catch(s){i.error("Database deletion failed",s)}})}function F(s){var l;return(l=g.value.find(o=>o.key===s))==null?void 0:l.value}return(s,l)=>(De(),we(Nt,{bannerIcon:T(U).SETTINGS,bannerTitle:"Settings"},{default:pe(()=>[c("section",Yt,[Jt,c("div",Ht,[Zt,I(W,{label:"Reset Settings",color:"primary",onClick:l[0]||(l[0]=o=>B())})]),c("div",ea,[ta,I(ee,{label:"Show Welcome Overlay","model-value":F(T(P).WELCOME_OVERLAY),"onUpdate:modelValue":l[1]||(l[1]=o=>T(O).setSetting(T(P).WELCOME_OVERLAY,o))},null,8,["model-value"])]),c("div",aa,[la,I(ee,{label:"Show Dashboard Descriptions","model-value":F(T(P).DASHBOARD_DESCRIPTIONS),"onUpdate:modelValue":l[2]||(l[2]=o=>T(O).setSetting(T(P).DASHBOARD_DESCRIPTIONS,o))},null,8,["model-value"])]),c("div",null,[na,I(ee,{label:"Dark Mode","model-value":F(T(P).DARK_MODE),"onUpdate:modelValue":l[3]||(l[3]=o=>T(O).setSetting(T(P).DARK_MODE,o))},null,8,["model-value"])])]),c("section",oa,[sa,c("div",null,[ra,c("div",ia,[I(W,{label:"Examples",color:"primary",onClick:l[4]||(l[4]=o=>T(e)())})]),c("div",null,[I(W,{label:"Tests",color:"primary",onClick:l[5]||(l[5]=o=>T(h)())})])])]),c("section",ua,[ca,c("div",da,[ma,I(Bt,{modelValue:u.value,"onUpdate:modelValue":l[8]||(l[8]=o=>u.value=o),dense:"",outlined:"",counter:"","bottom-slots":"",label:"File Select","max-file-size":T(Mt).MAX_FILE_SIZE,accept:"application/json",onRejected:R},{before:pe(()=>[I(W,{disable:!u.value,label:"Import",color:"primary",onClick:l[6]||(l[6]=o=>x())},null,8,["disable"])]),append:pe(()=>[u.value?(De(),we(Et,{key:0,name:T(U).CLOSE,class:"cursor-pointer",onClick:l[7]||(l[7]=$t(o=>u.value=null,["stop"]))},null,8,["name"])):Ft("",!0)]),_:1},8,["modelValue","max-file-size"])]),c("div",va,[fa,I(W,{label:"Export",color:"primary",onClick:l[9]||(l[9]=o=>b())})])]),c("section",pa,[ba,c("div",ga,[ha,I(W,{label:"Access Logs",color:"primary",onClick:l[10]||(l[10]=o=>T(_)())})]),c("div",ya,[Sa,I(W,{label:"Test Logger",color:"primary",onClick:l[11]||(l[11]=o=>$())})]),c("div",ka,[xa,I(ee,{label:"Show Console Logs","model-value":F(T(P).CONSOLE_LOGS),"onUpdate:modelValue":l[12]||(l[12]=o=>T(O).setSetting(T(P).CONSOLE_LOGS,o))},null,8,["model-value"])]),c("div",Ca,[_a,I(ee,{label:"Show Info Messages","model-value":F(T(P).INFO_MESSAGES),"onUpdate:modelValue":l[13]||(l[13]=o=>T(O).setSetting(T(P).INFO_MESSAGES,o))},null,8,["model-value"])]),c("div",Da,[wa,c("div",Ta,[I(Gt,{modelValue:M.value,"onUpdate:modelValue":l[14]||(l[14]=o=>M.value=o),"label-value":y[M.value],color:"primary",markers:"","label-always":"","switch-label-side":"",min:0,max:y.length-1,onChange:l[15]||(l[15]=o=>S(o))},null,8,["modelValue","label-value","max"])])])]),c("section",La,[Ea,$a,c("div",Fa,[Ma,I(W,{label:"Delete Logs",color:"negative",onClick:l[16]||(l[16]=o=>r())})]),c("div",Ra,[Oa,I(W,{label:"Delete All Data",color:"negative",onClick:l[17]||(l[17]=o=>p())})]),c("div",Na,[Ia,I(W,{label:"Delete Database",color:"negative",onClick:l[18]||(l[18]=o=>N())})])])]),_:1},8,["bannerIcon"]))}});export{Ya as default};
