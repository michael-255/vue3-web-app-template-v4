import{Q as y}from"./QSelect-9f531e4b.js";import{d as b,a as h,r as n,H as S,b as V,by as w,c as Q,e as x,w as r,f as i,Q as B,l as u,t as d,h as c,i as C}from"./index-5c6f171d.js";import{u as D}from"./action-0c87dcb5.js";import{u as R}from"./useRoutables-d76d4a7f.js";import"./QItem-288c9b0b.js";import"./QItemLabel-ebc93f5f.js";import"./QMenu-c2147a50.js";import"./selection-1d4fd26e.js";const k={class:"text-h6 q-mb-md"},M={class:"q-mb-md"},F=b({__name:"TestIdsInput",props:{field:null,label:null,desc:null,getDefault:{type:Function},validator:null,validationMessage:null},setup(o){const a=o,{routeType:m}=R(),{log:p}=h(),l=D(),f=n(null),s=n([]);S(async()=>{try{l.record[a.field]=l.record[a.field]??a.getDefault();const e=await V.getAll(m);s.value=e.map(t=>({value:t.id,label:`${t.name} (${w(t.id,4,"*")})`}))}catch(e){p.error("Error with test ids input",e)}});function g(){return async e=>await a.validator.isValid(e)||a.validationMessage}return(e,t)=>(Q(),x(C,null,{default:r(()=>[i(B,null,{default:r(()=>[u("p",k,d(o.label),1),u("p",M,d(o.desc),1),i(y,{modelValue:c(l).record[o.field],"onUpdate:modelValue":t[0]||(t[0]=v=>c(l).record[o.field]=v),ref_key:"inputRef",ref:f,rules:[g()],options:s.value,counter:"",multiple:"","emit-value":"","map-options":"","options-dense":"",dense:"",outlined:"",color:"primary"},null,8,["modelValue","rules","options"])]),_:1})]),_:1}))}});export{F as default};
