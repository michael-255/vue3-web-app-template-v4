import{c as _e,u as Ae,a as Se,g as we,b as $e,d as Te,r as R,e as M,o as Ce,h as z,f as Ee,Q as L,i as De,j as Ie,s as W,k as U,l as te,D as T,S as G,m as ue,n as w,p as H,w as _,q as u,t as de,v as A,x as O,y as n,A as J,z as Le,I as h,B as I,R as Oe,C as me,E as xe,F as ke,G as V,H as Z,J as ee,K as Y,L as fe,M as ve,N as Fe,O as K,P as Ve,T as ae,U as Re,V as F,W as qe,X as Ne,Y as Me}from"./index-d68b0eaf.js";import{_ as Pe}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-f78d365d.js";import{u as he}from"./ui-903b8f03.js";import{Q as ne}from"./QBadge-6f0136b3.js";import{t as re,u as He,a as Qe,i as Be}from"./index-16ba3e6e.js";import{Q as X,a as P}from"./QItem-6b6e34f3.js";import{Q as Ue}from"./QList-bc292fbf.js";import{Q as je}from"./QMenu-7efd4149.js";import{u as ze}from"./useDialogs-930d4a32.js";import{u as ge}from"./useRouting-2e4d5d3d.js";import"./selection-319d849e.js";import"./action-bacae855.js";import"./QSelect-eea99a9e.js";import"./QItemLabel-e1600f7f.js";import"./ErrorStates.vue_vue_type_script_setup_true_lang-f09fb14b.js";const We=_e({name:"QRating",props:{...Ae,...Se,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:t,emit:o}){const{proxy:{$q:r}}=we(),c=$e(e),v=Te(e),d=De(v),i=R(0);let g={};const b=M(()=>e.readonly!==!0&&e.disable!==!0),E=M(()=>`q-rating row inline items-center q-rating--${b.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),$=M(()=>{const l=Array.isArray(e.icon)===!0?e.icon.length:0,a=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,D=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,q=Array.isArray(e.color)===!0?e.color.length:0,N=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,s=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:l,icon:l>0?e.icon[l-1]:e.icon,selIconLen:a,selIcon:a>0?e.iconSelected[a-1]:e.iconSelected,halfIconLen:D,halfIcon:D>0?e.iconHalf[a-1]:e.iconHalf,colorLen:q,color:q>0?e.color[q-1]:e.color,selColorLen:N,selColor:N>0?e.colorSelected[N-1]:e.colorSelected,halfColorLen:s,halfColor:s>0?e.colorHalf[s-1]:e.colorHalf}}),S=M(()=>{if(typeof e.iconAriaLabel=="string"){const l=e.iconAriaLabel.length!==0?`${e.iconAriaLabel} `:"";return a=>`${l}${a}`}if(Array.isArray(e.iconAriaLabel)===!0){const l=e.iconAriaLabel.length;if(l>0)return a=>e.iconAriaLabel[Math.min(a,l)-1]}return(l,a)=>`${a} ${l}`}),x=M(()=>{const l=[],a=$.value,D=Math.ceil(e.modelValue),q=b.value===!0?0:null,N=e.iconHalf===void 0||D===e.modelValue?-1:D;for(let s=1;s<=e.max;s++){const k=i.value===0&&e.modelValue>=s||i.value>0&&i.value>=s,Q=N===s&&i.value<s,j=i.value>0&&(Q===!0?D:e.modelValue)>=s&&i.value<s,oe=Q===!0?s<=a.halfColorLen?e.colorHalf[s-1]:a.halfColor:a.selColor!==void 0&&k===!0?s<=a.selColorLen?e.colorSelected[s-1]:a.selColor:s<=a.colorLen?e.color[s-1]:a.color,pe=(Q===!0?s<=a.halfIconLen?e.iconHalf[s-1]:a.halfIcon:a.selIcon!==void 0&&(k===!0||j===!0)?s<=a.selIconLen?e.iconSelected[s-1]:a.selIcon:s<=a.iconLen?e.icon[s-1]:a.icon)||r.iconSet.rating.icon;l.push({name:(Q===!0?s<=a.halfIconLen?e.iconHalf[s-1]:a.halfIcon:a.selIcon!==void 0&&(k===!0||j===!0)?s<=a.selIconLen?e.iconSelected[s-1]:a.selIcon:s<=a.iconLen?e.icon[s-1]:a.icon)||r.iconSet.rating.icon,attrs:{tabindex:q,role:"radio","aria-checked":e.modelValue===s?"true":"false","aria-label":S.value(s,pe)},iconClass:"q-rating__icon"+(k===!0||Q===!0?" q-rating__icon--active":"")+(j===!0?" q-rating__icon--exselected":"")+(i.value===s?" q-rating__icon--hovered":"")+(oe!==void 0?` text-${oe}`:"")})}return l}),m=M(()=>{const l={role:"radiogroup"};return e.disable===!0&&(l["aria-disabled"]="true"),e.readonly===!0&&(l["aria-readonly"]="true"),l});function f(l){if(b.value===!0){const a=Ie(parseInt(l,10),1,parseInt(e.max,10)),D=e.noReset!==!0&&e.modelValue===a?0:a;D!==e.modelValue&&o("update:modelValue",D),i.value=0}}function y(l){b.value===!0&&(i.value=l)}function p(l,a){switch(l.keyCode){case 13:case 32:return f(a),W(l);case 37:case 40:return g[`rt${a-1}`]&&g[`rt${a-1}`].focus(),W(l);case 39:case 38:return g[`rt${a+1}`]&&g[`rt${a+1}`].focus(),W(l)}}function C(){i.value=0}return Ce(()=>{g={}}),()=>{const l=[];return x.value.forEach(({iconClass:a,name:D,attrs:q},N)=>{const s=N+1;l.push(z("div",{key:s,ref:k=>{g[`rt${s}`]=k},class:"q-rating__icon-container flex flex-center",...q,onClick(){f(s)},onMouseover(){y(s)},onMouseout:C,onFocus(){y(s)},onBlur:C,onKeyup(k){p(k,s)}},Ee(t[`tip-${s}`],[z(L,{class:a,name:D})])))}),e.name!==void 0&&e.disable!==!0&&d(l,"push"),z("div",{class:E.value,style:c.value,...m.value},l)}}}),Ye={class:"text-h6"},Ke=A("p",null,' Continue reading to learn more, or scroll to the bottom and click the "Start Using App" button to jump right in. ',-1),Xe={class:"q-mb-md"},Ge=A("p",null," You are currently on the Dashboard page. This page gives you quick access to the primary data you work with in the app. You can favorite items on the Dashboard by clicking the star icon in the top right corner of the item. This prioritizes the item to the top of the list. An example of the favorite icon button is below. ",-1),Je={class:"q-mb-md"},Ze=A("p",null," You can navigate through the app using the menu in the top left corner of the page. An example of the menu button is below. The menu gives you access to the primary data tables, Frequently Asked Questions (FAQ), Settings, and more. More advanced operations for the app are available on the Settings page. ",-1),et={class:"q-mb-md"},tt=A("p",null,"Click the button below when you are ready to get started.",-1),ot=U({__name:"WelcomeOverlay",setup(e){const{log:t}=te(),o=R(0),r=R(!1),c=T.liveSettings().subscribe({next:d=>{var i;r.value=(i=d.find(g=>g.key===G.WELCOME_OVERLAY))==null?void 0:i.value},error:d=>{t.error("Error fetching live Settings",d)}});ue(()=>{c.unsubscribe()});async function v(){await T.setSetting(G.WELCOME_OVERLAY,!1)}return(d,i)=>(w(),H(xe,{modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=g=>r.value=g),persistent:""},{default:_(()=>[u(me,{flat:"",square:""},{default:_(()=>[u(de,null,{default:_(()=>[A("p",Ye,"Welcome to "+O(n(J)),1),A("p",null,O(n(Le)),1),Ke,A("div",Xe,[Ge,u(We,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=g=>o.value=g),max:1,icon:n(h).FAVORITE_OFF,"icon-selected":n(h).FAVORITE_ON,color:"warning",size:"md"},null,8,["modelValue","icon","icon-selected"])]),A("div",Je,[Ze,u(I,{disable:"",color:"primary",class:"q-px-sm",icon:n(h).MENU},null,8,["icon"])]),A("div",et,[A("p",null," Hope you find "+O(n(J))+" useful. Please consider donating to help me continue to create and maintain apps like this. Thank you! ",1),u(I,{color:"warning",label:"Donate",to:{name:n(Oe).DONATE},icon:n(h).DONATE},null,8,["to","icon"])]),A("div",null,[tt,u(I,{"no-caps":"",label:"Start Using App",class:"full-width",size:"lg",color:"positive",icon:n(h).READY,onClick:i[1]||(i[1]=g=>v())},null,8,["icon"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),at=Be?window:void 0;function nt(e,t={}){const{immediate:o=!0,window:r=at}=t,c=R(!1);let v=0,d=null;function i(E){if(!c.value||!r)return;const $=E-(v||E);e({delta:$,timestamp:E}),v=E,d=r.requestAnimationFrame(i)}function g(){!c.value&&r&&(c.value=!0,d=r.requestAnimationFrame(i))}function b(){c.value=!1,d!=null&&r&&(r.cancelAnimationFrame(d),d=null)}return o&&g(),Qe(b),{isActive:ke(c),pause:b,resume:g}}var rt=Object.defineProperty,le=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,ie=(e,t,o)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,st=(e,t)=>{for(var o in t||(t={}))lt.call(t,o)&&ie(e,o,t[o]);if(le)for(var o of le(t))it.call(t,o)&&ie(e,o,t[o]);return e};function ct(e={}){const{controls:t=!1,interval:o="requestAnimationFrame"}=e,r=R(new Date),c=()=>r.value=new Date,v=o==="requestAnimationFrame"?nt(c,{immediate:!0}):He(c,o,{immediate:!0});return t?st({now:r},v):r}var ut=Object.defineProperty,B=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,se=(e,t,o)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,dt=(e,t)=>{for(var o in t||(t={}))be.call(t,o)&&se(e,o,t[o]);if(B)for(var o of B(t))ye.call(t,o)&&se(e,o,t[o]);return e},mt=(e,t)=>{var o={};for(var r in e)be.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&B)for(var r of B(e))t.indexOf(r)<0&&ye.call(e,r)&&(o[r]=e[r]);return o};const ft=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],vt={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function ht(e){return e.toISOString().slice(0,10)}function gt(e,t={}){const{controls:o=!1,updateInterval:r=3e4}=t,c=ct({interval:r,controls:!0}),{now:v}=c,d=mt(c,["now"]),i=M(()=>bt(new Date(re(e)),t,re(v)));return o?dt({timeAgo:i},d):i}function bt(e,t={},o=Date.now()){var r;const{max:c,messages:v=vt,fullDateFormatter:d=ht,units:i=ft,showSecond:g=!1,rounding:b="round"}=t,E=typeof b=="number"?y=>+y.toFixed(b):Math[b],$=+o-+e,S=Math.abs($);function x(y,p){return E(Math.abs(y)/p.value)}function m(y,p){const C=x(y,p),l=y>0,a=f(p.name,C,l);return f(l?"past":"future",a,l)}function f(y,p,C){const l=v[y];return typeof l=="function"?l(p,C):l.replace("{0}",p.toString())}if(S<6e4&&!g)return v.justNow;if(typeof c=="number"&&S>c)return d(new Date(e));if(typeof c=="string"){const y=(r=i.find(p=>p.name===c))==null?void 0:r.max;if(y&&S>y)return d(new Date(e))}for(const[y,p]of i.entries()){if(x($,p)<=0&&i[y-1])return m($,i[y-1]);if(S<p.max)return m($,p)}return v.invalid}const yt={class:"absolute-top-right q-ma-xs"},pt={key:1},_t=U({__name:"DashboardRecordCardMenu",props:{parentTable:{},record:{}},setup(e){const t=e,o=he(),{log:r}=te(),{goToEdit:c}=ge(),{confirmDialog:v,dismissDialog:d,inspectDialog:i,chartsDialog:g}=ze();async function b(m){d("Previous Note",m,h.NOTE)}async function E(m,f,y){const p=y?"Unfavorite":"Favorite",C=`Do you want to ${p.toLocaleLowerCase()} ${f}?`,l=y?h.FAVORITE_OFF:h.FAVORITE_ON;v(p,C,l,"info",async()=>{try{await T.toggleFavorite(t.parentTable,m),r.info(`${f} unfavorited`,{id:m,name:f})}catch(a){r.error("Unfavorite update failed",a)}})}async function $(m){const f=await T.getRecord(t.parentTable,m);f?i(f,t.parentTable):r.error("Failed to find record",{id:m})}async function S(m,f){g(f,m)}function x(m,f){v("Deactivate Record","Would you like to deactivate this record?",h.CANCEL,"warning",async()=>{try{await T.toggleActive(m,f),r.info("Deactivated record",{table:m,id:f})}catch(y){r.error("Deactivation failed",y)}})}return(m,f)=>{var y;return w(),V("div",yt,[Z(u(L,{name:n(h).NOTE,color:"primary",size:"md",class:"cursor-pointer q-mr-xs",onClick:f[0]||(f[0]=p=>{var C,l;return b(((l=(C=m.record)==null?void 0:C.previous)==null?void 0:l.note)||"")})},null,8,["name"]),[[ee,(y=m.record.previous)==null?void 0:y.note]]),m.record.activated?(w(),H(I,{key:0,round:"",flat:"",color:"warning",icon:n(h).CANCEL,onClick:f[1]||(f[1]=p=>x(m.parentTable,m.record.id))},null,8,["icon"])):(w(),V("span",pt,[u(L,{name:m.record.favorited?n(h).FAVORITE_ON:n(h).FAVORITE_OFF,color:m.record.favorited?"warning":"grey",size:"md",class:"cursor-pointer",onClick:f[2]||(f[2]=p=>E(m.record.id,m.record.name,m.record.favorited))},null,8,["name","color"])])),u(I,{round:"",flat:"",icon:n(h).MENU_VERTICAL},{default:_(()=>[u(je,{"auto-close":"",anchor:"top right","transition-show":"flip-right","transition-hide":"flip-left"},{default:_(()=>[u(Ue,null,{default:_(()=>[u(X,{clickable:"",onClick:f[3]||(f[3]=p=>S(m.parentTable,m.record.id))},{default:_(()=>[u(P,{avatar:""},{default:_(()=>[u(L,{color:"accent",name:n(h).CHARTS},null,8,["name"])]),_:1}),u(P,null,{default:_(()=>[Y("Charts")]),_:1})]),_:1}),u(X,{clickable:"",onClick:f[4]||(f[4]=p=>$(m.record.id))},{default:_(()=>[u(P,{avatar:""},{default:_(()=>[u(L,{color:"primary",name:n(h).INSPECT},null,8,["name"])]),_:1}),u(P,null,{default:_(()=>[Y("Inspect")]),_:1})]),_:1}),u(X,{disable:m.record.activated,clickable:"",onClick:f[5]||(f[5]=p=>n(c)(n(o).dashboardSelection,m.record.id))},{default:_(()=>[u(P,{avatar:""},{default:_(()=>[u(L,{color:"warning",name:n(h).EDIT},null,8,["name"])]),_:1}),u(P,null,{default:_(()=>[Y("Edit")]),_:1})]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["icon"])])}}}),At={class:"row justify-center q-gutter-md"},St=A("span",{class:"text-caption q-ml-xs"},"Active",-1),wt={class:"text-h6"},$t={key:1},Tt={class:"text-caption q-ml-xs"},Ct={key:2},Et={class:"text-caption q-ml-xs"},Dt={class:"col-12 text-grey text-center text-body1"},ce=U({__name:"DashboardRecordCardList",props:{parentTable:{},records:{},showDescriptions:{type:Boolean}},setup(e){const{goToCreate:t,goToActive:o}=ge();async function r(c,v){await T.toggleActive(c,v),o()}return(c,v)=>(w(),V("div",At,[(w(!0),V(fe,null,ve(c.records,d=>(w(),V("div",{key:d.id,class:"col-xs-12 col-sm-12 col-md-12 col-lg-5"},[u(me,{class:"column full-height"},{default:_(()=>[u(de,{class:"col"},{default:_(()=>{var i,g;return[u(_t,{parentTable:c.parentTable,record:d},null,8,["parentTable","record"]),d.activated?(w(),H(ne,{key:0,rounded:"",color:"warning",class:"absolute-top-left q-py-none",style:{left:"-4px",top:"-6px"}},{default:_(()=>[u(L,{name:n(h).LOCK},null,8,["name"]),St]),_:1})):K("",!0),A("p",wt,O(d.name),1),c.showDescriptions?(w(),V("p",$t,O(d.desc),1)):K("",!0),u(ne,{rounded:"",color:"secondary",class:"q-py-none"},{default:_(()=>{var b;return[u(L,{name:n(h).PREVIOUS},null,8,["name"]),A("span",Tt,O(n(gt)(((b=d.previous)==null?void 0:b.createdTimestamp)||"").value||"No previous records"),1)]}),_:2},1024),(i=d.previous)!=null&&i.createdTimestamp?(w(),V("div",Ct,[u(L,{name:n(h).CALENDAR_CHECK},null,8,["name"]),A("span",Et,O(n(Ve)((g=d.previous)==null?void 0:g.createdTimestamp)),1)])):K("",!0)]}),_:2},1024),d.activated?(w(),H(ae,{key:0,class:"col-auto"},{default:_(()=>[u(I,{label:"Go To Active",color:"positive",class:"full-width",icon:n(h).UP,onClick:v[0]||(v[0]=i=>n(o)())},null,8,["icon"])]),_:1})):(w(),H(ae,{key:1,class:"col-auto"},{default:_(()=>[u(I,{label:`Attach ${n(T).getLabel(n(T).getChildTable(c.parentTable),"singular")}`,color:"primary",class:"full-width q-mb-sm",icon:n(h).ATTACH,onClick:i=>n(t)(n(T).getChildTable(c.parentTable),d.id)},null,8,["label","icon","onClick"]),u(I,{label:"Activate",color:"primary",class:"full-width",icon:n(h).READY,onClick:i=>r(c.parentTable,d.id)},null,8,["icon","onClick"])]),_:2},1024))]),_:2},1024)]))),128)),A("div",Dt,O(n(Fe)(c.records)),1),u(I,{color:"positive",icon:n(h).CREATE,label:`Create ${n(T).getLabel(c.parentTable,"singular")}`,onClick:v[1]||(v[1]=d=>n(t)(c.parentTable))},null,8,["icon","label"])]))}}),It={class:"q-mb-md"},Lt={class:"text-center text-body1"},Ot={class:"row justify-center"},Wt=U({__name:"DashboardView",setup(e){Re({title:`${J} - Dashboard`});const t=he(),{log:o}=te(),r=[{value:F.EXAMPLES,label:qe.getLabel("plural"),icon:h.EXAMPLES},{value:F.TESTS,label:Ne.getLabel("plural"),icon:h.TESTS}],c=R(!1),v=R([]),d=R([]),i=T.liveDashboardData(F.EXAMPLES).subscribe({next:b=>v.value=b,error:b=>o.error("Error fetching live Examples",b)}),g=T.liveDashboardData(F.TESTS).subscribe({next:b=>d.value=b,error:b=>o.error("Error fetching live Tests",b)});return Me(async()=>{c.value=!!await T.getSettingValue(G.DASHBOARD_DESCRIPTIONS)}),ue(()=>{i.unsubscribe(),g.unsubscribe()}),(b,E)=>(w(),H(Pe,{bannerIcon:n(h).DASHBOARD,bannerTitle:"Dashboard"},{default:_(()=>{var $;return[u(ot),A("section",It,[A("p",Lt,O(($=r.find(S=>S.value===n(t).dashboardSelection))==null?void 0:$.label),1),A("div",Ot,[(w(),V(fe,null,ve(r,(S,x)=>u(I,{key:x,round:"",size:"lg",class:"q-mb-xs q-mx-xs",icon:S.icon,color:n(t).dashboardSelection===S.value?"info":"grey",onClick:m=>n(t).dashboardSelection=S.value},null,8,["icon","color","onClick"])),64))])]),A("section",null,[Z(u(ce,{parentTable:n(F).EXAMPLES,records:v.value,showDescriptions:c.value},null,8,["parentTable","records","showDescriptions"]),[[ee,n(t).dashboardSelection===n(F).EXAMPLES]]),Z(u(ce,{parentTable:n(F).TESTS,records:d.value,showDescriptions:c.value},null,8,["parentTable","records","showDescriptions"]),[[ee,n(t).dashboardSelection===n(F).TESTS]])])]}),_:1},8,["bannerIcon"]))}});export{Wt as default};
