import{ad as d,bF as Q,bG as Ot,T as ut,aA as yt,ae as gt,U as ot,af as _t,aN as bt,r as A,as as Tt,bH as st,bI as kt,bJ as Yt,bK as at,ag as re,bL as je,a0 as lt,Y as r,aT as Me,Z as qt,aM as wt,B,av as At,bu as It,aK as jt,_ as Bt,n as De,bM as Et,bN as Pt,bO as pt,bP as Ft,d as $t,G as Nt,c as ct,bA as Kt,v as Lt,f as dt,h as vt,w as ee,j as L,Q as Qt,p as Je,K as Rt,x as zt,t as Ut,l as ze,I as Ue,i as Wt,N as Jt,m as Gt}from"./index-85cdcb14.js";import{u as Xt,a as Zt,Q as ea}from"./QMenu-91b59cc6.js";import{T as ta}from"./TouchPan-af86e847.js";import{u as aa}from"./action-c39eed1c.js";import"./selection-fec6dfc1.js";function na(){const t=new Map;return{getCache:function(_,w){return t[_]===void 0?t[_]=w:t[_]},getCacheWithFn:function(_,w){return t[_]===void 0?t[_]=w():t[_]}}}const la=["gregorian","persian"],Ct={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:t=>la.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},xt=["update:modelValue"];function te(t){return t.year+"/"+Q(t.month)+"/"+Q(t.day)}function Mt(t,_){const w=d(()=>t.disable!==!0&&t.readonly!==!0),T=d(()=>w.value===!0?0:-1),k=d(()=>{const g=[];return t.color!==void 0&&g.push(`bg-${t.color}`),t.textColor!==void 0&&g.push(`text-${t.textColor}`),g.join(" ")});function N(){return t.locale!==void 0?{..._.lang.date,...t.locale}:_.lang.date}function M(g){const V=new Date,O=g===!0?null:0;if(t.calendar==="persian"){const R=Ot(V);return{year:R.jy,month:R.jm,day:R.jd}}return{year:V.getFullYear(),month:V.getMonth()+1,day:V.getDate(),hour:O,minute:O,second:O,millisecond:O}}return{editable:w,tabindex:T,headerClass:k,getLocale:N,getCurrentDate:M}}const me=20,ua=["Calendar","Years","Months"],ft=t=>ua.includes(t),nt=t=>/^-?[\d]+\/[0-1]\d$/.test(t),xe=" â€” ";function ie(t){return t.year+"/"+Q(t.month)}const oa=ut({name:"QDate",props:{...Ct,...yt,...gt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:nt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:nt},navigationMaxYearMonth:{type:String,validator:nt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:ft}},emits:[...xt,"rangeStart","rangeEnd","navigation"],setup(t,{slots:_,emit:w}){const{proxy:T}=ot(),{$q:k}=T,N=_t(t,k),{getCache:M}=na(),{tabindex:g,headerClass:V,getLocale:O,getCurrentDate:R}=Mt(t,k);let z;const ae=bt(t),ne=wt(ae),le=A(null),C=A(Qe()),x=A(O()),Be=d(()=>Qe()),he=d(()=>O()),f=d(()=>R()),u=A(l(C.value,x.value)),q=A(t.defaultView),Ee=k.lang.rtl===!0?"right":"left",ue=A(Ee.value),E=A(Ee.value),Ve=u.value.year,se=A(Ve-Ve%me-(Ve<0?me:0)),P=A(null),ce=d(()=>{const e=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${t.minimal===!0?"minimal":"standard"}`+(N.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),U=d(()=>t.color||"primary"),W=d(()=>t.textColor||"white"),p=d(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),X=d(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),j=d(()=>X.value.filter(e=>typeof e=="string").map(e=>Ae(e,C.value,x.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),J=d(()=>{const e=a=>Ae(a,C.value,x.value);return X.value.filter(a=>Tt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:e(a.from),to:e(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),ye=d(()=>t.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const a=st(e.year,e.month,e.day);return new Date(a.gy,a.gm-1,a.gd)}),Se=d(()=>t.calendar==="persian"?te:(e,a,n)=>kt(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a===void 0?C.value:a,n===void 0?x.value:n,e.year,e.timezoneOffset)),oe=d(()=>j.value.length+J.value.reduce((e,a)=>e+1+Yt(ye.value(a.to),ye.value(a.from)),0)),de=d(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length>0)return t.title;if(P.value!==null){const n=P.value.init,s=ye.value(n);return x.value.daysShort[s.getDay()]+", "+x.value.monthsShort[n.month-1]+" "+n.day+xe+"?"}if(oe.value===0)return xe;if(oe.value>1)return`${oe.value} ${x.value.pluralDay}`;const e=j.value[0],a=ye.value(e);return isNaN(a.valueOf())===!0?xe:x.value.headerTitle!==void 0?x.value.headerTitle(a,e):x.value.daysShort[a.getDay()]+", "+x.value.monthsShort[e.month-1]+" "+e.day}),Pe=d(()=>j.value.concat(J.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),He=d(()=>j.value.concat(J.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),pe=d(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length>0)return t.subtitle;if(oe.value===0)return xe;if(oe.value>1){const e=Pe.value,a=He.value,n=x.value.monthsShort;return n[e.month-1]+(e.year!==a.year?" "+e.year+xe+n[a.month-1]+" ":e.month!==a.month?xe+n[a.month-1]:"")+" "+a.year}return j.value[0].year}),ge=d(()=>{const e=[k.iconSet.datetime.arrowLeft,k.iconSet.datetime.arrowRight];return k.lang.rtl===!0?e.reverse():e}),_e=d(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):x.value.firstDayOfWeek),Oe=d(()=>{const e=x.value.daysShort,a=_e.value;return a>0?e.slice(a,7).concat(e.slice(0,a)):e}),G=d(()=>{const e=u.value;return t.calendar!=="persian"?new Date(e.year,e.month,0).getDate():at(e.year,e.month)}),Fe=d(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),Y=d(()=>{if(t.navigationMinYearMonth===void 0)return null;const e=t.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),I=d(()=>{if(t.navigationMaxYearMonth===void 0)return null;const e=t.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Te=d(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Y.value!==null&&Y.value.year>=u.value.year&&(e.year.prev=!1,Y.value.year===u.value.year&&Y.value.month>=u.value.month&&(e.month.prev=!1)),I.value!==null&&I.value.year<=u.value.year&&(e.year.next=!1,I.value.year===u.value.year&&I.value.month<=u.value.month&&(e.month.next=!1)),e}),be=d(()=>{const e={};return j.value.forEach(a=>{const n=ie(a);e[n]===void 0&&(e[n]=[]),e[n].push(a.day)}),e}),$e=d(()=>{const e={};return J.value.forEach(a=>{const n=ie(a.from),s=ie(a.to);if(e[n]===void 0&&(e[n]=[]),e[n].push({from:a.from.day,to:n===s?a.to.day:void 0,range:a}),n<s){let i;const{year:b,month:c}=a.from,m=c<12?{year:b,month:c+1}:{year:b+1,month:1};for(;(i=ie(m))<=s;)e[i]===void 0&&(e[i]=[]),e[i].push({from:void 0,to:i===s?a.to.day:void 0,range:a}),m.month++,m.month>12&&(m.year++,m.month=1)}}),e}),ve=d(()=>{if(P.value===null)return;const{init:e,initHash:a,final:n,finalHash:s}=P.value,[i,b]=a<=s?[e,n]:[n,e],c=ie(i),m=ie(b);if(c!==F.value&&m!==F.value)return;const D={};return c===F.value?(D.from=i.day,D.includeFrom=!0):D.from=1,m===F.value?(D.to=b.day,D.includeTo=!0):D.to=G.value,D}),F=d(()=>ie(u.value)),Ge=d(()=>{const e={};if(t.options===void 0){for(let n=1;n<=G.value;n++)e[n]=!0;return e}const a=typeof t.options=="function"?t.options:n=>t.options.includes(n);for(let n=1;n<=G.value;n++){const s=F.value+"/"+Q(n);e[n]=a(s)}return e}),Xe=d(()=>{const e={};if(t.events===void 0)for(let a=1;a<=G.value;a++)e[a]=!1;else{const a=typeof t.events=="function"?t.events:n=>t.events.includes(n);for(let n=1;n<=G.value;n++){const s=F.value+"/"+Q(n);e[n]=a(s)===!0&&Fe.value(s)}}return e}),ke=d(()=>{let e,a;const{year:n,month:s}=u.value;if(t.calendar!=="persian")e=new Date(n,s-1,1),a=new Date(n,s-1,0).getDate();else{const i=st(n,s,1);e=new Date(i.gy,i.gm-1,i.gd);let b=s-1,c=n;b===0&&(b=12,c--),a=at(c,b)}return{days:e.getDay()-_e.value-1,endDay:a}}),fe=d(()=>{const e=[],{days:a,endDay:n}=ke.value,s=a<0?a+7:a;if(s<6)for(let c=n-s;c<=n;c++)e.push({i:c,fill:!0});const i=e.length;for(let c=1;c<=G.value;c++){const m={i:c,event:Xe.value[c],classes:[]};Ge.value[c]===!0&&(m.in=!0,m.flat=!0),e.push(m)}if(be.value[F.value]!==void 0&&be.value[F.value].forEach(c=>{const m=i+c-1;Object.assign(e[m],{selected:!0,unelevated:!0,flat:!1,color:U.value,textColor:W.value})}),$e.value[F.value]!==void 0&&$e.value[F.value].forEach(c=>{if(c.from!==void 0){const m=i+c.from-1,D=i+(c.to||G.value)-1;for(let Ie=m;Ie<=D;Ie++)Object.assign(e[Ie],{range:c.range,unelevated:!0,color:U.value,textColor:W.value});Object.assign(e[m],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(e[D],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const m=i+c.to-1;for(let D=i;D<=m;D++)Object.assign(e[D],{range:c.range,unelevated:!0,color:U.value,textColor:W.value});Object.assign(e[m],{flat:!1,rangeTo:!0})}else{const m=i+G.value-1;for(let D=i;D<=m;D++)Object.assign(e[D],{range:c.range,unelevated:!0,color:U.value,textColor:W.value})}}),ve.value!==void 0){const c=i+ve.value.from-1,m=i+ve.value.to-1;for(let D=c;D<=m;D++)e[D].color=U.value,e[D].editRange=!0;ve.value.includeFrom===!0&&(e[c].editRangeFrom=!0),ve.value.includeTo===!0&&(e[m].editRangeTo=!0)}u.value.year===f.value.year&&u.value.month===f.value.month&&(e[i+f.value.day-1].today=!0);const b=e.length%7;if(b>0){const c=7-b;for(let m=1;m<=c;m++)e.push({i:m,fill:!0})}return e.forEach(c=>{let m="q-date__calendar-item ";c.fill===!0?m+="q-date__calendar-item--fill":(m+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(m+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(m+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(m+=` text-${c.color}`)),c.classes=m}),e}),qe=d(()=>t.disable===!0?{"aria-disabled":"true"}:t.readonly===!0?{"aria-readonly":"true"}:{});re(()=>t.modelValue,e=>{if(z===e)z=0;else{const a=l(C.value,x.value);$(a.year,a.month,a)}}),re(q,()=>{le.value!==null&&T.$el.contains(document.activeElement)===!0&&le.value.focus()}),re(()=>u.value.year+"|"+u.value.month,()=>{w("navigation",{year:u.value.year,month:u.value.month})}),re(Be,e=>{rt(e,x.value,"mask"),C.value=e}),re(he,e=>{rt(C.value,e,"locale"),x.value=e});function Ne(){const e=f.value,a=be.value[ie(e)];(a===void 0||a.includes(e.day)===!1)&&Ze(e),Z(e.year,e.month)}function Ke(e){ft(e)===!0&&(q.value=e)}function Le(e,a){["month","year"].includes(e)&&(e==="month"?v:h)(a===!0?-1:1)}function Z(e,a){q.value="Calendar",$(e,a)}function Ye(e,a){if(t.range===!1||!e){P.value=null;return}const n=Object.assign({...u.value},e),s=a!==void 0?Object.assign({...u.value},a):n;P.value={init:n,initHash:te(n),final:s,finalHash:te(s)},Z(n.year,n.month)}function Qe(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Ae(e,a,n){return je(e,a,n,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function l(e,a){const n=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(n.length===0)return o();const s=n[n.length-1],i=Ae(s.from!==void 0?s.from:s,e,a);return i.dateHash===null?o():i}function o(){let e,a;if(t.defaultYearMonth!==void 0){const n=t.defaultYearMonth.split("/");e=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=f.value!==void 0?f.value:R();e=n.year,a=n.month}return{year:e,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+Q(a)+"/01"}}function v(e){let a=u.value.year,n=Number(u.value.month)+e;n===13?(n=1,a++):n===0&&(n=12,a--),$(a,n),p.value===!0&&we("month")}function h(e){const a=Number(u.value.year)+e;$(a,u.value.month),p.value===!0&&we("year")}function S(e){$(e,u.value.month),q.value=t.defaultView==="Years"?"Months":"Calendar",p.value===!0&&we("year")}function K(e){$(u.value.year,e),q.value="Calendar",p.value===!0&&we("month")}function y(e,a){const n=be.value[a];(n!==void 0&&n.includes(e.day)===!0?et:Ze)(e)}function H(e){return{year:e.year,month:e.month,day:e.day}}function $(e,a,n){if(Y.value!==null&&e<=Y.value.year&&(e=Y.value.year,a<Y.value.month&&(a=Y.value.month)),I.value!==null&&e>=I.value.year&&(e=I.value.year,a>I.value.month&&(a=I.value.month)),n!==void 0){const{hour:i,minute:b,second:c,millisecond:m,timezoneOffset:D,timeHash:Ie}=n;Object.assign(u.value,{hour:i,minute:b,second:c,millisecond:m,timezoneOffset:D,timeHash:Ie})}const s=e+"/"+Q(a)+"/01";s!==u.value.dateHash&&(ue.value=u.value.dateHash<s==(k.lang.rtl!==!0)?"left":"right",e!==u.value.year&&(E.value=ue.value),lt(()=>{se.value=e-e%me-(e<0?me:0),Object.assign(u.value,{year:e,month:a,day:1,dateHash:s})}))}function Re(e,a,n){const s=e!==null&&e.length===1&&t.multiple===!1?e[0]:e;z=s;const{reason:i,details:b}=it(a,n);w("update:modelValue",s,i,b)}function we(e){const a=j.value[0]!==void 0&&j.value[0].dateHash!==null?{...j.value[0]}:{...u.value};lt(()=>{a.year=u.value.year,a.month=u.value.month;const n=t.calendar!=="persian"?new Date(a.year,a.month,0).getDate():at(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const s=Ce(a);z=s;const{details:i}=it("",a);w("update:modelValue",s,e,i)})}function it(e,a){return a.from!==void 0?{reason:`${e}-range`,details:{...H(a.target),from:H(a.from),to:H(a.to)}}:{reason:`${e}-day`,details:H(a)}}function Ce(e,a,n){return e.from!==void 0?{from:Se.value(e.from,a,n),to:Se.value(e.to,a,n)}:Se.value(e,a,n)}function Ze(e){let a;if(t.multiple===!0)if(e.from!==void 0){const n=te(e.from),s=te(e.to),i=j.value.filter(c=>c.dateHash<n||c.dateHash>s),b=J.value.filter(({from:c,to:m})=>m.dateHash<n||c.dateHash>s);a=i.concat(b).concat(e).map(c=>Ce(c))}else{const n=X.value.slice();n.push(Ce(e)),a=n}else a=Ce(e);Re(a,"add",e)}function et(e){if(t.noUnset===!0)return;let a=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const n=Ce(e);e.from!==void 0?a=t.modelValue.filter(s=>s.from!==void 0?s.from!==n.from&&s.to!==n.to:!0):a=t.modelValue.filter(s=>s!==n),a.length===0&&(a=null)}Re(a,"remove",e)}function rt(e,a,n){const s=j.value.concat(J.value).map(i=>Ce(i,e,a)).filter(i=>i.from!==void 0?i.from.dateHash!==null&&i.to.dateHash!==null:i.dateHash!==null);w("update:modelValue",(t.multiple===!0?s:s[0])||null,n)}function Dt(){if(t.minimal!==!0)return r("div",{class:"q-date__header "+V.value},[r("div",{class:"relative-position"},[r(Me,{name:"q-transition--fade"},()=>r("div",{key:"h-yr-"+pe.value,class:"q-date__header-subtitle q-date__header-link "+(q.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...M("vY",{onClick(){q.value="Years"},onKeyup(e){e.keyCode===13&&(q.value="Years")}})},[pe.value]))]),r("div",{class:"q-date__header-title relative-position flex no-wrap"},[r("div",{class:"relative-position col"},[r(Me,{name:"q-transition--fade"},()=>r("div",{key:"h-sub"+de.value,class:"q-date__header-title-label q-date__header-link "+(q.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...M("vC",{onClick(){q.value="Calendar"},onKeyup(e){e.keyCode===13&&(q.value="Calendar")}})},[de.value]))]),t.todayBtn===!0?r(B,{class:"q-date__header-today self-start",icon:k.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:g.value,onClick:Ne}):null])])}function tt({label:e,type:a,key:n,dir:s,goTo:i,boundaries:b,cls:c}){return[r("div",{class:"row items-center q-date__arrow"},[r(B,{round:!0,dense:!0,size:"sm",flat:!0,icon:ge.value[0],tabindex:g.value,disable:b.prev===!1,...M("go-#"+a,{onClick(){i(-1)}})})]),r("div",{class:"relative-position overflow-hidden flex flex-center"+c},[r(Me,{name:"q-transition--jump-"+s},()=>r("div",{key:n},[r(B,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:g.value,...M("view#"+a,{onClick:()=>{q.value=a}})})]))]),r("div",{class:"row items-center q-date__arrow"},[r(B,{round:!0,dense:!0,size:"sm",flat:!0,icon:ge.value[1],tabindex:g.value,disable:b.next===!1,...M("go+#"+a,{onClick(){i(1)}})})])]}const Vt={Calendar:()=>[r("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[r("div",{class:"q-date__navigation row items-center no-wrap"},tt({label:x.value.months[u.value.month-1],type:"Months",key:u.value.month,dir:ue.value,goTo:v,boundaries:Te.value.month,cls:" col"}).concat(tt({label:u.value.year,type:"Years",key:u.value.year,dir:E.value,goTo:h,boundaries:Te.value.year,cls:""}))),r("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Oe.value.map(e=>r("div",{class:"q-date__calendar-item"},[r("div",e)]))),r("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[r(Me,{name:"q-transition--slide-"+ue.value},()=>r("div",{key:F.value,class:"q-date__calendar-days fit"},fe.value.map(e=>r("div",{class:e.classes},[e.in===!0?r(B,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:g.value,...M("day#"+e.i,{onClick:()=>{St(e.i)},onMouseover:()=>{Ht(e.i)}})},e.event!==!1?()=>r("div",{class:"q-date__event bg-"+e.event}):null):r("div",""+e.i)]))))])])],Months(){const e=u.value.year===f.value.year,a=s=>Y.value!==null&&u.value.year===Y.value.year&&Y.value.month>s||I.value!==null&&u.value.year===I.value.year&&I.value.month<s,n=x.value.monthsShort.map((s,i)=>{const b=u.value.month===i+1;return r("div",{class:"q-date__months-item flex flex-center"},[r(B,{class:e===!0&&f.value.month===i+1?"q-date__today":null,flat:b!==!0,label:s,unelevated:b,color:b===!0?U.value:null,textColor:b===!0?W.value:null,tabindex:g.value,disable:a(i+1),...M("month#"+i,{onClick:()=>{K(i+1)}})})])});return t.yearsInMonthView===!0&&n.unshift(r("div",{class:"row no-wrap full-width"},[tt({label:u.value.year,type:"Years",key:u.value.year,dir:E.value,goTo:h,boundaries:Te.value.year,cls:" col"})])),r("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const e=se.value,a=e+me,n=[],s=i=>Y.value!==null&&Y.value.year>i||I.value!==null&&I.value.year<i;for(let i=e;i<=a;i++){const b=u.value.year===i;n.push(r("div",{class:"q-date__years-item flex flex-center"},[r(B,{key:"yr"+i,class:f.value.year===i?"q-date__today":null,flat:!b,label:i,dense:!0,unelevated:b,color:b===!0?U.value:null,textColor:b===!0?W.value:null,tabindex:g.value,disable:s(i),...M("yr#"+i,{onClick:()=>{S(i)}})})]))}return r("div",{class:"q-date__view q-date__years flex flex-center"},[r("div",{class:"col-auto"},[r(B,{round:!0,dense:!0,flat:!0,icon:ge.value[0],tabindex:g.value,disable:s(e),...M("y-",{onClick:()=>{se.value-=me}})})]),r("div",{class:"q-date__years-content col self-stretch row items-center"},n),r("div",{class:"col-auto"},[r(B,{round:!0,dense:!0,flat:!0,icon:ge.value[1],tabindex:g.value,disable:s(a),...M("y+",{onClick:()=>{se.value+=me}})})])])}};function St(e){const a={...u.value,day:e};if(t.range===!1){y(a,F.value);return}if(P.value===null){const n=fe.value.find(i=>i.fill!==!0&&i.i===e);if(t.noUnset!==!0&&n.range!==void 0){et({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){et(a);return}const s=te(a);P.value={init:a,initHash:s,final:a,finalHash:s},w("rangeStart",H(a))}else{const n=P.value.initHash,s=te(a),i=n<=s?{from:P.value.init,to:a}:{from:a,to:P.value.init};P.value=null,Ze(n===s?a:{target:a,...i}),w("rangeEnd",{from:H(i.from),to:H(i.to)})}}function Ht(e){if(P.value!==null){const a={...u.value,day:e};Object.assign(P.value,{final:a,finalHash:te(a)})}}return Object.assign(T,{setToday:Ne,setView:Ke,offsetCalendar:Le,setCalendarTo:Z,setEditingRange:Ye}),()=>{const e=[r("div",{class:"q-date__content col relative-position"},[r(Me,{name:"q-transition--fade"},Vt[q.value])])],a=qt(_.default);return a!==void 0&&e.push(r("div",{class:"q-date__actions"},a)),t.name!==void 0&&t.disable!==!0&&ne(e,"push"),r("div",{class:ce.value,...qe.value},[Dt(),r("div",{ref:le,class:"q-date__main col column",tabindex:-1},e)])}}}),mt=ut({name:"QPopupProxy",props:{...Xt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:_,emit:w,attrs:T}){const{proxy:k}=ot(),{$q:N}=k,M=A(!1),g=A(null),V=d(()=>parseInt(t.breakpoint,10)),{canShow:O}=Zt({showing:M});function R(){return N.screen.width<V.value||N.screen.height<V.value?"dialog":"menu"}const z=A(R()),ae=d(()=>z.value==="menu"?{maxHeight:"99vh"}:{});re(()=>R(),C=>{M.value!==!0&&(z.value=C)});function ne(C){M.value=!0,w("show",C)}function le(C){M.value=!1,z.value=R(),w("hide",C)}return Object.assign(k,{show(C){O(C)===!0&&g.value.show(C)},hide(C){g.value.hide(C)},toggle(C){g.value.toggle(C)}}),At(k,"currentComponent",()=>({type:z.value,ref:g.value})),()=>{const C={ref:g,...ae.value,...T,onShow:ne,onHide:le};let x;return z.value==="dialog"?x=It:(x=ea,Object.assign(C,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),r(x,C,_.default)}}});function ia(t,_){if(t.hour!==null){if(t.minute===null)return"minute";if(_===!0&&t.second===null)return"second"}return"hour"}function ra(){const t=new Date;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}}const sa=ut({name:"QTime",props:{...gt,...yt,...Ct,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:xt,setup(t,{slots:_,emit:w}){const T=ot(),{$q:k}=T.proxy,N=_t(t,k),{tabindex:M,headerClass:g,getLocale:V,getCurrentDate:O}=Mt(t,k),R=bt(t),z=wt(R);let ae,ne;const le=A(null),C=d(()=>pe()),x=d(()=>V()),Be=d(()=>ge()),he=je(t.modelValue,C.value,x.value,t.calendar,Be.value),f=A(ia(he)),u=A(he),q=A(he.hour===null||he.hour<12),Ee=d(()=>`q-time q-time--${t.landscape===!0?"landscape":"portrait"}`+(N.value===!0?" q-time--dark q-dark":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-time--readonly":"")+(t.bordered===!0?" q-time--bordered":"")+(t.square===!0?" q-time--square no-border-radius":"")+(t.flat===!0?" q-time--flat no-shadow":"")),ue=d(()=>{const l=u.value;return{hour:l.hour===null?"--":E.value===!0?Q(l.hour):String(q.value===!0?l.hour===0?12:l.hour:l.hour>12?l.hour-12:l.hour),minute:l.minute===null?"--":Q(l.minute),second:l.second===null?"--":Q(l.second)}}),E=d(()=>t.format24h!==null?t.format24h:k.lang.date.format24h),Ve=d(()=>{const l=f.value==="hour",o=l===!0?12:60,v=u.value[f.value];let S=`rotate(${Math.round(v*(360/o))-180}deg) translateX(-50%)`;return l===!0&&E.value===!0&&u.value.hour>=12&&(S+=" scale(.7)"),{transform:S}}),se=d(()=>u.value.hour!==null),P=d(()=>se.value===!0&&u.value.minute!==null),ce=d(()=>t.hourOptions!==void 0?l=>t.hourOptions.includes(l):t.options!==void 0?l=>t.options(l,null,null):null),U=d(()=>t.minuteOptions!==void 0?l=>t.minuteOptions.includes(l):t.options!==void 0?l=>t.options(u.value.hour,l,null):null),W=d(()=>t.secondOptions!==void 0?l=>t.secondOptions.includes(l):t.options!==void 0?l=>t.options(u.value.hour,u.value.minute,l):null),p=d(()=>{if(ce.value===null)return null;const l=de(0,11,ce.value),o=de(12,11,ce.value);return{am:l,pm:o,values:l.values.concat(o.values)}}),X=d(()=>U.value!==null?de(0,59,U.value):null),j=d(()=>W.value!==null?de(0,59,W.value):null),J=d(()=>{switch(f.value){case"hour":return p.value;case"minute":return X.value;case"second":return j.value}}),ye=d(()=>{let l,o,v=0,h=1;const S=J.value!==null?J.value.values:void 0;f.value==="hour"?E.value===!0?(l=0,o=23):(l=0,o=11,q.value===!1&&(v=12)):(l=0,o=55,h=5);const K=[];for(let y=l,H=l;y<=o;y+=h,H++){const $=y+v,Re=S!==void 0&&S.includes($)===!1,we=f.value==="hour"&&y===0?E.value===!0?"00":"12":y;K.push({val:$,index:H,disable:Re,label:we})}return K}),Se=d(()=>[[ta,G,void 0,{stop:!0,prevent:!0,mouse:!0}]]);re(()=>t.modelValue,l=>{const o=je(l,C.value,x.value,t.calendar,Be.value);(o.dateHash!==u.value.dateHash||o.timeHash!==u.value.timeHash)&&(u.value=o,o.hour===null?f.value="hour":q.value=o.hour<12)}),re([C,x],()=>{lt(()=>{Ye()})});function oe(){const l={...O(),...ra()};Ye(l),Object.assign(u.value,l),f.value="hour"}function de(l,o,v){const h=Array.apply(null,{length:o+1}).map((S,K)=>{const y=K+l;return{index:y,val:v(y)===!0}}).filter(S=>S.val===!0).map(S=>S.index);return{min:h[0],max:h[h.length-1],values:h,threshold:o+1}}function Pe(l,o,v){const h=Math.abs(l-o);return Math.min(h,v-h)}function He(l,{min:o,max:v,values:h,threshold:S}){if(l===o)return o;if(l<o||l>v)return Pe(l,o,S)<=Pe(l,v,S)?o:v;const K=h.findIndex($=>l<=$),y=h[K-1],H=h[K];return l-y<=H-l?y:H}function pe(){return t.calendar!=="persian"&&t.mask!==null?t.mask:`HH:mm${t.withSeconds===!0?":ss":""}`}function ge(){if(typeof t.defaultDate!="string"){const l=O(!0);return l.dateHash=te(l),l}return je(t.defaultDate,"YYYY/MM/DD",void 0,t.calendar)}function _e(){return Bt(T)===!0||J.value!==null&&(J.value.values.length===0||f.value==="hour"&&E.value!==!0&&p.value[q.value===!0?"am":"pm"].values.length===0)}function Oe(){const l=le.value,{top:o,left:v,width:h}=l.getBoundingClientRect(),S=h/2;return{top:o+S,left:v+S,dist:S*.7}}function G(l){if(_e()!==!0){if(l.isFirst===!0){ae=Oe(),ne=Y(l.evt,ae);return}ne=Y(l.evt,ae,ne),l.isFinal===!0&&(ae=!1,ne=null,Fe())}}function Fe(){f.value==="hour"?f.value="minute":t.withSeconds&&f.value==="minute"&&(f.value="second")}function Y(l,o,v){const h=jt(l),S=Math.abs(h.top-o.top),K=Math.sqrt(Math.pow(Math.abs(h.top-o.top),2)+Math.pow(Math.abs(h.left-o.left),2));let y,H=Math.asin(S/K)*(180/Math.PI);if(h.top<o.top?H=o.left<h.left?90-H:270+H:H=o.left<h.left?H+90:270-H,f.value==="hour"){if(y=H/30,p.value!==null){const $=E.value!==!0?q.value===!0:p.value.am.values.length>0&&p.value.pm.values.length>0?K>=o.dist:p.value.am.values.length>0;y=He(y+($===!0?0:12),p.value[$===!0?"am":"pm"])}else y=Math.round(y),E.value===!0?K<o.dist?y<12&&(y+=12):y===12&&(y=0):q.value===!0&&y===12?y=0:q.value===!1&&y!==12&&(y+=12);E.value===!0&&(q.value=y<12)}else y=Math.round(H/6)%60,f.value==="minute"&&X.value!==null?y=He(y,X.value):f.value==="second"&&j.value!==null&&(y=He(y,j.value));return v!==y&&Ne[f.value](y),y}const I={hour(){f.value="hour"},minute(){f.value="minute"},second(){f.value="second"}};function Te(l){l.keyCode===13&&Ke()}function be(l){l.keyCode===13&&Le()}function $e(l){_e()!==!0&&(k.platform.is.desktop!==!0&&Y(l,Oe()),Fe())}function ve(l){_e()!==!0&&Y(l,Oe())}function F(l){if(l.keyCode===13)f.value="hour";else if([37,39].includes(l.keyCode)){const o=l.keyCode===37?-1:1;if(p.value!==null){const v=E.value===!0?p.value.values:p.value[q.value===!0?"am":"pm"].values;if(v.length===0)return;if(u.value.hour===null)ke(v[0]);else{const h=(v.length+v.indexOf(u.value.hour)+o)%v.length;ke(v[h])}}else{const v=E.value===!0?24:12,h=E.value!==!0&&q.value===!1?12:0,S=u.value.hour===null?-o:u.value.hour;ke(h+(24+S+o)%v)}}}function Ge(l){if(l.keyCode===13)f.value="minute";else if([37,39].includes(l.keyCode)){const o=l.keyCode===37?-1:1;if(X.value!==null){const v=X.value.values;if(v.length===0)return;if(u.value.minute===null)fe(v[0]);else{const h=(v.length+v.indexOf(u.value.minute)+o)%v.length;fe(v[h])}}else{const v=u.value.minute===null?-o:u.value.minute;fe((60+v+o)%60)}}}function Xe(l){if(l.keyCode===13)f.value="second";else if([37,39].includes(l.keyCode)){const o=l.keyCode===37?-1:1;if(j.value!==null){const v=j.value.values;if(v.length===0)return;if(u.value.seconds===null)qe(v[0]);else{const h=(v.length+v.indexOf(u.value.second)+o)%v.length;qe(v[h])}}else{const v=u.value.second===null?-o:u.value.second;qe((60+v+o)%60)}}}function ke(l){u.value.hour!==l&&(u.value.hour=l,Z())}function fe(l){u.value.minute!==l&&(u.value.minute=l,Z())}function qe(l){u.value.second!==l&&(u.value.second=l,Z())}const Ne={hour:ke,minute:fe,second:qe};function Ke(){q.value===!1&&(q.value=!0,u.value.hour!==null&&(u.value.hour-=12,Z()))}function Le(){q.value===!0&&(q.value=!1,u.value.hour!==null&&(u.value.hour+=12,Z()))}function Z(){if(ce.value!==null&&ce.value(u.value.hour)!==!0){u.value=je(),f.value="hour";return}if(U.value!==null&&U.value(u.value.minute)!==!0){u.value.minute=null,u.value.second=null,f.value="minute";return}if(t.withSeconds===!0&&W.value!==null&&W.value(u.value.second)!==!0){u.value.second=null,f.value="second";return}u.value.hour===null||u.value.minute===null||t.withSeconds===!0&&u.value.second===null||Ye()}function Ye(l){const o=Object.assign({...u.value},l),v=t.calendar==="persian"?Q(o.hour)+":"+Q(o.minute)+(t.withSeconds===!0?":"+Q(o.second):""):kt(new Date(o.year,o.month===null?null:o.month-1,o.day,o.hour,o.minute,o.second,o.millisecond),C.value,x.value,o.year,o.timezoneOffset);o.changed=v!==t.modelValue,w("update:modelValue",v,o)}function Qe(){const l=[r("div",{class:"q-time__link "+(f.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onClick:I.hour,onKeyup:F},ue.value.hour),r("div",":"),r("div",se.value===!0?{class:"q-time__link "+(f.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onKeyup:Ge,onClick:I.minute}:{class:"q-time__link"},ue.value.minute)];t.withSeconds===!0&&l.push(r("div",":"),r("div",P.value===!0?{class:"q-time__link "+(f.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onKeyup:Xe,onClick:I.second}:{class:"q-time__link"},ue.value.second));const o=[r("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},l)];return E.value===!1&&o.push(r("div",{class:"q-time__header-ampm column items-between no-wrap"},[r("div",{class:"q-time__link "+(q.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onClick:Ke,onKeyup:Te},"AM"),r("div",{class:"q-time__link "+(q.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onClick:Le,onKeyup:be},"PM")])),r("div",{class:"q-time__header flex flex-center no-wrap "+g.value},o)}function Ae(){const l=u.value[f.value];return r("div",{class:"q-time__content col relative-position"},[r(Me,{name:"q-transition--scale"},()=>r("div",{key:"clock"+f.value,class:"q-time__container-parent absolute-full"},[r("div",{ref:le,class:"q-time__container-child fit overflow-hidden"},[De(r("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:$e,onMousedown:ve},[r("div",{class:"q-time__clock-circle fit"},[r("div",{class:"q-time__clock-pointer"+(u.value[f.value]===null?" hidden":t.color!==void 0?` text-${t.color}`:""),style:Ve.value}),ye.value.map(o=>r("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${o.index}`+(o.val===l?" q-time__clock-position--active "+g.value:o.disable===!0?" q-time__clock-position--disable":"")},[r("span",o.label)]))])]),Se.value)])])),t.nowBtn===!0?r(B,{class:"q-time__now-button absolute",icon:k.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:t.color,textColor:t.textColor,tabindex:M.value,onClick:oe}):null])}return T.proxy.setNow=oe,()=>{const l=[Ae()],o=qt(_.default);return o!==void 0&&l.push(r("div",{class:"q-time__actions"},o)),t.name!==void 0&&t.disable!==!0&&z(l,"push"),r("div",{class:Ee.value,tabindex:-1},[Qe(),r("div",{class:"q-time__main col overflow-auto"},l)])}}});function ht(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const _=parseInt(t,10);return isNaN(_)?0:_}const We=Et({name:"close-popup",beforeMount(t,{value:_}){const w={depth:ht(_),handler(T){w.depth!==0&&setTimeout(()=>{const k=Pt(t);k!==void 0&&pt(k,T,w.depth)})},handlerKey(T){Ft(T,13)===!0&&w.handler(T)}};t.__qclosepopup=w,t.addEventListener("click",w.handler),t.addEventListener("keyup",w.handlerKey)},updated(t,{value:_,oldValue:w}){_!==w&&(t.__qclosepopup.depth=ht(_))},beforeUnmount(t){const _=t.__qclosepopup;t.removeEventListener("click",_.handler),t.removeEventListener("keyup",_.handlerKey),delete t.__qclosepopup}}),ca={class:"text-h6 q-mb-md"},da=Je("div",{class:"q-mb-md"}," Exact date and time the record was created. Use the buttons on the right to select a customized date and time, or auto select it. ",-1),va={class:"row items-center justify-end q-gutter-sm"},fa={class:"row items-center justify-end q-gutter-sm"},ba=$t({__name:"ActionInputCreatedTimestamp",props:{locked:{type:Boolean},label:null},setup(t){const _=aa(),w=A(null),T=A(""),k=A("");Nt(()=>{const g=_.record[ct.CREATED_TIMESTAMP];g?N(g):N()});function N(g=new Date().getTime()){_.record[ct.CREATED_TIMESTAMP]=g,T.value=Kt.formatDate(g,"ddd, YYYY MMM Do, h:mm A")}function M(){k.value&&N(new Date(k.value).getTime())}return(g,V)=>De((dt(),vt(Gt,null,{default:ee(()=>[L(Qt,null,{default:ee(()=>[Je("div",ca,[Rt(zt(t.label)+" ",1),t.locked?(dt(),vt(Ut,{key:0,name:ze(Ue).LOCK,color:"warning",class:"q-pb-xs"},null,8,["name"])):Wt("",!0)]),da,L(Jt,{modelValue:T.value,"onUpdate:modelValue":V[5]||(V[5]=O=>T.value=O),ref_key:"inputRef",ref:w,dense:"",outlined:"",disable:"",color:"primary",hint:"Auto formatted"},{after:ee(()=>[L(B,{disable:t.locked,icon:ze(Ue).CALENDAR_DATE,color:"primary",class:"q-px-sm"},{default:ee(()=>[L(mt,null,{default:ee(()=>[L(oa,{modelValue:k.value,"onUpdate:modelValue":V[1]||(V[1]=O=>k.value=O)},{default:ee(()=>[Je("div",va,[De(L(B,{label:"Cancel",flat:""},null,512),[[We]]),De(L(B,{label:"OK",color:"primary",flat:"",onClick:V[0]||(V[0]=O=>M())},null,512),[[We]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable","icon"]),L(B,{disable:t.locked,icon:ze(Ue).CLOCK,color:"primary",class:"q-ml-sm q-px-sm"},{default:ee(()=>[L(mt,null,{default:ee(()=>[L(sa,{modelValue:k.value,"onUpdate:modelValue":V[3]||(V[3]=O=>k.value=O),"now-btn":""},{default:ee(()=>[Je("div",fa,[De(L(B,{label:"Cancel",flat:""},null,512),[[We]]),De(L(B,{label:"OK",color:"primary",flat:"",onClick:V[2]||(V[2]=O=>M())},null,512),[[We]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable","icon"]),L(B,{disable:t.locked,icon:ze(Ue).CALENDAR_CHECK,color:"positive",class:"q-ml-sm q-px-sm",onClick:V[4]||(V[4]=O=>N())},null,8,["disable","icon"])]),_:1},8,["modelValue"])]),_:1})]),_:1},512)),[[Lt,!t.locked]])}});export{ba as default};
