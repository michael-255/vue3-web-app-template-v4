import{d as B,u as Y,A as q,a as U,g as P,r as A,D as R,S as C,b as c,c as e,e as h,o as $,f as I,h as y,w as T,i as Q,j as r,Q as H,k as z,l as a,m as W,n as g,v as x,p as d,q as v,s as w,F as L,t as j,x as X,y as G,I as _,z as J,B as f,C as M}from"./index-85cdcb14.js";import{_ as K}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-41aa508e.js";import{_ as Z}from"./DashboardIntroduction.vue_vue_type_script_setup_true_lang-52da13cc.js";import{u as ee}from"./useRoutables-c00f81b4.js";import{_ as V}from"./DashboardParentCard.vue_vue_type_script_setup_true_lang-2881b961.js";import{u as ae}from"./ui-2beed53d.js";import"./useDefaults-3eb7b215.js";import"./useDialogs-bd0c25a5.js";import"./SimpleDialog.vue_vue_type_script_setup_true_lang-7796c2c3.js";import"./QItemSection-376d8637.js";import"./QList-df3f4761.js";import"./QMenu-91b59cc6.js";import"./selection-fec6dfc1.js";import"./QBadge-5bc5a049.js";const se=d("div",{class:"text-h6 q-mb-xs"},"What would you like to work on?",-1),te={class:"row justify-center q-my-md"},oe={class:"col-12 text-center"},ie={class:"col-12 text-grey text-center q-mb-md"},Ne=B({__name:"DashboardView",setup(ne){Y({title:`${q} - Dashboard`});const l=ae(),{log:F}=U(),{goToCreate:b}=ee(),N=P().map((i,n)=>({label:i,value:n})),O=A(null),S=A(null),E=P().map(()=>A([])),k=R.liveDashboard().subscribe({next:async i=>{var p,D;O.value=(p=i.find(s=>s.id===C.SHOW_INTRODUCTION))==null?void 0:p.value,S.value=(D=i.find(s=>s.id===C.SHOW_DASHBOARD_DESCRIPTIONS))==null?void 0:D.value;const n=await Promise.all(i.filter(s=>s.type===c.EXAMPLE&&s[e.IS_ENABLED]===!0).map(async s=>{const o=await R.getPreviousChildRecord(h(s[e.TYPE]),s[e.ID]);return{[e.TYPE]:s[e.TYPE],[e.ID]:s[e.ID],[e.NAME]:s[e.NAME],[e.DESCRIPTION]:s[e.DESCRIPTION],[e.IS_FAVORITED]:s[e.IS_FAVORITED],previousNote:o==null?void 0:o[e.NOTE],previousCreatedTimestamp:o==null?void 0:o[e.CREATED_TIMESTAMP],previousNumber:o==null?void 0:o[e.NUMBER]}}));let u=n.filter(s=>s[e.IS_FAVORITED]===!0),m=n.filter(s=>s[e.IS_FAVORITED]===!1);E[0].value=[...u,...m],u=[],m=[];const t=await Promise.all(i.filter(s=>s.type===c.TEST&&s[e.IS_ENABLED]===!0).map(async s=>{const o=await R.getPreviousChildRecord(h(s[e.TYPE]),s[e.ID]);return{[e.TYPE]:s[e.TYPE],[e.ID]:s[e.ID],[e.NAME]:s[e.NAME],[e.DESCRIPTION]:s[e.DESCRIPTION],[e.IS_FAVORITED]:s[e.IS_FAVORITED],previousNote:o==null?void 0:o[e.NOTE],previousCreatedTimestamp:o==null?void 0:o[e.CREATED_TIMESTAMP],previousNumber:o==null?void 0:o[e.NUMBER]}}));u=t.filter(s=>s[e.IS_FAVORITED]===!0),m=t.filter(s=>s[e.IS_FAVORITED]===!1),E[1].value=[...u,...m]},error:i=>{F.error("Error loading live dashboard records",i)}});return $(()=>{k.unsubscribe()}),(i,n)=>(I(),y(K,{bannerIcon:a(_).DASHBOARD,bannerTitle:"Dashboard"},{default:T(()=>{var u,m;return[O.value?(I(),y(Z,{key:0,class:"q-mb-md"})):Q("",!0),r(W,{class:"q-mb-md"},{default:T(()=>[r(H,null,{default:T(()=>[se,r(z,{color:"primary",options:a(N),"model-value":a(l).dashboardListIndex,"onUpdate:modelValue":n[0]||(n[0]=t=>a(l).dashboardListIndex=t)},null,8,["options","model-value"])]),_:1})]),_:1}),g(d("div",null,[(I(!0),v(L,null,w(a(E)[0].value,(t,p)=>(I(),v("div",{key:p},[r(V,M({[a(e).TYPE||""]:t[a(e).TYPE],[a(e).ID||""]:t[a(e).ID],[a(e).NAME||""]:t[a(e).NAME],showDescription:S.value,[a(e).DESCRIPTION||""]:t[a(e).DESCRIPTION],[a(e).IS_FAVORITED||""]:t[a(e).IS_FAVORITED],previousNote:t.previousNote,previousCreatedTimestamp:t.previousCreatedTimestamp,previousNumber:t.previousNumber,class:"q-mb-md"}),{default:T(()=>[r(f,{round:"",color:"positive",icon:a(_).ADD_NOTE,onClick:D=>a(b)(a(c).EXAMPLE_RESULT,t[a(e).ID])},null,8,["icon","onClick"])]),_:2},1040,["showDescription","previousNote","previousCreatedTimestamp","previousNumber"])]))),128))],512),[[x,a(l).dashboardListIndex===0]]),g(d("div",null,[(I(!0),v(L,null,w(a(E)[1].value,(t,p)=>(I(),v("div",{key:p},[r(V,M({[a(e).TYPE||""]:t[a(e).TYPE],[a(e).ID||""]:t[a(e).ID],[a(e).NAME||""]:t[a(e).NAME],showDescription:S.value,[a(e).DESCRIPTION||""]:t[a(e).DESCRIPTION],[a(e).IS_FAVORITED||""]:t[a(e).IS_FAVORITED],previousNote:t.previousNote,previousCreatedTimestamp:t.previousCreatedTimestamp,previousNumber:t.previousNumber,class:"q-mb-md"}),{default:T(()=>[r(f,{round:"",color:"positive",icon:a(_).ADD_NOTE,onClick:D=>a(b)(a(c).TEST_RESULT,t[a(e).ID])},null,8,["icon","onClick"])]),_:2},1040,["showDescription","previousNote","previousCreatedTimestamp","previousNumber"])]))),128))],512),[[x,a(l).dashboardListIndex===1]]),d("div",te,[d("div",oe,[r(j,{name:"menu_open",size:"80px",color:"grey"})]),d("div",ie,X(a(G)((m=(u=a(E))==null?void 0:u[a(l).dashboardListIndex])==null?void 0:m.value))+" (enabled only) ",1),r(f,{color:"positive",icon:a(_).CREATE,label:`Create ${a(J)(a(N)[a(l).dashboardListIndex].label,"singular")}`,onClick:n[1]||(n[1]=t=>a(b)(a(N)[a(l).dashboardListIndex].label))},null,8,["icon","label"])])]}),_:1},8,["bannerIcon"]))}});export{Ne as default};
