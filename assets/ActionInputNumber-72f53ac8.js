import{a as R,r as b,ag as y,c as r,D as E,d as w,G as M,bD as U,n as g,v as k,f as c,h as m,w as f,j as p,Q as x,p as N,K as D,x as I,t as C,l as t,I as P,i as Q,N as F,m as _}from"./index-85cdcb14.js";import{u as v}from"./action-c39eed1c.js";function q(){const n=v(),{log:o}=R(),a=b(null);return y(()=>n.record[r.PARENT_ID],async l=>{try{const s=n.record[r.TYPE];if(!l||!s)return;a.value=await E.getPreviousChildRecord(s,l)}catch(s){o.error("Error with parent id watcher",s)}},{immediate:!0}),{previousRecord:a}}const A={class:"text-h6 q-mb-md"},L=N("div",{class:"q-mb-md"},"Number stored on this child record is viewable in charts.",-1),V=w({__name:"ActionInputNumber",props:{locked:{type:Boolean},label:null},setup(n){const o=v(),{previousRecord:a}=q(),l=b(null);M(()=>{o.record[r.NUMBER]=o.record[r.NUMBER]??U[r.NUMBER]()});function s(e){return e!=null?`Previously ${e}`:"No previous data"}function B(){return e=>e==null||typeof e=="number"&&e<999999999999999&&e>-999999999999999||"If provided, number must be 15 digits (+/-)"}function h(e){e==null||e===""?o.record[r.NUMBER]=null:o.record[r.NUMBER]=parseFloat(e.toFixed(2))}return(e,u)=>g((c(),m(_,null,{default:f(()=>[p(x,null,{default:f(()=>{var d;return[N("div",A,[D(I(n.label)+" ",1),n.locked?(c(),m(C,{key:0,name:t(P).LOCK,color:"warning",class:"q-pb-xs"},null,8,["name"])):Q("",!0)]),L,p(F,{modelValue:t(o).record[t(r).NUMBER],"onUpdate:modelValue":u[0]||(u[0]=i=>t(o).record[t(r).NUMBER]=i),modelModifiers:{number:!0},ref_key:"inputRef",ref:l,label:s((d=t(a))==null?void 0:d.number),rules:[B()],disable:n.locked,type:"number",step:"0.01",dense:"",outlined:"",color:"primary",onBlur:u[1]||(u[1]=i=>h(t(o).record[t(r).NUMBER]))},null,8,["modelValue","label","rules","disable"])]}),_:1})]),_:1},512)),[[k,!n.locked]])}});export{V as default};
