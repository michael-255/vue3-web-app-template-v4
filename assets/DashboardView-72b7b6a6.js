import{c as _e,u as Ae,a as Se,g as Te,b as we,d as $e,r as V,e as N,o as Ce,h as Y,f as De,Q as P,i as Ee,j as Le,s as z,k as j,l as ce,D as $,S as G,m as T,n as M,w as _,p as u,q as ue,t as y,v as x,x as o,A as J,y as Ie,I as v,z as w,R as xe,B as de,C as Fe,E as Oe,F as fe,G as k,H as Z,J as ee,K,L as me,M as ve,N as ke,O as Q,P as Ve,T as oe,U as qe,V as O,W as Re,X as Ne,Y as Pe}from"./index-b39cb04c.js";import{_ as Me}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-8d88b52c.js";import{u as he}from"./ui-efd5ca96.js";import{Q as ae}from"./QBadge-f6ee03d6.js";import{t as ne,u as He,a as Be,i as Qe}from"./index-020152ea.js";import{Q as X,a as H}from"./QItem-209b6fb1.js";import{Q as Ue}from"./QList-e436a26f.js";import{Q as je}from"./QMenu-f08b863f.js";import{u as We}from"./useDialogs-a2268d7d.js";import{u as ge}from"./useRouting-0242bcfd.js";import{u as Ye}from"./useDefaults-f7dfc79a.js";import"./selection-c90de234.js";import"./action-f57882ca.js";import"./QSelect-78da7caa.js";import"./QItemLabel-00f834d9.js";import"./ErrorStates.vue_vue_type_script_setup_true_lang-4cea3e11.js";const ze=_e({name:"QRating",props:{...Ae,...Se,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:t,emit:a}){const{proxy:{$q:r}}=Te(),g=we(e),s=$e(e),f=Ee(s),c=V(0);let p={};const S=N(()=>e.readonly!==!0&&e.disable!==!0),C=N(()=>`q-rating row inline items-center q-rating--${S.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),A=N(()=>{const l=Array.isArray(e.icon)===!0?e.icon.length:0,n=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,E=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,q=Array.isArray(e.color)===!0?e.color.length:0,R=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,i=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:l,icon:l>0?e.icon[l-1]:e.icon,selIconLen:n,selIcon:n>0?e.iconSelected[n-1]:e.iconSelected,halfIconLen:E,halfIcon:E>0?e.iconHalf[n-1]:e.iconHalf,colorLen:q,color:q>0?e.color[q-1]:e.color,selColorLen:R,selColor:R>0?e.colorSelected[R-1]:e.colorSelected,halfColorLen:i,halfColor:i>0?e.colorHalf[i-1]:e.colorHalf}}),L=N(()=>{if(typeof e.iconAriaLabel=="string"){const l=e.iconAriaLabel.length!==0?`${e.iconAriaLabel} `:"";return n=>`${l}${n}`}if(Array.isArray(e.iconAriaLabel)===!0){const l=e.iconAriaLabel.length;if(l>0)return n=>e.iconAriaLabel[Math.min(n,l)-1]}return(l,n)=>`${n} ${l}`}),I=N(()=>{const l=[],n=A.value,E=Math.ceil(e.modelValue),q=S.value===!0?0:null,R=e.iconHalf===void 0||E===e.modelValue?-1:E;for(let i=1;i<=e.max;i++){const F=c.value===0&&e.modelValue>=i||c.value>0&&c.value>=i,B=R===i&&c.value<i,W=c.value>0&&(B===!0?E:e.modelValue)>=i&&c.value<i,te=B===!0?i<=n.halfColorLen?e.colorHalf[i-1]:n.halfColor:n.selColor!==void 0&&F===!0?i<=n.selColorLen?e.colorSelected[i-1]:n.selColor:i<=n.colorLen?e.color[i-1]:n.color,pe=(B===!0?i<=n.halfIconLen?e.iconHalf[i-1]:n.halfIcon:n.selIcon!==void 0&&(F===!0||W===!0)?i<=n.selIconLen?e.iconSelected[i-1]:n.selIcon:i<=n.iconLen?e.icon[i-1]:n.icon)||r.iconSet.rating.icon;l.push({name:(B===!0?i<=n.halfIconLen?e.iconHalf[i-1]:n.halfIcon:n.selIcon!==void 0&&(F===!0||W===!0)?i<=n.selIconLen?e.iconSelected[i-1]:n.selIcon:i<=n.iconLen?e.icon[i-1]:n.icon)||r.iconSet.rating.icon,attrs:{tabindex:q,role:"radio","aria-checked":e.modelValue===i?"true":"false","aria-label":L.value(i,pe)},iconClass:"q-rating__icon"+(F===!0||B===!0?" q-rating__icon--active":"")+(W===!0?" q-rating__icon--exselected":"")+(c.value===i?" q-rating__icon--hovered":"")+(te!==void 0?` text-${te}`:"")})}return l}),d=N(()=>{const l={role:"radiogroup"};return e.disable===!0&&(l["aria-disabled"]="true"),e.readonly===!0&&(l["aria-readonly"]="true"),l});function m(l){if(S.value===!0){const n=Le(parseInt(l,10),1,parseInt(e.max,10)),E=e.noReset!==!0&&e.modelValue===n?0:n;E!==e.modelValue&&a("update:modelValue",E),c.value=0}}function h(l){S.value===!0&&(c.value=l)}function b(l,n){switch(l.keyCode){case 13:case 32:return m(n),z(l);case 37:case 40:return p[`rt${n-1}`]&&p[`rt${n-1}`].focus(),z(l);case 39:case 38:return p[`rt${n+1}`]&&p[`rt${n+1}`].focus(),z(l)}}function D(){c.value=0}return Ce(()=>{p={}}),()=>{const l=[];return I.value.forEach(({iconClass:n,name:E,attrs:q},R)=>{const i=R+1;l.push(Y("div",{key:i,ref:F=>{p[`rt${i}`]=F},class:"q-rating__icon-container flex flex-center",...q,onClick(){m(i)},onMouseover(){h(i)},onMouseout:D,onFocus(){h(i)},onBlur:D,onKeyup(F){b(F,i)}},De(t[`tip-${i}`],[Y(P,{class:n,name:E})])))}),e.name!==void 0&&e.disable!==!0&&f(l,"push"),Y("div",{class:C.value,style:g.value,...d.value},l)}}}),Ke={class:"text-h6"},Xe=y("p",null,' Continue reading to learn more, or scroll to the bottom and click the "Start Using App" button to jump right in. ',-1),Ge={class:"q-mb-md"},Je=y("p",null," You are currently on the Dashboard page. This page gives you quick access to the primary data you work with in the app. You can favorite items on the Dashboard by clicking the star icon in the top right corner of the item. This prioritizes the item to the top of the list. ",-1),Ze={class:"q-mb-md"},et=y("p",null," You can navigate through the app using the menu in the top left corner of the page. An example of the menu button is below. The menu gives you access to the primary data tables, Frequently Asked Questions (FAQ), Settings, and more. More advanced operations for the app are available on the Settings page. ",-1),tt={class:"q-mb-md"},ot=y("p",null," You can access the data tables for the current Dashboard selection by clicking the buttons in the top right corner of the page. The left button is for the parent records. The right button is for the child records. ",-1),at={class:"q-mb-md"},nt=y("p",null,"Click the button below when you are ready to get started.",-1),lt=j({__name:"WelcomeOverlay",setup(e){const t=V(0),a=V(!1);ce(async()=>{a.value=!!await $.getSettingValue(G.WELCOME_OVERLAY)});async function r(){await $.setSetting(G.WELCOME_OVERLAY,!1),a.value=!1}return(g,s)=>(T(),M(Fe,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=f=>a.value=f),persistent:""},{default:_(()=>[u(de,{flat:"",square:""},{default:_(()=>[u(ue,null,{default:_(()=>[y("p",Ke,"Welcome to "+x(o(J)),1),y("p",null,x(o(Ie)),1),Xe,y("div",Ge,[Je,u(ze,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=f=>t.value=f),max:1,icon:o(v).FAVORITE_OFF,"icon-selected":o(v).FAVORITE_ON,color:"warning",size:"md"},null,8,["modelValue","icon","icon-selected"])]),y("div",Ze,[et,u(w,{disable:"",color:"primary",class:"q-px-sm",icon:o(v).MENU},null,8,["icon"])]),y("div",tt,[ot,u(w,{disable:"",color:"info",class:"q-px-sm q-mr-sm",icon:o(v).PARENTS},null,8,["icon"]),u(w,{disable:"",color:"info",class:"q-px-sm",icon:o(v).CHILDREN},null,8,["icon"])]),y("div",at,[y("p",null," Hope you find "+x(o(J))+" useful. Please consider donating to help me continue to create and maintain apps like this. Thank you! ",1),u(w,{color:"warning",label:"Donate",to:{name:o(xe).DONATE},icon:o(v).DONATE},null,8,["to","icon"])]),y("div",null,[nt,u(w,{"no-caps":"",label:"Start Using App",class:"full-width",size:"lg",color:"positive",icon:o(v).READY,onClick:s[1]||(s[1]=f=>r())},null,8,["icon"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),rt=Qe?window:void 0;function it(e,t={}){const{immediate:a=!0,window:r=rt}=t,g=V(!1);let s=0,f=null;function c(C){if(!g.value||!r)return;const A=C-(s||C);e({delta:A,timestamp:C}),s=C,f=r.requestAnimationFrame(c)}function p(){!g.value&&r&&(g.value=!0,f=r.requestAnimationFrame(c))}function S(){g.value=!1,f!=null&&r&&(r.cancelAnimationFrame(f),f=null)}return a&&p(),Be(S),{isActive:Oe(g),pause:S,resume:p}}var st=Object.defineProperty,le=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,re=(e,t,a)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,dt=(e,t)=>{for(var a in t||(t={}))ct.call(t,a)&&re(e,a,t[a]);if(le)for(var a of le(t))ut.call(t,a)&&re(e,a,t[a]);return e};function ft(e={}){const{controls:t=!1,interval:a="requestAnimationFrame"}=e,r=V(new Date),g=()=>r.value=new Date,s=a==="requestAnimationFrame"?it(g,{immediate:!0}):He(g,a,{immediate:!0});return t?dt({now:r},s):r}var mt=Object.defineProperty,U=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ie=(e,t,a)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,vt=(e,t)=>{for(var a in t||(t={}))be.call(t,a)&&ie(e,a,t[a]);if(U)for(var a of U(t))ye.call(t,a)&&ie(e,a,t[a]);return e},ht=(e,t)=>{var a={};for(var r in e)be.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&U)for(var r of U(e))t.indexOf(r)<0&&ye.call(e,r)&&(a[r]=e[r]);return a};const gt=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],bt={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function yt(e){return e.toISOString().slice(0,10)}function pt(e,t={}){const{controls:a=!1,updateInterval:r=3e4}=t,g=ft({interval:r,controls:!0}),{now:s}=g,f=ht(g,["now"]),c=N(()=>_t(new Date(ne(e)),t,ne(s)));return a?vt({timeAgo:c},f):c}function _t(e,t={},a=Date.now()){var r;const{max:g,messages:s=bt,fullDateFormatter:f=yt,units:c=gt,showSecond:p=!1,rounding:S="round"}=t,C=typeof S=="number"?h=>+h.toFixed(S):Math[S],A=+a-+e,L=Math.abs(A);function I(h,b){return C(Math.abs(h)/b.value)}function d(h,b){const D=I(h,b),l=h>0,n=m(b.name,D,l);return m(l?"past":"future",n,l)}function m(h,b,D){const l=s[h];return typeof l=="function"?l(b,D):l.replace("{0}",b.toString())}if(L<6e4&&!p)return s.justNow;if(typeof g=="number"&&L>g)return f(new Date(e));if(typeof g=="string"){const h=(r=c.find(b=>b.name===g))==null?void 0:r.max;if(h&&L>h)return f(new Date(e))}for(const[h,b]of c.entries()){if(I(A,b)<=0&&c[h-1])return d(A,c[h-1]);if(L<b.max)return d(A,b)}return s.invalid}const At={class:"absolute-top-right q-ma-xs"},St=j({__name:"DashboardRecordCardMenu",props:{parentTable:{},record:{}},setup(e){const t=e,a=he(),{log:r}=fe(),{goToEdit:g}=ge(),{confirmDialog:s,dismissDialog:f,inspectDialog:c,chartsDialog:p}=We();function S(d){f("Previous Note",d,v.NOTE)}function C(d,m,h){const b=h?"Unfavorite":"Favorite",D=`Do you want to ${b.toLocaleLowerCase()} ${m}?`,l=h?v.FAVORITE_OFF:v.FAVORITE_ON;s(b,D,l,"info",async()=>{try{await $.toggleFavorite(t.parentTable,d),r.info(`${m} unfavorited`,{id:d,name:m})}catch(n){r.error("Unfavorite update failed",n)}})}async function A(d){const m=await $.getRecord(t.parentTable,d);m?c(m,t.parentTable):r.error("Failed to find record",{id:d})}function L(d,m){p(m,d)}function I(d,m){s("Deactivate Record","Would you like to deactivate this record?",v.CANCEL,"warning",async()=>{try{await $.toggleActive(d,m),r.info("Deactivated record",{table:d,id:m})}catch(h){r.error("Deactivation failed",h)}})}return(d,m)=>{var h;return T(),k("div",At,[Z(u(w,{dense:"",round:"",flat:"",color:"primary",icon:o(v).NOTE,onClick:m[0]||(m[0]=b=>{var D,l;return S(((l=(D=d.record)==null?void 0:D.previousChild)==null?void 0:l.note)||"")})},null,8,["icon"]),[[ee,(h=d.record.previousChild)==null?void 0:h.note]]),d.record.activated?(T(),M(w,{key:0,dense:"",round:"",flat:"",color:"warning",icon:o(v).CANCEL,onClick:m[1]||(m[1]=b=>I(d.parentTable,d.record.id))},null,8,["icon"])):(T(),M(w,{key:1,dense:"",round:"",flat:"",color:d.record.favorited?"warning":"grey",icon:d.record.favorited?o(v).FAVORITE_ON:o(v).FAVORITE_OFF,onClick:m[2]||(m[2]=b=>C(d.record.id,d.record.name,d.record.favorited))},null,8,["color","icon"])),u(w,{round:"",flat:"",icon:o(v).MENU_VERTICAL},{default:_(()=>[u(je,{"auto-close":"",anchor:"top right","transition-show":"flip-right","transition-hide":"flip-left"},{default:_(()=>[u(Ue,null,{default:_(()=>[u(X,{clickable:"",onClick:m[3]||(m[3]=b=>L(d.parentTable,d.record.id))},{default:_(()=>[u(H,{avatar:""},{default:_(()=>[u(P,{color:"accent",name:o(v).CHARTS},null,8,["name"])]),_:1}),u(H,null,{default:_(()=>[K("Charts")]),_:1})]),_:1}),u(X,{clickable:"",onClick:m[4]||(m[4]=b=>A(d.record.id))},{default:_(()=>[u(H,{avatar:""},{default:_(()=>[u(P,{color:"primary",name:o(v).INSPECT},null,8,["name"])]),_:1}),u(H,null,{default:_(()=>[K("Inspect")]),_:1})]),_:1}),u(X,{disable:d.record.activated,clickable:"",onClick:m[5]||(m[5]=b=>o(g)(o(a).dashboardSelection,d.record.id))},{default:_(()=>[u(H,{avatar:""},{default:_(()=>[u(P,{color:"warning",name:o(v).EDIT},null,8,["name"])]),_:1}),u(H,null,{default:_(()=>[K("Edit")]),_:1})]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["icon"])])}}}),Tt={class:"row justify-center q-gutter-md"},wt=y("span",{class:"text-caption q-mx-xs"},"Active",-1),$t={class:"text-h6"},Ct={key:1},Dt={class:"text-caption q-ml-xs"},Et={key:2},Lt={class:"text-caption q-ml-xs"},It={class:"col-12 text-grey text-center text-body1"},xt={key:0,class:"col-12 text-center"},Ft={class:"col-12 text-center"},se=j({__name:"DashboardRecordCardList",props:{parentTable:{},records:{},showDescriptions:{type:Boolean},defaultsFunc:{type:Function}},setup(e){const t=e,{goToCreate:a,goToActive:r}=ge();async function g(s,f){await $.toggleActive(s,f),r()}return(s,f)=>(T(),k("div",Tt,[(T(!0),k(me,null,ve(s.records,c=>(T(),k("div",{key:c.id,class:"col-xs-12 col-sm-12 col-md-12 col-lg-5"},[u(de,{class:"column full-height"},{default:_(()=>[u(ue,{class:"col"},{default:_(()=>{var p;return[u(St,{parentTable:s.parentTable,record:c},null,8,["parentTable","record"]),c.activated?(T(),M(ae,{key:0,rounded:"",color:"warning",class:"absolute-top-left q-py-none",style:{left:"-4px",top:"-6px"}},{default:_(()=>[u(P,{name:o(v).LOCK},null,8,["name"]),wt]),_:1})):Q("",!0),y("p",$t,x(c.name),1),s.showDescriptions?(T(),k("p",Ct,x(c.desc),1)):Q("",!0),u(ae,{rounded:"",color:"secondary",class:"q-py-none"},{default:_(()=>{var S;return[u(P,{name:o(v).PREVIOUS},null,8,["name"]),y("span",Dt,x(o(pt)(((S=c.previousChild)==null?void 0:S.createdTimestamp)||"").value||"No previous records"),1)]}),_:2},1024),(p=c.previousChild)!=null&&p.createdTimestamp?(T(),k("div",Et,[u(P,{name:o(v).CALENDAR_CHECK},null,8,["name"]),y("span",Lt,x(o(Ve)(c.previousChild.createdTimestamp)),1)])):Q("",!0)]}),_:2},1024),c.activated?(T(),M(oe,{key:0,class:"col-auto"},{default:_(()=>[u(w,{label:"Go To Active",color:"positive",class:"full-width",icon:o(v).UP,onClick:f[0]||(f[0]=p=>o(r)())},null,8,["icon"])]),_:1})):(T(),M(oe,{key:1,class:"col-auto"},{default:_(()=>[u(w,{label:`Attach ${o($).getLabel(o($).getChildTable(s.parentTable),"singular")}`,color:"primary",class:"full-width q-mb-sm",icon:o(v).ATTACH,onClick:p=>o(a)(o($).getChildTable(s.parentTable),c.id)},null,8,["label","icon","onClick"]),u(w,{label:"Activate",color:"primary",class:"full-width",icon:o(v).READY,onClick:p=>g(s.parentTable,c.id)},null,8,["icon","onClick"])]),_:2},1024))]),_:2},1024)]))),128)),y("div",It,x(o(ke)(s.records)),1),s.records.length===0&&s.defaultsFunc?(T(),k("div",xt,[u(w,{class:"col-12 text-center",color:"primary",icon:o(v).DEFAULTS,label:`Add ${o($).getLabel(t.parentTable,"singular")} Defaults`,onClick:f[1]||(f[1]=c=>s.defaultsFunc())},null,8,["icon","label"])])):Q("",!0),y("div",Ft,[u(w,{class:"col-12 text-center",color:"positive",icon:o(v).CREATE,label:`Create ${o($).getLabel(s.parentTable,"singular")}`,onClick:f[2]||(f[2]=c=>o(a)(s.parentTable))},null,8,["icon","label"])])]))}}),Ot={class:"q-mb-md"},kt={class:"text-center text-body1"},Vt={class:"row justify-center"},Jt=j({__name:"DashboardView",setup(e){qe({title:`${J} - Dashboard`});const t=he(),{log:a}=fe(),{onDefaultExamples:r,onDefaultTests:g}=Ye(),s=[{value:O.EXAMPLES,label:Re.getLabel("plural"),icon:v.EXAMPLES},{value:O.TESTS,label:Ne.getLabel("plural"),icon:v.TESTS}],f=V(!1),c=V([]),p=V([]),S=$.liveDashboardData(O.EXAMPLES).subscribe({next:A=>c.value=A,error:A=>a.error("Error fetching live Examples",A)}),C=$.liveDashboardData(O.TESTS).subscribe({next:A=>p.value=A,error:A=>a.error("Error fetching live Tests",A)});return ce(async()=>{f.value=!!await $.getSettingValue(G.DASHBOARD_DESCRIPTIONS)}),Pe(()=>{S.unsubscribe(),C.unsubscribe()}),(A,L)=>(T(),M(Me,{bannerIcon:o(v).DASHBOARD,bannerTitle:"Dashboard"},{default:_(()=>{var I;return[u(lt),y("section",Ot,[y("p",kt,x((I=s.find(d=>d.value===o(t).dashboardSelection))==null?void 0:I.label),1),y("div",Vt,[(T(),k(me,null,ve(s,(d,m)=>u(w,{key:m,round:"",size:"lg",class:"q-mb-xs q-mx-xs",icon:d.icon,color:o(t).dashboardSelection===d.value?"info":"grey",onClick:h=>o(t).dashboardSelection=d.value},null,8,["icon","color","onClick"])),64))])]),y("section",null,[Z(u(se,{parentTable:o(O).EXAMPLES,records:c.value,showDescriptions:f.value,defaultsFunc:o(r)},null,8,["parentTable","records","showDescriptions","defaultsFunc"]),[[ee,o(t).dashboardSelection===o(O).EXAMPLES]]),Z(u(se,{parentTable:o(O).TESTS,records:p.value,showDescriptions:f.value,defaultsFunc:o(g)},null,8,["parentTable","records","showDescriptions","defaultsFunc"]),[[ee,o(t).dashboardSelection===o(O).TESTS]])])]}),_:1},8,["bannerIcon"]))}});export{Jt as default};
