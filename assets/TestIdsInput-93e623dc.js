import{Q as b}from"./QSelect-5d1678e4.js";import{d as y,a as h,r as n,H as S,b as V,bz as w,c as Q,e as x,w as r,f as i,Q as B,l as u,t as d,h as c,i as C}from"./index-28c8bf0b.js";import{u as D}from"./action-458760f9.js";import{u as R}from"./useRoutables-1c239c02.js";import"./QItem-b926f8e7.js";import"./QItemLabel-f325ac93.js";import"./QMenu-9b6e07a8.js";import"./selection-f556fdfa.js";const k={class:"text-h6 q-mb-md"},M={class:"q-mb-md"},E=y({__name:"TestIdsInput",props:{field:null,label:null,desc:null,getDefault:{type:Function},validator:null,validationMessage:null},setup(o){const a=o,{routeType:m}=R(),{log:p}=h(),l=D(),f=n(null),s=n([]);S(async()=>{try{l.record[a.field]=l.record[a.field]??a.getDefault();const e=await V.getAll(m);s.value=e.map(t=>({value:t.id,label:`${t.name} (${w(t.id,4,"*")})`}))}catch(e){p.error("Error with test ids input",e)}});function g(){return async e=>await a.validator.isValid(e)||a.validationMessage}return(e,t)=>(Q(),x(C,null,{default:r(()=>[i(B,null,{default:r(()=>[u("p",k,d(o.label),1),u("p",M,d(o.desc),1),i(b,{modelValue:c(l).record[o.field],"onUpdate:modelValue":t[0]||(t[0]=v=>c(l).record[o.field]=v),ref_key:"inputRef",ref:f,rules:[g()],options:s.value,counter:"",multiple:"","emit-value":"","map-options":"","options-dense":"",dense:"",outlined:"",color:"primary"},null,8,["modelValue","rules","options"])]),_:1})]),_:1}))}});export{E as default};
