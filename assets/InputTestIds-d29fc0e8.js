import{Q as f}from"./QSelect-f9ed5694.js";import{q as g,t as y,r as V,ac as h,D as S,W as v,P as B,bE as C,y as D,z as b,A as r,B as l,C as Q,E as n,F as i,u,L as _}from"./index-ef11a4d2.js";import{u as w}from"./action-ee52ff77.js";import"./QItem-bdaee51e.js";import"./QItemLabel-6937233e.js";import"./QMenu-17d8d43f.js";import"./selection-0dee77d8.js";const E={class:"text-h6"},R=g({__name:"InputTestIds",props:{field:{},label:{},desc:{},getDefault:{type:Function},schema:{},message:{}},setup(c){const s=c,{log:d}=y(),t=w(),a=V([]);h(async()=>{try{t.record[s.field]=t.record[s.field]??s.getDefault();const e=await S.getRecords(v.Values.core,B.Values.test);a.value=e.map(o=>({value:o.id,label:`${o.name} (${C(o.id,4,"*")})`}))}catch(e){d.error("Error with test ids input",e)}});function p(){return e=>s.schema.safeParse(e).success||s.message}return(e,o)=>(D(),b(_,null,{default:r(()=>[l(Q,null,{default:r(()=>[n("p",E,i(e.label),1),n("p",null,i(e.desc),1),l(f,{modelValue:u(t).record[e.field],"onUpdate:modelValue":o[0]||(o[0]=m=>u(t).record[e.field]=m),rules:[p()],options:a.value,counter:"",multiple:"","emit-value":"","map-options":"","options-dense":"",dense:"",outlined:"",color:"primary"},null,8,["modelValue","rules","options"])]),_:1})]),_:1}))}});export{R as default};
