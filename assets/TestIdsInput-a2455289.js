import{Q as v}from"./QSelect-ef8a300b.js";import{d as y,a as _,r,L as b,b as S,T as h,bz as T,c as V,e as w,w as l,f as n,Q,l as i,t as d,h as u,i as B}from"./index-2ed2ead9.js";import{u as C}from"./action-1f28cf79.js";import"./QItem-bf3f0c3d.js";import"./QItemLabel-3d868656.js";import"./QMenu-d2947be1.js";import"./selection-feb8c58b.js";const D={class:"text-h6 q-mb-md"},R={class:"q-mb-md"},L=y({__name:"TestIdsInput",props:{field:{},label:{},desc:{},getDefault:{type:Function},validator:{},validationMessage:{}},setup(p){const o=p,{log:c}=_(),a=C(),m=r(null),s=r([]);b(async()=>{try{a.record[o.field]=a.record[o.field]??o.getDefault();const e=await S.getAll(h.TEST_PARENT);s.value=e.map(t=>({value:t.id,label:`${t.name} (${T(t.id,4,"*")})`}))}catch(e){c.error("Error with test ids input",e)}});function f(){return async e=>await o.validator.isValid(e)||o.validationMessage}return(e,t)=>(V(),w(B,null,{default:l(()=>[n(Q,null,{default:l(()=>[i("p",D,d(e.label),1),i("p",R,d(e.desc),1),n(v,{modelValue:u(a).record[e.field],"onUpdate:modelValue":t[0]||(t[0]=g=>u(a).record[e.field]=g),ref_key:"inputRef",ref:m,rules:[f()],options:s.value,counter:"",multiple:"","emit-value":"","map-options":"","options-dense":"",dense:"",outlined:"",color:"primary"},null,8,["modelValue","rules","options"])]),_:1})]),_:1}))}});export{L as default};
