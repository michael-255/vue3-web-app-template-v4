import{c as _e,u as Ae,a as Se,g as Te,b as $e,d as we,r as q,e as P,o as De,h as W,f as Ce,Q as F,i as Ee,j as Le,s as Y,k as j,l as ce,D as w,S as G,m as $,n as H,w as _,p as s,q as ue,t as y,v as O,x as o,A as J,y as Ie,I as v,z as D,R as xe,B as de,C as Fe,E as Oe,F as me,G as x,H as Z,J as ee,K,L as fe,M as ve,N as ke,O as Q,P as Ve,T as oe,U as qe,V,W as Re,X as Ne,Y as Pe}from"./index-b485ae0b.js";import{_ as Me}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-da8e92be.js";import{u as he}from"./ui-03a2bc1c.js";import{Q as ae}from"./QBadge-d2150b6d.js";import{t as ne,u as He,a as Be,i as Qe}from"./index-bb71d8e7.js";import{Q as X,a as M}from"./QItem-d6998d7a.js";import{Q as Ue}from"./QList-53fbbcc8.js";import{Q as je}from"./QMenu-06baf04f.js";import{u as ze}from"./useDialogs-f2694a26.js";import{u as ge}from"./useRouting-0ab7467f.js";import{u as We}from"./useDefaults-cd141459.js";import"./selection-1d7d8417.js";import"./action-35b72a8d.js";import"./QSelect-c63f4c89.js";import"./QItemLabel-5a92897d.js";import"./ErrorStates.vue_vue_type_script_setup_true_lang-711b85da.js";const Ye=_e({name:"QRating",props:{...Ae,...Se,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:t,emit:a}){const{proxy:{$q:r}}=Te(),g=$e(e),c=we(e),m=Ee(c),u=q(0);let p={};const S=P(()=>e.readonly!==!0&&e.disable!==!0),T=P(()=>`q-rating row inline items-center q-rating--${S.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),A=P(()=>{const l=Array.isArray(e.icon)===!0?e.icon.length:0,n=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,E=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,R=Array.isArray(e.color)===!0?e.color.length:0,N=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,i=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:l,icon:l>0?e.icon[l-1]:e.icon,selIconLen:n,selIcon:n>0?e.iconSelected[n-1]:e.iconSelected,halfIconLen:E,halfIcon:E>0?e.iconHalf[n-1]:e.iconHalf,colorLen:R,color:R>0?e.color[R-1]:e.color,selColorLen:N,selColor:N>0?e.colorSelected[N-1]:e.colorSelected,halfColorLen:i,halfColor:i>0?e.colorHalf[i-1]:e.colorHalf}}),L=P(()=>{if(typeof e.iconAriaLabel=="string"){const l=e.iconAriaLabel.length!==0?`${e.iconAriaLabel} `:"";return n=>`${l}${n}`}if(Array.isArray(e.iconAriaLabel)===!0){const l=e.iconAriaLabel.length;if(l>0)return n=>e.iconAriaLabel[Math.min(n,l)-1]}return(l,n)=>`${n} ${l}`}),I=P(()=>{const l=[],n=A.value,E=Math.ceil(e.modelValue),R=S.value===!0?0:null,N=e.iconHalf===void 0||E===e.modelValue?-1:E;for(let i=1;i<=e.max;i++){const k=u.value===0&&e.modelValue>=i||u.value>0&&u.value>=i,B=N===i&&u.value<i,z=u.value>0&&(B===!0?E:e.modelValue)>=i&&u.value<i,te=B===!0?i<=n.halfColorLen?e.colorHalf[i-1]:n.halfColor:n.selColor!==void 0&&k===!0?i<=n.selColorLen?e.colorSelected[i-1]:n.selColor:i<=n.colorLen?e.color[i-1]:n.color,pe=(B===!0?i<=n.halfIconLen?e.iconHalf[i-1]:n.halfIcon:n.selIcon!==void 0&&(k===!0||z===!0)?i<=n.selIconLen?e.iconSelected[i-1]:n.selIcon:i<=n.iconLen?e.icon[i-1]:n.icon)||r.iconSet.rating.icon;l.push({name:(B===!0?i<=n.halfIconLen?e.iconHalf[i-1]:n.halfIcon:n.selIcon!==void 0&&(k===!0||z===!0)?i<=n.selIconLen?e.iconSelected[i-1]:n.selIcon:i<=n.iconLen?e.icon[i-1]:n.icon)||r.iconSet.rating.icon,attrs:{tabindex:R,role:"radio","aria-checked":e.modelValue===i?"true":"false","aria-label":L.value(i,pe)},iconClass:"q-rating__icon"+(k===!0||B===!0?" q-rating__icon--active":"")+(z===!0?" q-rating__icon--exselected":"")+(u.value===i?" q-rating__icon--hovered":"")+(te!==void 0?` text-${te}`:"")})}return l}),d=P(()=>{const l={role:"radiogroup"};return e.disable===!0&&(l["aria-disabled"]="true"),e.readonly===!0&&(l["aria-readonly"]="true"),l});function f(l){if(S.value===!0){const n=Le(parseInt(l,10),1,parseInt(e.max,10)),E=e.noReset!==!0&&e.modelValue===n?0:n;E!==e.modelValue&&a("update:modelValue",E),u.value=0}}function h(l){S.value===!0&&(u.value=l)}function b(l,n){switch(l.keyCode){case 13:case 32:return f(n),Y(l);case 37:case 40:return p[`rt${n-1}`]&&p[`rt${n-1}`].focus(),Y(l);case 39:case 38:return p[`rt${n+1}`]&&p[`rt${n+1}`].focus(),Y(l)}}function C(){u.value=0}return De(()=>{p={}}),()=>{const l=[];return I.value.forEach(({iconClass:n,name:E,attrs:R},N)=>{const i=N+1;l.push(W("div",{key:i,ref:k=>{p[`rt${i}`]=k},class:"q-rating__icon-container flex flex-center",...R,onClick(){f(i)},onMouseover(){h(i)},onMouseout:C,onFocus(){h(i)},onBlur:C,onKeyup(k){b(k,i)}},Ce(t[`tip-${i}`],[W(F,{class:n,name:E})])))}),e.name!==void 0&&e.disable!==!0&&m(l,"push"),W("div",{class:T.value,style:g.value,...d.value},l)}}}),Ke={class:"text-h6"},Xe=y("p",null,' Continue reading to learn more, or scroll to the bottom and click the "Start Using App" button to jump right in. ',-1),Ge={class:"q-mb-md"},Je=y("p",null," You are currently on the Dashboard page. This page gives you quick access to the primary data you work with in the app. You can favorite items on the Dashboard by clicking the star icon in the top right corner of the item. This prioritizes the item to the top of the list. ",-1),Ze={class:"q-mb-md"},et=y("p",null," You can navigate through the app using the menu in the top left corner of the page. An example of the menu button is below. The menu gives you access to the primary data tables, Frequently Asked Questions (FAQ), Settings, and more. More advanced operations for the app are available on the Settings page. ",-1),tt={class:"q-mb-md"},ot=y("p",null," You can access the data tables for the current Dashboard selection by clicking the buttons in the top right corner of the page. The left button is for the parent records. The right button is for the child records. ",-1),at={class:"q-mb-md"},nt=y("p",null,"Click the button below when you are ready to get started.",-1),lt=j({__name:"WelcomeOverlay",setup(e){const t=q(0),a=q(!1);ce(async()=>{a.value=!!await w.getSettingValue(G.WELCOME_OVERLAY)});async function r(){await w.setSetting(G.WELCOME_OVERLAY,!1),a.value=!1}return(g,c)=>($(),H(Fe,{modelValue:a.value,"onUpdate:modelValue":c[2]||(c[2]=m=>a.value=m),persistent:""},{default:_(()=>[s(de,{flat:"",square:""},{default:_(()=>[s(ue,null,{default:_(()=>[y("p",Ke,"Welcome to "+O(o(J)),1),y("p",null,O(o(Ie)),1),Xe,y("div",Ge,[Je,s(Ye,{modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=m=>t.value=m),max:1,icon:o(v).FAVORITE_OFF,"icon-selected":o(v).FAVORITE_ON,color:"warning",size:"md"},null,8,["modelValue","icon","icon-selected"])]),y("div",Ze,[et,s(D,{disable:"",color:"primary",class:"q-px-sm",icon:o(v).MENU},null,8,["icon"])]),y("div",tt,[ot,s(D,{disable:"",color:"info",class:"q-px-sm q-mr-sm",icon:o(v).PARENTS},null,8,["icon"]),s(D,{disable:"",color:"info",class:"q-px-sm",icon:o(v).CHILDREN},null,8,["icon"])]),y("div",at,[y("p",null," Hope you find "+O(o(J))+" useful. Please consider donating to help me continue to create and maintain apps like this. Thank you! ",1),s(D,{color:"warning",label:"Donate",to:{name:o(xe).DONATE},icon:o(v).DONATE},null,8,["to","icon"])]),y("div",null,[nt,s(D,{"no-caps":"",label:"Start Using App",class:"full-width",size:"lg",color:"positive",icon:o(v).READY,onClick:c[1]||(c[1]=m=>r())},null,8,["icon"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),rt=Qe?window:void 0;function it(e,t={}){const{immediate:a=!0,window:r=rt}=t,g=q(!1);let c=0,m=null;function u(T){if(!g.value||!r)return;const A=T-(c||T);e({delta:A,timestamp:T}),c=T,m=r.requestAnimationFrame(u)}function p(){!g.value&&r&&(g.value=!0,m=r.requestAnimationFrame(u))}function S(){g.value=!1,m!=null&&r&&(r.cancelAnimationFrame(m),m=null)}return a&&p(),Be(S),{isActive:Oe(g),pause:S,resume:p}}var st=Object.defineProperty,le=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,re=(e,t,a)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,dt=(e,t)=>{for(var a in t||(t={}))ct.call(t,a)&&re(e,a,t[a]);if(le)for(var a of le(t))ut.call(t,a)&&re(e,a,t[a]);return e};function mt(e={}){const{controls:t=!1,interval:a="requestAnimationFrame"}=e,r=q(new Date),g=()=>r.value=new Date,c=a==="requestAnimationFrame"?it(g,{immediate:!0}):He(g,a,{immediate:!0});return t?dt({now:r},c):r}var ft=Object.defineProperty,U=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ie=(e,t,a)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,vt=(e,t)=>{for(var a in t||(t={}))be.call(t,a)&&ie(e,a,t[a]);if(U)for(var a of U(t))ye.call(t,a)&&ie(e,a,t[a]);return e},ht=(e,t)=>{var a={};for(var r in e)be.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&U)for(var r of U(e))t.indexOf(r)<0&&ye.call(e,r)&&(a[r]=e[r]);return a};const gt=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],bt={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function yt(e){return e.toISOString().slice(0,10)}function pt(e,t={}){const{controls:a=!1,updateInterval:r=3e4}=t,g=mt({interval:r,controls:!0}),{now:c}=g,m=ht(g,["now"]),u=P(()=>_t(new Date(ne(e)),t,ne(c)));return a?vt({timeAgo:u},m):u}function _t(e,t={},a=Date.now()){var r;const{max:g,messages:c=bt,fullDateFormatter:m=yt,units:u=gt,showSecond:p=!1,rounding:S="round"}=t,T=typeof S=="number"?h=>+h.toFixed(S):Math[S],A=+a-+e,L=Math.abs(A);function I(h,b){return T(Math.abs(h)/b.value)}function d(h,b){const C=I(h,b),l=h>0,n=f(b.name,C,l);return f(l?"past":"future",n,l)}function f(h,b,C){const l=c[h];return typeof l=="function"?l(b,C):l.replace("{0}",b.toString())}if(L<6e4&&!p)return c.justNow;if(typeof g=="number"&&L>g)return m(new Date(e));if(typeof g=="string"){const h=(r=u.find(b=>b.name===g))==null?void 0:r.max;if(h&&L>h)return m(new Date(e))}for(const[h,b]of u.entries()){if(I(A,b)<=0&&u[h-1])return d(A,u[h-1]);if(L<b.max)return d(A,b)}return c.invalid}const At={class:"absolute-top-right q-ma-xs"},St={key:1},Tt=j({__name:"DashboardRecordCardMenu",props:{parentTable:{},record:{}},setup(e){const t=e,a=he(),{log:r}=me(),{goToEdit:g}=ge(),{confirmDialog:c,dismissDialog:m,inspectDialog:u,chartsDialog:p}=ze();async function S(d){m("Previous Note",d,v.NOTE)}async function T(d,f,h){const b=h?"Unfavorite":"Favorite",C=`Do you want to ${b.toLocaleLowerCase()} ${f}?`,l=h?v.FAVORITE_OFF:v.FAVORITE_ON;c(b,C,l,"info",async()=>{try{await w.toggleFavorite(t.parentTable,d),r.info(`${f} unfavorited`,{id:d,name:f})}catch(n){r.error("Unfavorite update failed",n)}})}async function A(d){const f=await w.getRecord(t.parentTable,d);f?u(f,t.parentTable):r.error("Failed to find record",{id:d})}async function L(d,f){p(f,d)}function I(d,f){c("Deactivate Record","Would you like to deactivate this record?",v.CANCEL,"warning",async()=>{try{await w.toggleActive(d,f),r.info("Deactivated record",{table:d,id:f})}catch(h){r.error("Deactivation failed",h)}})}return(d,f)=>{var h;return $(),x("div",At,[Z(s(F,{name:o(v).NOTE,color:"primary",size:"md",class:"cursor-pointer q-mr-xs",onClick:f[0]||(f[0]=b=>{var C,l;return S(((l=(C=d.record)==null?void 0:C.previous)==null?void 0:l.note)||"")})},null,8,["name"]),[[ee,(h=d.record.previous)==null?void 0:h.note]]),d.record.activated?($(),H(D,{key:0,round:"",flat:"",color:"warning",icon:o(v).CANCEL,onClick:f[1]||(f[1]=b=>I(d.parentTable,d.record.id))},null,8,["icon"])):($(),x("span",St,[s(F,{name:d.record.favorited?o(v).FAVORITE_ON:o(v).FAVORITE_OFF,color:d.record.favorited?"warning":"grey",size:"md",class:"cursor-pointer",onClick:f[2]||(f[2]=b=>T(d.record.id,d.record.name,d.record.favorited))},null,8,["name","color"])])),s(D,{round:"",flat:"",icon:o(v).MENU_VERTICAL},{default:_(()=>[s(je,{"auto-close":"",anchor:"top right","transition-show":"flip-right","transition-hide":"flip-left"},{default:_(()=>[s(Ue,null,{default:_(()=>[s(X,{clickable:"",onClick:f[3]||(f[3]=b=>L(d.parentTable,d.record.id))},{default:_(()=>[s(M,{avatar:""},{default:_(()=>[s(F,{color:"accent",name:o(v).CHARTS},null,8,["name"])]),_:1}),s(M,null,{default:_(()=>[K("Charts")]),_:1})]),_:1}),s(X,{clickable:"",onClick:f[4]||(f[4]=b=>A(d.record.id))},{default:_(()=>[s(M,{avatar:""},{default:_(()=>[s(F,{color:"primary",name:o(v).INSPECT},null,8,["name"])]),_:1}),s(M,null,{default:_(()=>[K("Inspect")]),_:1})]),_:1}),s(X,{disable:d.record.activated,clickable:"",onClick:f[5]||(f[5]=b=>o(g)(o(a).dashboardSelection,d.record.id))},{default:_(()=>[s(M,{avatar:""},{default:_(()=>[s(F,{color:"warning",name:o(v).EDIT},null,8,["name"])]),_:1}),s(M,null,{default:_(()=>[K("Edit")]),_:1})]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["icon"])])}}}),$t={class:"row justify-center q-gutter-md"},wt=y("span",{class:"text-caption q-ml-xs"},"Active",-1),Dt={class:"text-h6"},Ct={key:1},Et={class:"text-caption q-ml-xs"},Lt={key:2},It={class:"text-caption q-ml-xs"},xt={class:"col-12 text-grey text-center text-body1"},Ft={key:0,class:"col-12 text-center"},Ot={class:"col-12 text-center"},se=j({__name:"DashboardRecordCardList",props:{parentTable:{},records:{},showDescriptions:{type:Boolean},defaultsFunc:{type:Function}},setup(e){const t=e,{goToCreate:a,goToActive:r}=ge();async function g(c,m){await w.toggleActive(c,m),r()}return(c,m)=>($(),x("div",$t,[($(!0),x(fe,null,ve(c.records,u=>($(),x("div",{key:u.id,class:"col-xs-12 col-sm-12 col-md-12 col-lg-5"},[s(de,{class:"column full-height"},{default:_(()=>[s(ue,{class:"col"},{default:_(()=>{var p,S;return[s(Tt,{parentTable:c.parentTable,record:u},null,8,["parentTable","record"]),u.activated?($(),H(ae,{key:0,rounded:"",color:"warning",class:"absolute-top-left q-py-none",style:{left:"-4px",top:"-6px"}},{default:_(()=>[s(F,{name:o(v).LOCK},null,8,["name"]),wt]),_:1})):Q("",!0),y("p",Dt,O(u.name),1),c.showDescriptions?($(),x("p",Ct,O(u.desc),1)):Q("",!0),s(ae,{rounded:"",color:"secondary",class:"q-py-none"},{default:_(()=>{var T;return[s(F,{name:o(v).PREVIOUS},null,8,["name"]),y("span",Et,O(o(pt)(((T=u.previous)==null?void 0:T.createdTimestamp)||"").value||"No previous records"),1)]}),_:2},1024),(p=u.previous)!=null&&p.createdTimestamp?($(),x("div",Lt,[s(F,{name:o(v).CALENDAR_CHECK},null,8,["name"]),y("span",It,O(o(Ve)((S=u.previous)==null?void 0:S.createdTimestamp)),1)])):Q("",!0)]}),_:2},1024),u.activated?($(),H(oe,{key:0,class:"col-auto"},{default:_(()=>[s(D,{label:"Go To Active",color:"positive",class:"full-width",icon:o(v).UP,onClick:m[0]||(m[0]=p=>o(r)())},null,8,["icon"])]),_:1})):($(),H(oe,{key:1,class:"col-auto"},{default:_(()=>[s(D,{label:`Attach ${o(w).getLabel(o(w).getChildTable(c.parentTable),"singular")}`,color:"primary",class:"full-width q-mb-sm",icon:o(v).ATTACH,onClick:p=>o(a)(o(w).getChildTable(c.parentTable),u.id)},null,8,["label","icon","onClick"]),s(D,{label:"Activate",color:"primary",class:"full-width",icon:o(v).READY,onClick:p=>g(c.parentTable,u.id)},null,8,["icon","onClick"])]),_:2},1024))]),_:2},1024)]))),128)),y("div",xt,O(o(ke)(c.records)),1),c.records.length===0&&c.defaultsFunc?($(),x("div",Ft,[s(D,{class:"col-12 text-center",color:"primary",icon:o(v).DEFAULTS,label:`Add ${o(w).getLabel(t.parentTable,"singular")} Defaults`,onClick:m[1]||(m[1]=u=>c.defaultsFunc())},null,8,["icon","label"])])):Q("",!0),y("div",Ot,[s(D,{class:"col-12 text-center",color:"positive",icon:o(v).CREATE,label:`Create ${o(w).getLabel(c.parentTable,"singular")}`,onClick:m[2]||(m[2]=u=>o(a)(c.parentTable))},null,8,["icon","label"])])]))}}),kt={class:"q-mb-md"},Vt={class:"text-center text-body1"},qt={class:"row justify-center"},Zt=j({__name:"DashboardView",setup(e){qe({title:`${J} - Dashboard`});const t=he(),{log:a}=me(),{onDefaultExamples:r,onDefaultTests:g}=We(),c=[{value:V.EXAMPLES,label:Re.getLabel("plural"),icon:v.EXAMPLES},{value:V.TESTS,label:Ne.getLabel("plural"),icon:v.TESTS}],m=q(!1),u=q([]),p=q([]),S=w.liveDashboardData(V.EXAMPLES).subscribe({next:A=>u.value=A,error:A=>a.error("Error fetching live Examples",A)}),T=w.liveDashboardData(V.TESTS).subscribe({next:A=>p.value=A,error:A=>a.error("Error fetching live Tests",A)});return ce(async()=>{m.value=!!await w.getSettingValue(G.DASHBOARD_DESCRIPTIONS)}),Pe(()=>{S.unsubscribe(),T.unsubscribe()}),(A,L)=>($(),H(Me,{bannerIcon:o(v).DASHBOARD,bannerTitle:"Dashboard"},{default:_(()=>{var I;return[s(lt),y("section",kt,[y("p",Vt,O((I=c.find(d=>d.value===o(t).dashboardSelection))==null?void 0:I.label),1),y("div",qt,[($(),x(fe,null,ve(c,(d,f)=>s(D,{key:f,round:"",size:"lg",class:"q-mb-xs q-mx-xs",icon:d.icon,color:o(t).dashboardSelection===d.value?"info":"grey",onClick:h=>o(t).dashboardSelection=d.value},null,8,["icon","color","onClick"])),64))])]),y("section",null,[Z(s(se,{parentTable:o(V).EXAMPLES,records:u.value,showDescriptions:m.value,defaultsFunc:o(r)},null,8,["parentTable","records","showDescriptions","defaultsFunc"]),[[ee,o(t).dashboardSelection===o(V).EXAMPLES]]),Z(s(se,{parentTable:o(V).TESTS,records:p.value,showDescriptions:m.value,defaultsFunc:o(g)},null,8,["parentTable","records","showDescriptions","defaultsFunc"]),[[ee,o(t).dashboardSelection===o(V).TESTS]])])]}),_:1},8,["bannerIcon"]))}});export{Zt as default};
