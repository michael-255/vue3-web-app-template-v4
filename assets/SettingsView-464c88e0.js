import{f as ue,r as B,c as o,av as lt,s as ge,aw as ot,l as R,b as Re,ax as nt,e as Te,ay as st,az as rt,aA as it,aB as ut,am as ct,aC as dt,aD as _e,aE as mt,aF as vt,a6 as ft,ag as pt,ai as be,ad as bt,a5 as gt,p as te,aG as ht,aH as yt,n as kt,j as xt,w as St,t as Me,I as J,ao as H,P as se,aI as O,D as _,V as ae,q as Ct,N as wt,G as re,aJ as _t,O as Dt,v as K,x as $t,y as De,z as $e,A as oe,E as i,B as M,J as G,u as F,aK as ne,Q as Lt,aL as Vt,W as Ft,aM as Rt,aN as Tt}from"./index-24dbccec.js";import{b as Mt,Q as Le}from"./QSelect-1164f6a3.js";import{T as qt}from"./TouchPan-19cf5cab.js";import{u as qe}from"./useDialogs-81031fdf.js";import{u as Et}from"./useRoutables-4d249602.js";import{_ as Nt}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-de00a452.js";import"./QItem-4a4784b7.js";import"./QItemLabel-2ad87e79.js";import"./QMenu-315589be.js";import"./selection-f172746f.js";import"./action-b51c5118.js";import"./ui-e8c912c8.js";function ee(t,s,q,u){const e=[];return t.forEach(h=>{u(h)===!0?e.push(h):s.push({failedPropValidation:q,file:h})}),e}function ie(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),ge(t)}const At={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},It=["rejected"];function Ot({editable:t,dnd:s,getFileInput:q,addFilesToQueue:u}){const{props:e,emit:h,proxy:D}=ue(),y=B(null),z=o(()=>e.accept!==void 0?e.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),m=o(()=>parseInt(e.maxFiles,10)),k=o(()=>parseInt(e.maxTotalSize,10));function S(r){if(t.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&lt(r);else{const p=q();p&&p!==r.target&&p.click(r)}}function T(r){t.value&&r&&u(null,r)}function $(r,p,I,j){let b=Array.from(p||r.target.files);const E=[],Q=()=>{E.length!==0&&h("rejected",E)};if(e.accept!==void 0&&z.value.indexOf("*/")===-1&&(b=ee(b,E,"accept",g=>z.value.some(L=>g.type.toUpperCase().startsWith(L)||g.name.toUpperCase().endsWith(L))),b.length===0))return Q();if(e.maxFileSize!==void 0){const g=parseInt(e.maxFileSize,10);if(b=ee(b,E,"max-file-size",L=>L.size<=g),b.length===0)return Q()}if(e.multiple!==!0&&b.length!==0&&(b=[b[0]]),b.forEach(g=>{g.__key=g.webkitRelativePath+g.lastModified+g.name+g.size}),j===!0){const g=I.map(L=>L.__key);b=ee(b,E,"duplicate",L=>g.includes(L.__key)===!1)}if(b.length===0)return Q();if(e.maxTotalSize!==void 0){let g=j===!0?I.reduce((L,Y)=>L+Y.size,0):0;if(b=ee(b,E,"max-total-size",L=>(g+=L.size,g<=k.value)),b.length===0)return Q()}if(typeof e.filter=="function"){const g=e.filter(b);b=ee(b,E,"filter",L=>g.includes(L))}if(e.maxFiles!==void 0){let g=j===!0?I.length:0;if(b=ee(b,E,"max-files",()=>(g++,g<=m.value)),b.length===0)return Q()}if(Q(),b.length!==0)return b}function C(r){ie(r),s.value!==!0&&(s.value=!0)}function c(r){ge(r),(r.relatedTarget!==null||ot.is.safari!==!0?r.relatedTarget!==y.value:document.elementsFromPoint(r.clientX,r.clientY).includes(y.value)===!1)===!0&&(s.value=!1)}function N(r){ie(r);const p=r.dataTransfer.files;p.length!==0&&u(null,p),s.value=!1}function W(r){if(s.value===!0)return R("div",{ref:y,class:`q-${r}__dnd absolute-full`,onDragenter:ie,onDragover:ie,onDragleave:c,onDrop:N})}return Object.assign(D,{pickFiles:S,addFiles:T}),{pickFiles:S,addFiles:T,onDragover:C,onDragleave:c,processFiles:$,getDndNode:W,maxFilesNumber:m,maxTotalSizeNumber:k}}const Bt=Re({name:"QFile",inheritAttrs:!1,props:{...nt,...Te,...At,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...st,...It],setup(t,{slots:s,emit:q,attrs:u}){const{proxy:e}=ue(),h=rt(),D=B(null),y=B(!1),z=it(t),{pickFiles:m,onDragover:k,onDragleave:S,processFiles:T,getDndNode:$}=Ot({editable:h.editable,dnd:y,getFileInput:X,addFilesToQueue:v}),C=ut(t),c=o(()=>Object(t.modelValue)===t.modelValue?"length"in t.modelValue?Array.from(t.modelValue):[t.modelValue]:[]),N=o(()=>_e(c.value)),W=o(()=>c.value.map(d=>d.name).join(", ")),r=o(()=>mt(c.value.reduce((d,V)=>d+V.size,0))),p=o(()=>({totalSize:r.value,filesNumber:c.value.length,maxFiles:t.maxFiles})),I=o(()=>({tabindex:-1,type:"file",title:"",accept:t.accept,capture:t.capture,name:z.value,...u,id:h.targetUid.value,disabled:h.editable.value!==!0})),j=o(()=>"q-file q-field--auto-height"+(y.value===!0?" q-file--dnd":"")),b=o(()=>t.multiple===!0&&t.append===!0);function E(d){const V=c.value.slice();V.splice(d,1),g(V)}function Q(d){const V=c.value.indexOf(d);V>-1&&E(V)}function g(d){q("update:modelValue",t.multiple===!0?d:d[0])}function L(d){d.keyCode===13&&vt(d)}function Y(d){(d.keyCode===13||d.keyCode===32)&&m(d)}function X(){return D.value}function v(d,V){const U=T(d,V,c.value,b.value),le=X();le!=null&&(le.value=""),U!==void 0&&((t.multiple===!0?t.modelValue&&U.every(ce=>c.value.includes(ce)):t.modelValue===U[0])||g(b.value===!0?c.value.concat(U):U))}function l(){return[R("input",{class:[t.inputClass,"q-file__filler"],style:t.inputStyle})]}function n(){if(s.file!==void 0)return c.value.length===0?l():c.value.map((V,U)=>s.file({index:U,file:V,ref:this}));if(s.selected!==void 0)return c.value.length===0?l():s.selected({files:c.value,ref:this});if(t.useChips===!0)return c.value.length===0?l():c.value.map((V,U)=>R(Mt,{key:"file-"+U,removable:h.editable.value,dense:!0,textColor:t.color,tabindex:t.tabindex,onRemove:()=>{E(U)}},()=>R("span",{class:"ellipsis",textContent:V.name})));const d=t.displayValue!==void 0?t.displayValue:W.value;return d.length!==0?[R("div",{class:t.inputClass,style:t.inputStyle,textContent:d})]:l()}function A(){const d={ref:D,...I.value,...C.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:v};return t.multiple===!0&&(d.multiple=!0),R("input",d)}return Object.assign(h,{fieldClass:j,emitValue:g,hasValue:N,inputRef:D,innerValue:c,floatingLabel:o(()=>N.value===!0||_e(t.displayValue)),computedCounter:o(()=>{if(t.counterLabel!==void 0)return t.counterLabel(p.value);const d=t.maxFiles;return`${c.value.length}${d!==void 0?" / "+d:""} (${r.value})`}),getControlChild:()=>$("file"),getControl:()=>{const d={ref:h.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:t.tabindex};return h.editable.value===!0&&Object.assign(d,{onDragover:k,onDragleave:S,onKeydown:L,onKeyup:Y}),R("div",d,[A()].concat(n()))}}),Object.assign(e,{removeAtIndex:E,removeFile:Q,getNativeElement:()=>D.value}),ct(e,"nativeEl",()=>D.value),dt(h)}}),Ve="q-slider__marker-labels",zt=t=>({value:t}),Pt=({marker:t})=>R("div",{key:t.value,style:t.style,class:t.classes},t.label),Ee=[34,37,40,33,39,38],jt={...gt,...Te,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ut=["pan","update:modelValue","change"];function Wt({updateValue:t,updatePosition:s,getDragging:q,formAttrs:u}){const{props:e,emit:h,slots:D,proxy:{$q:y}}=ue(),z=ft(e,y),m=kt(u),k=B(!1),S=B(!1),T=B(!1),$=B(!1),C=o(()=>e.vertical===!0?"--v":"--h"),c=o(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),N=o(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(y.lang.rtl===!0)),W=o(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),r=o(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),p=o(()=>e.disable!==!0&&e.readonly!==!0&&W.value<r.value),I=o(()=>(String(e.step).trim().split(".")[1]||"").length),j=o(()=>e.step===0?1:e.step),b=o(()=>p.value===!0?e.tabindex||0:-1),E=o(()=>e.max-e.min),Q=o(()=>r.value-W.value),g=o(()=>de(W.value)),L=o(()=>de(r.value)),Y=o(()=>e.vertical===!0?N.value===!0?"bottom":"top":N.value===!0?"right":"left"),X=o(()=>e.vertical===!0?"height":"width"),v=o(()=>e.vertical===!0?"width":"height"),l=o(()=>e.vertical===!0?"vertical":"horizontal"),n=o(()=>{const a={role:"slider","aria-valuemin":W.value,"aria-valuemax":r.value,"aria-orientation":l.value,"data-step":e.step};return e.disable===!0?a["aria-disabled"]="true":e.readonly===!0&&(a["aria-readonly"]="true"),a}),A=o(()=>`q-slider q-slider${C.value} q-slider--${k.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(p.value===!0?" q-slider--editable":""))+(T.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(z.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+C.value:""));function d(a){const f="q-slider__"+a;return`${f} ${f}${C.value} ${f}${C.value}${c.value}`}function V(a){const f="q-slider__"+a;return`${f} ${f}${C.value}`}const U=o(()=>{const a=e.selectionColor||e.color;return"q-slider__selection absolute"+(a!==void 0?` text-${a}`:"")}),le=o(()=>V("markers")+" absolute overflow-hidden"),ce=o(()=>V("track-container")),Ne=o(()=>d("pin")),Ae=o(()=>d("label")),Ie=o(()=>d("text-container")),Oe=o(()=>d("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),Be=o(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),ze=o(()=>{const a={[v.value]:e.trackSize};return e.trackImg!==void 0&&(a.backgroundImage=`url(${e.trackImg}) !important`),a}),Pe=o(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),he=o(()=>{const a={[Y.value]:`${100*g.value}%`,[X.value]:`${100*(L.value-g.value)}%`};return e.innerTrackImg!==void 0&&(a.backgroundImage=`url(${e.innerTrackImg}) !important`),a});function je(a){const{min:f,max:x,step:w}=e;let P=f+a*(x-f);if(w>0){const Z=(P-f)%w;P+=(Math.abs(Z)>=w/2?(Z<0?-1:1)*w:0)-Z}return I.value>0&&(P=parseFloat(P.toFixed(I.value))),te(P,W.value,r.value)}function de(a){return E.value===0?0:(a-e.min)/E.value}function Ue(a,f){const x=ht(a),w=e.vertical===!0?te((x.top-f.top)/f.height,0,1):te((x.left-f.left)/f.width,0,1);return te(N.value===!0?1-w:w,g.value,L.value)}const ye=o(()=>pt(e.markers)===!0?e.markers:j.value),ke=o(()=>{const a=[],f=ye.value,x=e.max;let w=e.min;do a.push(w),w+=f;while(w<x);return a.push(x),a}),xe=o(()=>{const a=` ${Ve}${C.value}-`;return Ve+`${a}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${a}${N.value===!0?"rtl":"ltr"}`}),me=o(()=>e.markerLabels===!1?null:Qe(e.markerLabels).map((a,f)=>({index:f,value:a.value,label:a.label||a.value,classes:xe.value+(a.classes!==void 0?" "+a.classes:""),style:{...Ce(a.value),...a.style||{}}}))),Se=o(()=>({markerList:me.value,markerMap:Ke.value,classes:xe.value,getStyle:Ce})),We=o(()=>{if(Q.value!==0){const a=100*ye.value/Q.value;return{...he.value,backgroundSize:e.vertical===!0?`2px ${a}%`:`${a}% 2px`}}return null});function Qe(a){if(a===!1)return null;if(a===!0)return ke.value.map(zt);if(typeof a=="function")return ke.value.map(x=>{const w=a(x);return be(w)===!0?{...w,value:x}:{value:x,label:w}});const f=({value:x})=>x>=e.min&&x<=e.max;return Array.isArray(a)===!0?a.map(x=>be(x)===!0?x:{value:x}).filter(f):Object.keys(a).map(x=>{const w=a[x],P=Number(x);return be(w)===!0?{...w,value:P}:{value:P,label:w}}).filter(f)}function Ce(a){return{[Y.value]:`${100*(a-e.min)/E.value}%`}}const Ke=o(()=>{if(e.markerLabels===!1)return null;const a={};return me.value.forEach(f=>{a[f.value]=f}),a});function Ge(){if(D["marker-label-group"]!==void 0)return D["marker-label-group"](Se.value);const a=D["marker-label"]||Pt;return me.value.map(f=>a({marker:f,...Se.value}))}const Je=o(()=>[[qt,Xe,void 0,{[l.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Xe(a){a.isFinal===!0?($.value!==void 0&&(s(a.evt),a.touch===!0&&t(!0),$.value=void 0,h("pan","end")),k.value=!1,T.value=!1):a.isFirst===!0?($.value=q(a.evt),s(a.evt),t(),k.value=!0,h("pan","start")):(s(a.evt),t())}function we(){T.value=!1}function Ye(a){s(a,q(a)),t(),S.value=!0,k.value=!0,document.addEventListener("mouseup",ve,!0)}function ve(){S.value=!1,k.value=!1,t(!0),we(),document.removeEventListener("mouseup",ve,!0)}function Ze(a){s(a,q(a)),t(!0)}function He(a){Ee.includes(a.keyCode)&&t(!0)}function et(a){if(e.vertical===!0)return null;const f=y.lang.rtl!==e.reverse?1-a:a;return{transform:`translateX(calc(${2*f-1} * ${e.thumbSize} / 2 + ${50-100*f}%))`}}function tt(a){const f=o(()=>S.value===!1&&(T.value===a.focusValue||T.value==="both")?" q-slider--focus":""),x=o(()=>`q-slider__thumb q-slider__thumb${C.value} q-slider__thumb${C.value}-${N.value===!0?"rtl":"ltr"} absolute non-selectable`+f.value+(a.thumbColor.value!==void 0?` text-${a.thumbColor.value}`:"")),w=o(()=>({width:e.thumbSize,height:e.thumbSize,[Y.value]:`${100*a.ratio.value}%`,zIndex:T.value===a.focusValue?2:void 0})),P=o(()=>a.labelColor.value!==void 0?` text-${a.labelColor.value}`:""),Z=o(()=>et(a.ratio.value)),fe=o(()=>"q-slider__text"+(a.labelTextColor.value!==void 0?` text-${a.labelTextColor.value}`:""));return()=>{const pe=[R("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[R("path",{d:e.thumbPath})]),R("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(pe.push(R("div",{class:Ne.value+" absolute fit no-pointer-events"+P.value},[R("div",{class:Ae.value,style:{minWidth:e.thumbSize}},[R("div",{class:Ie.value,style:Z.value},[R("span",{class:fe.value},a.label.value)])])])),e.name!==void 0&&e.disable!==!0&&m(pe,"push")),R("div",{class:x.value,style:w.value,...a.getNodeData()},pe)}}function at(a,f,x,w){const P=[];e.innerTrackColor!=="transparent"&&P.push(R("div",{key:"inner",class:Pe.value,style:he.value})),e.selectionColor!=="transparent"&&P.push(R("div",{key:"selection",class:U.value,style:a.value})),e.markers!==!1&&P.push(R("div",{key:"marker",class:le.value,style:We.value})),w(P);const Z=[yt("div",{key:"trackC",class:ce.value,tabindex:f.value,...x.value},[R("div",{class:Be.value,style:ze.value},P)],"slide",p.value,()=>Je.value)];if(e.markerLabels!==!1){const fe=e.switchMarkerLabelsSide===!0?"unshift":"push";Z[fe](R("div",{key:"markerL",class:Oe.value},Ge()))}return Z}return bt(()=>{document.removeEventListener("mouseup",ve,!0)}),{state:{active:k,focus:T,preventFocus:S,dragging:$,editable:p,classes:A,tabindex:b,attributes:n,step:j,decimals:I,trackLen:E,innerMin:W,innerMinRatio:g,innerMax:r,innerMaxRatio:L,positionProp:Y,sizeProp:X,isReversed:N},methods:{onActivate:Ye,onMobileClick:Ze,onBlur:we,onKeyup:He,getContent:at,getThumbRenderFn:tt,convertRatioToModel:je,convertModelToRatio:de,getDraggingRatio:Ue}}}const Qt=()=>({}),Kt=Re({name:"QSlider",props:{...jt,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:Ut,setup(t,{emit:s}){const{proxy:{$q:q}}=ue(),{state:u,methods:e}=Wt({updateValue:C,updatePosition:N,getDragging:c,formAttrs:xt(t)}),h=B(null),D=B(0),y=B(0);function z(){y.value=t.modelValue===null?u.innerMin.value:te(t.modelValue,u.innerMin.value,u.innerMax.value)}St(()=>`${t.modelValue}|${u.innerMin.value}|${u.innerMax.value}`,z),z();const m=o(()=>e.convertModelToRatio(y.value)),k=o(()=>u.active.value===!0?D.value:m.value),S=o(()=>{const p={[u.positionProp.value]:`${100*u.innerMinRatio.value}%`,[u.sizeProp.value]:`${100*(k.value-u.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(p.backgroundImage=`url(${t.selectionImg}) !important`),p}),T=e.getThumbRenderFn({focusValue:!0,getNodeData:Qt,ratio:k,label:o(()=>t.labelValue!==void 0?t.labelValue:y.value),thumbColor:o(()=>t.thumbColor||t.color),labelColor:o(()=>t.labelColor),labelTextColor:o(()=>t.labelTextColor)}),$=o(()=>u.editable.value!==!0?{}:q.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:W,onBlur:e.onBlur,onKeydown:r,onKeyup:e.onKeyup});function C(p){y.value!==t.modelValue&&s("update:modelValue",y.value),p===!0&&s("change",y.value)}function c(){return h.value.getBoundingClientRect()}function N(p,I=u.dragging.value){const j=e.getDraggingRatio(p,I);y.value=e.convertRatioToModel(j),D.value=t.snap!==!0||t.step===0?j:e.convertModelToRatio(y.value)}function W(){u.focus.value=!0}function r(p){if(!Ee.includes(p.keyCode))return;ge(p);const I=([34,33].includes(p.keyCode)?10:1)*u.step.value,j=([34,37,40].includes(p.keyCode)?-1:1)*(u.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*I;y.value=te(parseFloat((y.value+j).toFixed(u.decimals.value)),u.innerMin.value,u.innerMax.value),C()}return()=>{const p=e.getContent(S,u.tabindex,$,I=>{I.push(T())});return R("div",{ref:h,class:u.classes.value+(t.modelValue===null?" q-slider--no-value":""),...u.attributes.value,"aria-valuenow":t.modelValue},p)}}});function Fe(t){setTimeout(()=>{window.URL.revokeObjectURL(t.href)},1e4),t.remove()}function Gt(t,s,q={}){const{mimeType:u,byteOrderMark:e,encoding:h}=typeof q=="string"?{mimeType:q}:q,D=h!==void 0?new TextEncoder(h).encode([s]):s,y=e!==void 0?[e,D]:[D],z=new Blob(y,{type:u||"application/octet-stream"}),m=document.createElement("a");m.href=window.URL.createObjectURL(z),m.setAttribute("download",t),typeof m.download>"u"&&m.setAttribute("target","_blank"),m.classList.add("hidden"),m.style.position="fixed",document.body.appendChild(m);try{return m.click(),Fe(m),!0}catch(k){return Fe(m),k}}function Jt(){const{log:t}=Me(),{confirmDialog:s}=qe();function q(){const m=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega"];return m[Math.floor(Math.random()*m.length)]}function u(){const m="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return m[Math.floor(Math.random()*m.length)]}function e(){return Math.random()>=.5}function h(){return Math.floor(Math.random()*100)}function D(){return Date.now()-O["One Year"]}async function y(){s("Load Default Examples","Would you like the load default Examples into the database?",J.INFO,"info",async()=>{try{const m=[],k=[];(T=>{const $=H(),C=`Example - ${q()} ${u()}`;m.push({type:se.Values.example,id:$,timestamp:Date.now(),name:C,desc:`${C} description.`,enabled:!0,favorited:e(),lastSub:void 0,testIds:[H(),H(),H()]});for(let c=0;c<T;c++)k.push({type:se.Values.example,id:H(),coreId:$,timestamp:D()+O["One Day"]*c,note:`Example sub-record note ${c}`,percent:h()})})(360),await Promise.all([_.importRecords(ae.Values.core,m),_.importRecords(ae.Values.sub,k)]),t.info("Default examples loaded")}catch(m){t.error("Failed to load defaults",m)}})}async function z(){s("Load Default Tests","Would you like the load default Tests into the database?",J.INFO,"info",async()=>{try{const m=[],k=[];(T=>{const $=H(),C=`Test - ${q()} ${u()}`;m.push({type:se.Values.test,id:$,timestamp:Date.now(),name:C,desc:`${C} description.`,enabled:!0,favorited:e(),lastSub:void 0});for(let c=0;c<T;c++)k.push({type:se.Values.test,id:H(),coreId:$,timestamp:D()+O["One Day"]*c,note:`Test sub-record note ${c}`})})(0),await Promise.all([_.importRecords(ae.Values.core,m),_.importRecords(ae.Values.sub,k)]),t.info("Default tests loaded")}catch(m){t.error("Failed to load defaults",m)}})}return{onDefaultExamples:y,onDefaultTests:z}}const Xt={class:"q-mb-xl"},Yt=i("p",{class:"text-h6"},"Options",-1),Zt={class:"q-mb-md"},Ht=i("p",null,"Reset your app Settings to the defaults without impacting any of your data.",-1),ea={class:"q-mb-md"},ta=i("p",null," Welcome overlay provides helpful instructions on basic app usage on the Dashboard page. ",-1),aa={class:"q-mb-md"},la=i("p",null,"Show descriptions for records displayed on the Dashboard page.",-1),oa=i("p",null,"Dark mode allows you to switch between a light or dark theme for the app.",-1),na={class:"q-mb-xl"},sa=i("p",{class:"text-h6"},"Defaults",-1),ra=i("p",null,"Load default demostration records into the database. This action can be repeated.",-1),ia={class:"q-mb-md"},ua={class:"q-mb-xl"},ca=i("p",{class:"text-h6"},"Data Management",-1),da={class:"q-mb-md"},ma=i("p",null," Import data into the database from a JSON file. The app expects the data in the file to be structured the same as the exported version. ",-1),va={class:"q-mb-md"},fa=i("p",null," Export your data as a JSON file. Do this on a regularly basis so you have a backup of your data. ",-1),pa={class:"q-mb-md"},ba=i("p",null,"View the app logs to troubleshoot issues.",-1),ga={class:"q-mb-md"},ha=i("p",null,"Access any app data tables to view your records.",-1),ya={class:"q-mb-xl"},ka=i("p",{class:"text-h6"},"Logging",-1),xa={class:"q-mb-md"},Sa=i("p",null,"Show Console Logs will display all log messages in the browser console.",-1),Ca={class:"q-mb-md"},wa=i("p",null,"Show Info Messages will display info level notifications.",-1),_a={class:"q-mb-md"},Da=i("p",null," Validate that your logging settings above are working as expected by using the test action below. ",-1),$a={class:"q-mb-md"},La=i("p",null," Change log retention duration below. Logs older than the selected time will be deleted. This functions retroactivley. Expired log processing occurs every time the app is loaded. ",-1),Va={class:"q-mx-lg"},Fa={class:"q-mb-xl"},Ra=i("p",{class:"text-h6 text-negative"},"DANGER ZONE",-1),Ta=i("p",null," The following operations cannot be undone. Consider exporting your data before proceeding. ",-1),Ma={class:"q-mb-md"},qa=i("p",null,"Delete the app logs from the database.",-1),Ea={class:"q-mb-md"},Na=i("p",null,"Select a data type and permanently delete all of its records.",-1),Aa={class:"q-mb-md"},Ia=i("p",null,"Permanently delete all data records from the database.",-1),Oa={class:"q-mb-md"},Ba=i("p",null,"Delete the underlining database and all of its data (requires website reload).",-1),Ha=Ct({__name:"SettingsView",setup(t){wt({title:`${re} - Settings`});const{log:s}=Me(),{notify:q}=_t(),{confirmDialog:u}=qe(),{onDefaultExamples:e,onDefaultTests:h}=Jt(),{goToRecordsData:D,goToLogsData:y}=Et(),z=Dt.getAllOptions(),m=B([]),k=B(0),S=B(null),T=B(z),$=B(T.value[0]),C=B(z),c=B(C.value[0]),N=[O[O["One Week"]],O[O["One Month"]],O[O["Three Months"]],O[O["Six Months"]],O[O["One Year"]],O[O.Forever]],W=_.liveSettings().subscribe({next:v=>{var n;m.value=v;const l=(n=v.find(A=>A.key===K.Values["log-retention-duration"]))==null?void 0:n.value;k.value=N.findIndex(A=>A===O[l])},error:v=>{s.error("Error fetching live Settings",v)}});$t(()=>{W.unsubscribe()});function r(){s.debug("This is a Debug Log",{name:"Debug"}),s.info("This is an Info Log",{name:"Info"}),s.warn("This is a Warning Log",{name:"Warning"}),s.error("This is an Error Log",{name:"Error"})}function p(v){var n,A;const l=((A=(n=v[0])==null?void 0:n.importFile)==null?void 0:A.name)||void 0;s.warn(`Cannot import"${l}`,v)}function I(){var v;u("Import",`Import backup data from ${(v=S==null?void 0:S.value)==null?void 0:v.name} and attempt to load records into the database from it? Please note that Logs are NOT imported.`,J.INFO,"info",async()=>{try{const l=JSON.parse(await S.value.text());if(s.silentDebug("backupData:",l),l.appName!==re)throw new Error(`Cannot import data from the app ${l.appName}`);l.settings.length>0&&await Promise.all(l.settings.filter(n=>K.options.includes(n.key)).map(async n=>await _.setSetting(n.key,n.value))),await Promise.all([_.importRecords(ae.Values.core,l.coreRecords),_.importRecords(ae.Values.sub,l.subRecords)]),S.value=null,s.info("Successfully imported available data")}catch(l){s.error("Error during import",l)}})}function j(){const v=re.toLowerCase().split(" ").join("-"),l=new Date().toISOString().split("T")[0],n=`export-${v}-${l}.json`;u("Export",`Export all data into the file "${n}" as a backup?`,J.INFO,"info",async()=>{try{const A={appName:re,databaseVersion:Tt,timestamp:Date.now(),logs:await _.getLogs(),settings:await _.getSettings(),coreRecords:(await _.getAllCoreRecords()).map(V=>(delete V.lastSub,V)),subRecords:await _.getAllSubRecords()};if(s.silentDebug("backupData:",A),Gt(n,JSON.stringify(A),{encoding:"UTF-8",mimeType:"application/json"})===!0)s.info("File downloaded successfully",{filename:n});else throw new Error("Browser denied file download")}catch(A){s.error("Export failed",A)}})}async function b(v){try{const l=N[v],n=O[l];await _.setSetting(K.Values["log-retention-duration"],n),s.info("Updated log retention duration",{logDurationKey:l,logDuration:n,index:v})}catch(l){s.error("Log retention duration update failed",l)}}async function E(){u("Reset Settings","Would you like to reset your app Settings to the defaults? This does not impact your data.",J.REFRESH,"primary",async()=>{try{await _.clearSettings(),s.info("Successfully reset settings")}catch(v){s.error("Error reseting settings",v)}})}async function Q(){u("Delete Logs","Permanetly delete all Logs from the database?",J.CLEAR,"negative",async()=>{try{await _.clearLogs(),s.info("Successfully deleted logs data")}catch(v){s.error("Error deleting Logs",v)}})}async function g(v,l){u(`Delete ${v}`,`Permanetly delete all ${v} from the database?`,J.CLEAR,"negative",async()=>{try{await _.clearRecordsByType(l.group,l.type),s.info("Successfully deleted selected data")}catch(n){s.error(`Error deleting ${v}`,n)}})}async function L(){u("Delete All","Permanetly delete all data from the database?",J.CLEAR,"negative",async()=>{try{await _.clearAll(),s.info("All data successfully deleted")}catch(v){s.error("Error deleting all data",v)}})}async function Y(){u("Delete Database","Delete the underlining database? All data will be lost. You must reload the website after this action to reinitialize the database.",J.CLEAR,"negative",async()=>{try{await _.deleteDatabase(),q("Reload the website now",J.WARN,"warning")}catch(v){s.error("Database deletion failed",v)}})}function X(v){var l;return(l=m.value.find(n=>n.key===v))==null?void 0:l.value}return(v,l)=>(De(),$e(Nt,{bannerIcon:F(J).SETTINGS,bannerTitle:"Settings"},{default:oe(()=>[i("section",Xt,[Yt,i("div",Zt,[Ht,M(G,{label:"Reset Settings",color:"primary",onClick:l[0]||(l[0]=n=>E())})]),i("div",ea,[ta,M(ne,{label:"Show Welcome Overlay","model-value":X(F(K).Values["welcome-overlay"]),"onUpdate:modelValue":l[1]||(l[1]=n=>F(_).setSetting(F(K).Values["welcome-overlay"],n))},null,8,["model-value"])]),i("div",aa,[la,M(ne,{label:"Show Dashboard Descriptions","model-value":X(F(K).Values["dashboard-descriptions"]),"onUpdate:modelValue":l[2]||(l[2]=n=>F(_).setSetting(F(K).Values["dashboard-descriptions"],n))},null,8,["model-value"])]),i("div",null,[oa,M(ne,{label:"Dark Mode","model-value":X(F(K).Values["dark-mode"]),"onUpdate:modelValue":l[3]||(l[3]=n=>F(_).setSetting(F(K).Values["dark-mode"],n))},null,8,["model-value"])])]),i("section",na,[sa,i("div",null,[ra,i("div",ia,[M(G,{label:"Load Examples",color:"primary",onClick:l[4]||(l[4]=n=>F(e)())})]),i("div",null,[M(G,{label:"Load Tests",color:"primary",onClick:l[5]||(l[5]=n=>F(h)())})])])]),i("section",ua,[ca,i("div",da,[ma,M(Bt,{modelValue:S.value,"onUpdate:modelValue":l[8]||(l[8]=n=>S.value=n),dense:"",outlined:"",counter:"","bottom-slots":"",label:"File Select","max-file-size":F(Rt).MAX_FILE_SIZE,accept:"application/json",onRejected:p},{before:oe(()=>[M(G,{disable:!S.value,label:"Import",color:"primary",onClick:l[6]||(l[6]=n=>I())},null,8,["disable"])]),append:oe(()=>[S.value?(De(),$e(Lt,{key:0,name:F(J).CLOSE,class:"cursor-pointer",onClick:l[7]||(l[7]=Vt(n=>S.value=null,["stop"]))},null,8,["name"])):Ft("",!0)]),_:1},8,["modelValue","max-file-size"])]),i("div",va,[fa,M(G,{label:"Export",color:"primary",onClick:l[9]||(l[9]=n=>j())})]),i("div",pa,[ba,M(G,{label:"Access Logs",color:"primary",onClick:l[10]||(l[10]=n=>F(y)())})]),i("div",ga,[ha,M(Le,{modelValue:$.value,"onUpdate:modelValue":l[12]||(l[12]=n=>$.value=n),outlined:"",dense:"",label:"Record Type",options:T.value},{before:oe(()=>[M(G,{disable:!$.value,label:"Access Data",color:"primary",onClick:l[11]||(l[11]=n=>{var A,d,V,U;return F(D)((d=(A=$.value)==null?void 0:A.value)==null?void 0:d.group,(U=(V=$.value)==null?void 0:V.value)==null?void 0:U.type)})},null,8,["disable"])]),_:1},8,["modelValue","options"])])]),i("section",ya,[ka,i("div",xa,[Sa,M(ne,{label:"Show Console Logs","model-value":X(F(K).Values["console-logs"]),"onUpdate:modelValue":l[13]||(l[13]=n=>F(_).setSetting(F(K).Values["console-logs"],n))},null,8,["model-value"])]),i("div",Ca,[wa,M(ne,{label:"Show Info Messages","model-value":X(F(K).Values["info-messages"]),"onUpdate:modelValue":l[14]||(l[14]=n=>F(_).setSetting(F(K).Values["info-messages"],n))},null,8,["model-value"])]),i("div",_a,[Da,M(G,{label:"Test Logger",color:"primary",onClick:l[15]||(l[15]=n=>r())})]),i("div",$a,[La,i("div",Va,[M(Kt,{modelValue:k.value,"onUpdate:modelValue":l[16]||(l[16]=n=>k.value=n),"label-value":N[k.value],color:"primary",markers:"","label-always":"","switch-label-side":"",min:0,max:N.length-1,onChange:l[17]||(l[17]=n=>b(n))},null,8,["modelValue","label-value","max"])])])]),i("section",Fa,[Ra,Ta,i("div",Ma,[qa,M(G,{label:"Delete Logs",color:"negative",onClick:l[18]||(l[18]=n=>Q())})]),i("div",Ea,[Na,M(Le,{modelValue:c.value,"onUpdate:modelValue":l[20]||(l[20]=n=>c.value=n),outlined:"",dense:"",label:"Record Type",options:C.value},{before:oe(()=>[M(G,{disable:!c.value,label:"Delete Data",color:"negative",onClick:l[19]||(l[19]=n=>g(c.value.label,c.value.value))},null,8,["disable"])]),_:1},8,["modelValue","options"])]),i("div",Aa,[Ia,M(G,{label:"Delete All Data",color:"negative",onClick:l[21]||(l[21]=n=>L())})]),i("div",Oa,[Ba,M(G,{label:"Delete Database",color:"negative",onClick:l[22]||(l[22]=n=>Y())})])])]),_:1},8,["bannerIcon"]))}});export{Ha as default};
